if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(a){if(this._hash[a.id])throw new Error("Tried to register widget with id=="+a.id+" but that id is already registered");this._hash[a.id]=a;this.length++},remove:function(a){if(this._hash[a]){delete this._hash[a];this.length--}},forEach:function(a,b){b=b||dojo.global;var c=
0,d;for(d in this._hash)a.call(b,this._hash[d],c++,this._hash);return this},filter:function(a,b){b=b||dojo.global;var c=new dijit.WidgetSet,d=0,f;for(f in this._hash){var e=this._hash[f];a.call(b,e,d++,this._hash)&&c.add(e)}return c},byId:function(a){return this._hash[a]},byClass:function(a){var b=new dijit.WidgetSet,c,d;for(c in this._hash){d=this._hash[c];d.declaredClass==a&&b.add(d)}return b},toArray:function(){var a=[];for(var b in this._hash)a.push(this._hash[b]);return a},map:function(a,b){return dojo.map(this.toArray(),
a,b)},every:function(a,b){b=b||dojo.global;var c=0,d;for(d in this._hash)if(!a.call(b,this._hash[d],c++,this._hash))return false;return true},some:function(a,b){b=b||dojo.global;var c=0,d;for(d in this._hash)if(a.call(b,this._hash[d],c++,this._hash))return true;return false}});dijit.registry=new dijit.WidgetSet;dijit._widgetTypeCtr={};dijit.getUniqueId=function(a){var b;do b=a+"_"+(a in dijit._widgetTypeCtr?++dijit._widgetTypeCtr[a]:(dijit._widgetTypeCtr[a]=0));while(dijit.byId(b));return b};dijit.findWidgets=
function(a){function b(d){for(d=d.firstChild;d;d=d.nextSibling)if(d.nodeType==1){var f=d.getAttribute("widgetId");if(f){f=dijit.byId(f);c.push(f)}else b(d)}}var c=[];b(a);return c};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(a){if(!a._destroyed)if(a.destroyRecursive)a.destroyRecursive();else a.destroy&&a.destroy()})};dojo.isIE&&dojo.addOnWindowUnload(function(){dijit._destroyAll()});dijit.byId=function(a){return typeof a==
"string"?dijit.registry._hash[a]:a};dijit.byNode=function(a){return dijit.registry.byId(a.getAttribute("widgetId"))};dijit.getEnclosingWidget=function(a){for(;a;){var b=a.getAttribute&&a.getAttribute("widgetId");if(b)return dijit.byId(b);a=a.parentNode}return null};dijit._isElementShown=function(a){var b=dojo.style(a);return b.visibility!="hidden"&&b.visibility!="collapsed"&&b.display!="none"&&dojo.attr(a,"type")!="hidden"};dijit.isTabNavigable=function(a){if(dojo.attr(a,"disabled"))return false;
else if(dojo.hasAttr(a,"tabIndex"))return dojo.attr(a,"tabIndex")>=0;else switch(a.nodeName.toLowerCase()){case "a":return dojo.hasAttr(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":if(dojo.isMoz)return a.contentDocument.designMode=="on";else if(dojo.isWebKit)return(a=(a=a.contentDocument)&&a.body)&&a.contentEditable=="true";else return(a=(a=a.contentWindow.document)&&a.body)&&a.firstChild&&a.firstChild.contentEditable=="true";
default:return a.contentEditable=="true"}};dijit._getTabNavigable=function(a){var b,c,d,f,e,g,j=function(k){dojo.query("> *",k).forEach(function(i){var l=dijit._isElementShown(i);if(l&&dijit.isTabNavigable(i)){var m=dojo.attr(i,"tabIndex");if(!dojo.hasAttr(i,"tabIndex")||m==0){b||(b=i);c=i}else if(m>0){if(!d||m<f){f=m;d=i}if(!e||m>=g){g=m;e=i}}}l&&i.nodeName.toUpperCase()!="SELECT"&&j(i)})};dijit._isElementShown(a)&&j(a);return{first:b,last:c,lowest:d,highest:e}};dijit.getFirstInTabbingOrder=function(a){a=
dijit._getTabNavigable(dojo.byId(a));return a.lowest?a.lowest:a.first};dijit.getLastInTabbingOrder=function(a){a=dijit._getTabNavigable(dojo.byId(a));return a.last?a.last:a.highest};dijit.defaultDuration=dojo.config.defaultDuration||200}
if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed},getBookmark:function(){var a,b,c=dojo.doc.selection,d=dijit._curFocus;if(dojo.global.getSelection){if(c=dojo.global.getSelection())if(c.isCollapsed){if(a=d?d.tagName:""){a=a.toLowerCase();if(a=="textarea"||a=="input"&&(!d.type||d.type.toLowerCase()=="text")){c={start:d.selectionStart,
end:d.selectionEnd,node:d,pRange:true};return{isCollapsed:c.end<=c.start,mark:c}}}a={isCollapsed:true}}else{b=c.getRangeAt(0);a={isCollapsed:false,mark:b.cloneRange()}}}else if(c){a=d?d.tagName:"";a=a.toLowerCase();if(d&&a&&(a=="button"||a=="textarea"||a=="input"))if(c.type&&c.type.toLowerCase()=="none")return{isCollapsed:true,mark:null};else{b=c.createRange();return{isCollapsed:b.text&&b.text.length?false:true,mark:{range:b,pRange:true}}}a={};try{b=c.createRange();a.isCollapsed=!(c.type=="Text"?
b.htmlText.length:b.length)}catch(f){a.isCollapsed=true;return a}if(c.type.toUpperCase()=="CONTROL")if(b.length){a.mark=[];c=0;for(d=b.length;c<d;)a.mark.push(b.item(c++))}else{a.isCollapsed=true;a.mark=null}else a.mark=b.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return a},moveToBookmark:function(a){var b=dojo.doc;if(a=a.mark)if(dojo.global.getSelection){var c=dojo.global.getSelection();if(c&&c.removeAllRanges)if(a.pRange){a=a;c=a.node;c.selectionStart=
a.start;c.selectionEnd=a.end}else{c.removeAllRanges();c.addRange(a)}else console.warn("No idea how to restore selection for this browser!")}else if(b.selection&&a){var d;if(a.pRange)d=a.range;else if(dojo.isArray(a)){d=b.body.createControlRange();dojo.forEach(a,function(f){d.addElement(f)})}else{d=b.body.createTextRange();d.moveToBookmark(a)}d.select()}},getFocus:function(a,b){a=!dijit._curFocus||a&&dojo.isDescendant(dijit._curFocus,a.domNode)?dijit._prevFocus:dijit._curFocus;return{node:a,bookmark:a==
dijit._curFocus&&dojo.withGlobal(b||dojo.global,dijit.getBookmark),openedForWindow:b}},focus:function(a){if(a){var b="node"in a?a.node:a,c=a.bookmark;a=a.openedForWindow;var d=c?c.isCollapsed:false;if(b){var f=b.tagName.toLowerCase()=="iframe"?b.contentWindow:b;if(f&&f.focus)try{f.focus()}catch(e){}dijit._onFocusNode(b)}if(c&&dojo.withGlobal(a||dojo.global,dijit.isCollapsed)&&!d){a&&a.focus();try{dojo.withGlobal(a||dojo.global,dijit.moveToBookmark,null,[c])}catch(g){}}}},_activeStack:[],registerIframe:function(a){return dijit.registerWin(a.contentWindow,
a)},unregisterIframe:function(a){dijit.unregisterWin(a)},registerWin:function(a,b){var c=function(k){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false},0);dijit._onTouchNode(b||k.target||k.srcElement)},d=a.document;if(d)if(dojo.isIE){d.attachEvent("onmousedown",c);var f=function(k){k.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(k.srcElement)?dijit._onFocusNode(b||k.srcElement):dijit._onTouchNode(b||k.srcElement)};d.attachEvent("onactivate",f);var e=
function(k){dijit._onBlurNode(b||k.srcElement)};d.attachEvent("ondeactivate",e);return function(){d.detachEvent("onmousedown",c);d.detachEvent("onactivate",f);d.detachEvent("ondeactivate",e);d=null}}else{d.addEventListener("mousedown",c,true);var g=function(k){dijit._onFocusNode(b||k.target)};d.addEventListener("focus",g,true);var j=function(k){dijit._onBlurNode(b||k.target)};d.addEventListener("blur",j,true);return function(){d.removeEventListener("mousedown",c,true);d.removeEventListener("focus",
g,true);d.removeEventListener("blur",j,true);d=null}}},unregisterWin:function(a){a&&a()},_onBlurNode:function(){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(!dijit._justMouseDowned){dijit._clearActiveWidgetsTimer&&clearTimeout(dijit._clearActiveWidgetsTimer);dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null},100)}},_onTouchNode:function(a){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);
delete dijit._clearActiveWidgetsTimer}var b=[];try{for(;a;){var c=dojo.attr(a,"dijitPopupParent");if(c)a=dijit.byId(c).domNode;else if(a.tagName&&a.tagName.toLowerCase()=="body"){if(a===dojo.body())break;a=dijit.getDocumentWindow(a.ownerDocument).frameElement}else{var d=a.getAttribute&&a.getAttribute("widgetId");d&&b.unshift(d);a=a.parentNode}}}catch(f){}dijit._setStack(b)},_onFocusNode:function(a){if(a)if(a.nodeType!=9){dijit._onTouchNode(a);if(a!=dijit._curFocus){if(dijit._curFocus)dijit._prevFocus=
dijit._curFocus;dijit._curFocus=a;dojo.publish("focusNode",[a])}}},_setStack:function(a){var b=dijit._activeStack;dijit._activeStack=a;for(var c=0;c<Math.min(b.length,a.length);c++)if(b[c]!=a[c])break;for(var d,f=b.length-1;f>=c;f--)if(d=dijit.byId(b[f])){d._focused=false;d._hasBeenBlurred=true;d._onBlur&&d._onBlur();d._setStateClass&&d._setStateClass();dojo.publish("widgetBlur",[d])}for(f=c;f<a.length;f++)if(d=dijit.byId(a[f])){d._focused=true;d._onFocus&&d._onFocus();d._setStateClass&&d._setStateClass();
dojo.publish("widgetFocus",[d])}}});dojo.addOnLoad(function(){var a=dijit.registerWin(window);dojo.isIE&&dojo.addOnWindowUnload(function(){dijit.unregisterWin(a);a=null})})}
if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(a){this.pairs=[];this.returnWrappers=a||false};dojo.extend(dojo.AdapterRegistry,{register:function(a,b,c,d,f){this.pairs[f?"unshift":"push"]([a,b,c,d])},match:function(){for(var a=0;a<this.pairs.length;a++){var b=this.pairs[a];if(b[1].apply(this,arguments))return b[3]||this.returnWrappers?b[2]:b[2].apply(this,arguments)}throw new Error("No match found");
},unregister:function(a){for(var b=0;b<this.pairs.length;b++){var c=this.pairs[b];if(c[0]==a){this.pairs.splice(b,1);return true}}return false}})}
if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){var a=dojo.doc.compatMode=="BackCompat"?dojo.body():dojo.doc.documentElement,b=dojo._docScroll();return{w:a.clientWidth,h:a.clientHeight,l:b.x,t:b.y}};dijit.placeOnScreen=function(a,b,c,d){c=dojo.map(c,function(f){var e={corner:f,pos:{x:b.x,y:b.y}};if(d){e.pos.x+=f.charAt(1)=="L"?d.x:-d.x;e.pos.y+=f.charAt(0)=="T"?d.y:-d.y}return e});return dijit._place(a,
c)};dijit._place=function(a,b,c){var d=dijit.getViewport();if(!a.parentNode||String(a.parentNode.tagName).toLowerCase()!="body")dojo.body().appendChild(a);var f=null;dojo.some(b,function(e){var g=e.corner,j=e.pos;c&&c(a,e.aroundCorner,g);var k=a.style,i=k.display,l=k.visibility;k.visibility="hidden";k.display="";var m=dojo.marginBox(a);k.display=i;k.visibility=l;k=g.charAt(1)=="L"?j.x:Math.max(d.l,j.x-m.w);i=g.charAt(0)=="T"?j.y:Math.max(d.t,j.y-m.h);l=g.charAt(1)=="L"?Math.min(d.l+d.w,k+m.w):j.x;
var n=g.charAt(0)=="T"?Math.min(d.t+d.h,i+m.h):j.y;j=l-k;l=n-i;m=m.w-j+(m.h-l);if(f==null||m<f.overflow)f={corner:g,aroundCorner:e.aroundCorner,x:k,y:i,w:j,h:l,overflow:m};return!m});a.style.left=f.x+"px";a.style.top=f.y+"px";f.overflow&&c&&c(a,f.aroundCorner,f.corner);return f};dijit.placeOnScreenAroundNode=function(a,b,c,d){b=dojo.byId(b);var f=b.style.display;b.style.display="";var e=dojo.position(b,true);b.style.display=f;return dijit._placeOnScreenAroundRect(a,e.x,e.y,e.w,e.h,c,d)};dijit.placeOnScreenAroundRectangle=
function(a,b,c,d){return dijit._placeOnScreenAroundRect(a,b.x,b.y,b.width,b.height,c,d)};dijit._placeOnScreenAroundRect=function(a,b,c,d,f,e,g){var j=[];for(var k in e)j.push({aroundCorner:k,corner:e[k],pos:{x:b+(k.charAt(1)=="L"?0:d),y:c+(k.charAt(0)=="T"?0:f)}});return dijit._place(a,j,g)};dijit.placementRegistry=new dojo.AdapterRegistry;dijit.placementRegistry.register("node",function(a,b){return typeof b=="object"&&typeof b.offsetWidth!="undefined"&&typeof b.offsetHeight!="undefined"},dijit.placeOnScreenAroundNode);
dijit.placementRegistry.register("rect",function(a,b){return typeof b=="object"&&"x"in b&&"y"in b&&"width"in b&&"height"in b},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments)};dijit.getPopupAlignment=function(a,b){var c={};dojo.forEach(a,function(d){switch(d){case "after":c[b?"BR":"BL"]=b?"BL":"BR";break;case "before":c[b?"BL":"BR"]=b?"BR":"BL";break;case "below":c[b?"BL":"BR"]=b?"TL":"TR";
c[b?"BR":"BL"]=b?"TR":"TL";break;case "above":default:c[b?"TL":"TR"]=b?"BL":"BR";c[b?"TR":"TL"]=b?"BR":"BL";break}});return c};dijit.getPopupAroundAlignment=function(a,b){var c={};dojo.forEach(a,function(d){switch(d){case "after":c[b?"BR":"BL"]=b?"BL":"BR";break;case "before":c[b?"BL":"BR"]=b?"BR":"BL";break;case "below":c[b?"BL":"BR"]=b?"TL":"TR";c[b?"BR":"BL"]=b?"TR":"TL";break;case "above":default:c[b?"TL":"TR"]=b?"BL":"BR";c[b?"TR":"TL"]=b?"BR":"BL";break}});return c}}
if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(a){if(dojo.isIE&&window!==document.parentWindow&&!a._parentWindow){a.parentWindow.execScript("document._parentWindow = window;","Javascript");var b=a._parentWindow;a._parentWindow=null;return b}return a._parentWindow||a.parentWindow||a.defaultView}}
if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup=new (function(){var a=[],b=1E3,c=1;this.moveOffScreen=function(e){var g=e.style;g.visibility="hidden";g.position="absolute";g.top="-9999px";if(g.display=="none")g.display="";dojo.body().appendChild(e)};var d=function(){for(var e=a.length-1;e>0&&a[e].parent===a[e-1].widget;e--);return a[e]},f=[];this.open=function(e){var g=e.popup,j=e.orient||(dojo._isBodyLtr()?{BL:"TL",
BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"}),k=e.around,i=e.around&&e.around.id?e.around.id+"_dropdown":"popup_"+c++,l=f.pop(),m,n;if(l){m=l[0];n=l[1]}else{m=dojo.create("div",{"class":"dijitPopup"},dojo.body());dijit.setWaiRole(m,"presentation")}dojo.attr(m,{id:i,style:{zIndex:b+a.length,visibility:"hidden",left:"0px",top:"0px"},dijitPopupParent:e.parent?e.parent.id:""});i=g.domNode.style;i.display="";i.visibility="";i.position="";i.top="0px";m.appendChild(g.domNode);if(n)n.resize(m);
else n=new dijit.BackgroundIframe(m);j=k?dijit.placeOnScreenAroundElement(m,k,j,g.orient?dojo.hitch(g,"orient"):null):dijit.placeOnScreen(m,e,j=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],e.padding);m.style.visibility="visible";k=[];k.push(dojo.connect(m,"onkeypress",this,function(o){if(o.charOrCode==dojo.keys.ESCAPE&&e.onCancel){dojo.stopEvent(o);e.onCancel()}else if(o.charOrCode===dojo.keys.TAB){dojo.stopEvent(o);(o=d())&&o.onCancel&&o.onCancel()}}));g.onCancel&&k.push(dojo.connect(g,"onCancel",
e.onCancel));k.push(dojo.connect(g,g.onExecute?"onExecute":"onChange",function(){var o=d();o&&o.onExecute&&o.onExecute()}));a.push({wrapper:m,iframe:n,widget:g,parent:e.parent,onExecute:e.onExecute,onCancel:e.onCancel,onClose:e.onClose,handlers:k});g.onOpen&&g.onOpen(j);return j};this.close=function(e){for(;dojo.some(a,function(m){return m.widget==e});){var g=a.pop(),j=g.wrapper,k=g.iframe,i=g.widget,l=g.onClose;i.onClose&&i.onClose();dojo.forEach(g.handlers,dojo.disconnect);if(!i||!i.domNode)return;
this.moveOffScreen(i.domNode);j.style.top="-9999px";j.style.visibility="hidden";f.push([j,k]);l&&l()}}});dijit._frames=new (function(){var a=[];this.pop=function(){var b;if(a.length){b=a.pop();b.style.display=""}else{if(dojo.isIE){b=dojo.config.dojoBlankHtmlUrl||dojo.moduleUrl("dojo","resources/blank.html")+""||'javascript:""';b="<iframe src='"+b+"' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";b=dojo.doc.createElement(b)}else{b=dojo.create("iframe");
b.src='javascript:""';b.className="dijitBackgroundIframe";dojo.style(b,"opacity",0.1)}b.tabIndex=-1}return b};this.push=function(b){b.style.display="none";a.push(b)}});dijit.BackgroundIframe=function(a){if(!a.id)throw new Error("no id");if(dojo.isIE||dojo.isMoz){var b=dijit._frames.pop();a.appendChild(b);if(dojo.isIE<7){this.resize(a);this._conn=dojo.connect(a,"onresize",this,function(){this.resize(a)})}else dojo.style(b,{width:"100%",height:"100%"});this.iframe=b}};dojo.extend(dijit.BackgroundIframe,
{resize:function(a){this.iframe&&dojo.isIE<7&&dojo.style(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe}}})}
if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(a,b){try{a=dojo.byId(a);var c=a.ownerDocument||dojo.doc,d=c.body||dojo.body(),f=c.documentElement||d.parentNode,e=dojo.isIE,g=dojo.isWebKit;if((!(dojo.isMoz||e||g)||a==d||a==f)&&typeof a.scrollIntoView!="undefined")a.scrollIntoView(false);else{var j=c.compatMode=="BackCompat";c=j?d:f;g=g?d:c;var k=c.clientWidth,i=c.clientHeight,l=!dojo._isBodyLtr(),
m=b||dojo.position(a),n=a.parentNode;b=function(v){return e<=6||e&&j?false:dojo.style(v,"position").toLowerCase()=="fixed"};if(!b(a))for(;n;){if(n==d)n=g;var o=dojo.position(n),p=b(n);with(o){if(n==g){w=k;h=i;if(g==f&&e&&l)x+=g.offsetWidth-w;if(x<0||!e)x=0;if(y<0||!e)y=0}else{var r=dojo._getPadBorderExtents(n);w-=r.w;h-=r.h;x+=r.l;y+=r.t}with(n){if(n!=g){c=clientWidth;var q=w-c;if(c>0&&q>0){w=c;if(e&&l)x+=q}c=clientHeight;q=h-c;if(c>0&&q>0)h=c}if(p){if(y<0){h+=y;y=0}if(x<0){w+=x;x=0}if(y+h>i)h=i-
y;if(x+w>k)w=k-x}var s=m.x-x,u=m.y-Math.max(y,0),z=s+m.w-w,B=u+m.h-h;if(z*s>0){var A=Math[s<0?"max":"min"](s,z);m.x+=scrollLeft;scrollLeft+=e>=8&&!j&&l?-A:A;m.x-=scrollLeft}if(B*u>0){m.y+=scrollTop;scrollTop+=Math[u<0?"max":"min"](u,B);m.y-=scrollTop}}}n=n!=g&&!p&&n.parentNode}}}catch(t){console.error("scrollIntoView: "+t);a.scrollIntoView(false)}}}
if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");(function(){var a=dojo,b=a.doc.documentElement,c=a.isIE,d=a.isOpera,f=Math.floor,e=a.isFF,g=a.boxModel.replace(/-/,""),j={dj_ie:c,dj_ie6:f(c)==6,dj_ie7:f(c)==7,dj_ie8:f(c)==8,dj_iequirks:c&&a.isQuirks,dj_opera:d,dj_khtml:a.isKhtml,dj_webkit:a.isWebKit,dj_safari:a.isSafari,dj_chrome:a.isChrome,dj_gecko:a.isMozilla,dj_ff3:f(e)==3};j["dj_"+g]=true;for(var k in j)if(j[k])if(b.className)b.className+=
" "+k;else b.className=k;dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){b.className+=" dijitRtl";for(var i in j)if(j[i])b.className+=" "+i+"-rtl"}})})()}
if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=this._currentTimeout<0?this._initialDelay:this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,
b,c,d,f,e,g){if(f!=this._obj){this.stop();this._initialDelay=g||500;this._subsequentDelay=e||0.9;this._obj=f;this._evt=a;this._node=c;this._count=this._currentTimeout=-1;this._callback=dojo.hitch(b,d);this._fireEventAndReload()}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null}},addKeyListener:function(a,b,c,d,f,e){if(b.keyCode){b.charOrCode=b.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.",
"","2.0")}else if(b.charCode){b.charOrCode=String.fromCharCode(b.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0")}return[dojo.connect(a,"onkeypress",this,function(g){if(g.charOrCode==b.charOrCode&&(b.ctrlKey===undefined||b.ctrlKey==g.ctrlKey)&&(b.altKey===undefined||b.altKey==g.altKey)&&(b.metaKey===undefined||b.metaKey==(g.metaKey||false))&&(b.shiftKey===undefined||b.shiftKey==g.shiftKey)){dojo.stopEvent(g);
dijit.typematic.trigger(b,c,a,d,b,f,e)}else dijit.typematic._obj==b&&dijit.typematic.stop()}),dojo.connect(a,"onkeyup",this,function(){dijit.typematic._obj==b&&dijit.typematic.stop()})]},addMouseListener:function(a,b,c,d,f){var e=dojo.connect;return[e(a,"mousedown",this,function(g){dojo.stopEvent(g);dijit.typematic.trigger(g,b,a,c,a,d,f)}),e(a,"mouseup",this,function(g){dojo.stopEvent(g);dijit.typematic.stop()}),e(a,"mouseout",this,function(g){dojo.stopEvent(g);dijit.typematic.stop()}),e(a,"mousemove",
this,function(g){dojo.stopEvent(g)}),e(a,"dblclick",this,function(g){dojo.stopEvent(g);if(dojo.isIE){dijit.typematic.trigger(g,b,a,c,a,d,f);setTimeout(dojo.hitch(this,dijit.typematic.stop),50)}})]},addListener:function(a,b,c,d,f,e,g){return this.addKeyListener(b,c,d,f,e,g).concat(this.addMouseListener(a,d,f,e,g))}}}
if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var a=dojo.create("div",{id:"a11yTestNode",style:{cssText:'border: 1px solid;border-color:red green;position: absolute;height: 5px;top: -999px;background-image: url("'+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+'");'}},dojo.body()),b=dojo.getComputedStyle(a);if(b){var c=b.backgroundImage;b=b.borderTopColor==b.borderRightColor||c!=
null&&(c=="none"||c=="url(invalid-url:)");dojo[b?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE)a.outerHTML="";else dojo.body().removeChild(a)}}};if(dojo.isIE||dojo.isMoz)dojo._loaders.unshift(dijit.wai.onload);dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(a,b){a=this.getWaiRole(a);return b?a.indexOf(b)>-1:a.length>0},getWaiRole:function(a){return dojo.trim((dojo.attr(a,"role")||"").replace(this._XhtmlRoles,
"").replace("wairole:",""))},setWaiRole:function(a,b){var c=dojo.attr(a,"role")||"";if(this._XhtmlRoles.test(c)){if((" "+c+" ").indexOf(" "+b+" ")<0){var d=dojo.trim(c.replace(this._XhtmlRoles,""));c=dojo.trim(c.replace(d,""));dojo.attr(a,"role",c+(c?" ":"")+b)}}else dojo.attr(a,"role",b)},removeWaiRole:function(a,b){var c=dojo.attr(a,"role");if(c)if(b){b=dojo.trim((" "+c+" ").replace(" "+b+" "," "));dojo.attr(a,"role",b)}else a.removeAttribute("role")},hasWaiState:function(a,b){return a.hasAttribute?
a.hasAttribute("aria-"+b):!!a.getAttribute("aria-"+b)},getWaiState:function(a,b){return a.getAttribute("aria-"+b)||""},setWaiState:function(a,b,c){a.setAttribute("aria-"+b,c)},removeWaiState:function(a,b){a.removeAttribute("aria-"+b)}})}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base")}
if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"_connect",function(a,b){a&&dojo.isFunction(a._onConnect)&&a._onConnect(b)});dijit._connectOnUseEventHandler=function(){};dijit._lastKeyDownNode=null;dojo.isIE?function(){var a=function(b){dijit._lastKeyDownNode=b.srcElement};dojo.doc.attachEvent("onkeydown",a);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",a)})}():dojo.doc.addEventListener("keydown",
function(a){dijit._lastKeyDownNode=a.target},true);(function(){var a={},b=function(c){var d=c.declaredClass;if(!a[d]){var f=[],e;c=c.constructor.prototype;for(var g in c)if(dojo.isFunction(c[g])&&(e=g.match(/^_set([a-zA-Z]*)Attr$/))&&e[1])f.push(e[1].charAt(0).toLowerCase()+e[1].substr(1));a[d]=f}return a[d]||[]};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",
style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,
onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(c,d){this.create(c,d)},create:function(c,d){this.srcNodeRef=dojo.byId(d);this._connects=[];this._subscribes=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var f in this.attributeMap)delete this._deferredConnects[f];
for(f in this._deferredConnects)this[f]!==dijit._connectOnUseEventHandler&&delete this._deferredConnects[f];if(this.srcNodeRef&&typeof this.srcNodeRef.id=="string")this.id=this.srcNodeRef.id;if(c){this.params=c;dojo.mixin(this,c)}this.postMixInProperties();if(!this.id)this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();(c=this.srcNodeRef)&&c.parentNode&&c.parentNode.replaceChild(this.domNode,c);for(f in this.params)this._onConnect(f)}this.domNode&&
this.domNode.setAttribute("widgetId",this.id);this.postCreate();this.srcNodeRef&&!this.srcNodeRef.parentNode&&delete this.srcNodeRef;this._created=true},_applyAttributes:function(){var c=function(f,e){if(e.params&&f in e.params||e[f])e.attr(f,e[f])};for(var d in this.attributeMap)c(d,this);dojo.forEach(b(this),function(f){f in this.attributeMap||c(f,this)},this)},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div")},postCreate:function(){},startup:function(){this._started=
true},destroyRecursive:function(c){this._beingDestroyed=true;this.destroyDescendants(c);this.destroy(c)},destroy:function(c){this._beingDestroyed=true;this.uninitialize();var d=dojo,f=d.forEach,e=d.unsubscribe;f(this._connects,function(g){f(g,d.disconnect)});f(this._subscribes,function(g){e(g)});f(this._supportingWidgets||[],function(g){if(g.destroyRecursive)g.destroyRecursive();else g.destroy&&g.destroy()});this.destroyRendering(c);dijit.registry.remove(this.id);this._destroyed=true},destroyRendering:function(c){if(this.bgIframe){this.bgIframe.destroy(c);
delete this.bgIframe}if(this.domNode){c?dojo.removeAttr(this.domNode,"widgetId"):dojo.destroy(this.domNode);delete this.domNode}if(this.srcNodeRef){c||dojo.destroy(this.srcNodeRef);delete this.srcNodeRef}},destroyDescendants:function(c){dojo.forEach(this.getChildren(),function(d){d.destroyRecursive&&d.destroyRecursive(c)})},uninitialize:function(){return false},onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},_onConnect:function(c){if(c in
this._deferredConnects){var d=this[this._deferredConnects[c]||"domNode"];this.connect(d,c.toLowerCase(),c);delete this._deferredConnects[c]}},_setClassAttr:function(c){var d=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(d,this["class"]);this["class"]=c;dojo.addClass(d,c)},_setStyleAttr:function(c){var d=this[this.attributeMap.style||"domNode"];if(dojo.isObject(c))dojo.style(d,c);else if(d.style.cssText)d.style.cssText+="; "+c;else d.style.cssText=c;this.style=c},setAttribute:function(c,
d){dojo.deprecated(this.declaredClass+"::setAttribute() is deprecated. Use attr() instead.","","2.0");this.attr(c,d)},_attrToDom:function(c,d){var f=this.attributeMap[c];dojo.forEach(dojo.isArray(f)?f:[f],function(e){var g=this[e.node||e||"domNode"],j=e.type||"attribute";switch(j){case "attribute":if(dojo.isFunction(d))d=dojo.hitch(this,d);e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(c)?c.toLowerCase():c;dojo.attr(g,e,d);break;case "innerText":g.innerHTML="";g.appendChild(dojo.doc.createTextNode(d));
break;case "innerHTML":g.innerHTML=d;break;case "class":dojo.removeClass(g,this[c]);dojo.addClass(g,d);break}},this);this[c]=d},attr:function(c,d){var f=arguments.length;if(f==1&&!dojo.isString(c)){for(var e in c)this.attr(e,c[e]);return this}e=this._getAttrNames(c);if(f>=2){if(this[e.s]){f=dojo._toArray(arguments,1);return this[e.s].apply(this,f)||this}else{c in this.attributeMap&&this._attrToDom(c,d);this[c]=d}return this}else return this[e.g]?this[e.g]():this[c]},_attrPairNames:{},_getAttrNames:function(c){var d=
this._attrPairNames;if(d[c])return d[c];var f=c.charAt(0).toUpperCase()+c.substr(1);return d[c]={n:c+"Node",s:"_set"+f+"Attr",g:"_get"+f+"Attr"}},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[]},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[]},nodesWithKeyClick:["input","button"],connect:function(c,d,f){var e=
dojo,g=e._connect,j=[];if(d=="ondijitclick"){if(!this.nodesWithKeyClick[c.tagName.toLowerCase()]){var k=e.hitch(this,f);j.push(g(c,"onkeydown",this,function(i){if((i.keyCode==e.keys.ENTER||i.keyCode==e.keys.SPACE)&&!i.ctrlKey&&!i.shiftKey&&!i.altKey&&!i.metaKey){dijit._lastKeyDownNode=i.target;e.stopEvent(i)}}),g(c,"onkeyup",this,function(i){if((i.keyCode==e.keys.ENTER||i.keyCode==e.keys.SPACE)&&i.target===dijit._lastKeyDownNode&&!i.ctrlKey&&!i.shiftKey&&!i.altKey&&!i.metaKey){dijit._lastKeyDownNode=
null;return k(i)}}))}d="onclick"}j.push(g(c,d,this,f));this._connects.push(j);return j},disconnect:function(c){for(var d=0;d<this._connects.length;d++)if(this._connects[d]==c){dojo.forEach(c,dojo.disconnect);this._connects.splice(d,1);return}},subscribe:function(c,d){var f=dojo;c=f.subscribe(c,this,d);this._subscribes.push(c);return c},unsubscribe:function(c){for(var d=0;d<this._subscribes.length;d++)if(this._subscribes[d]==c){dojo.unsubscribe(c);this._subscribes.splice(d,1);return}},isLeftToRight:function(){return dojo._isBodyLtr()},
isFocusable:function(){return this.focus&&dojo.style(this.domNode,"display")!="none"},placeAt:function(c,d){c.declaredClass&&c.addChild?c.addChild(this,d):dojo.place(this.domNode,c,d);return this},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){}})})()}
if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){var a=dijit.getEnclosingWidget(this.domNode.parentNode);return a&&a.isContainer?a:null},_getSibling:function(a){var b=this.domNode;do b=b[a+"Sibling"];while(b&&b.nodeType!=1);return b&&dijit.byNode(b)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},
getIndexInParent:function(){var a=this.getParent();if(!a||!a.getIndexOfChild)return-1;return a.getIndexOfChild(this)}})}
if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(a,b){var c=this.containerNode;if(b&&typeof b=="number"){var d=this.getChildren();if(d&&d.length>=b){c=d[b-1].domNode;b="after"}}dojo.place(a.domNode,c,b);this._started&&!a._started&&a.startup()},removeChild:function(a){if(typeof a==
"number"&&a>0)a=this.getChildren()[a];if(a&&a.domNode){a=a.domNode;a.parentNode.removeChild(a)}},getChildren:function(){return dojo.query("> [widgetId]",this.containerNode).map(dijit.byNode)},hasChildren:function(){return dojo.query("> [widgetId]",this.containerNode).length>0},destroyDescendants:function(a){dojo.forEach(this.getChildren(),function(b){b.destroyRecursive(a)})},_getSiblingOfChild:function(a,b){a=a.domNode;b=b>0?"nextSibling":"previousSibling";do a=a[b];while(a&&(a.nodeType!=1||!dijit.byNode(a)));
return a&&dijit.byNode(a)},getIndexOfChild:function(a){return dojo.indexOf(this.getChildren(),a)},startup:function(){if(!this._started){dojo.forEach(this.getChildren(),function(a){a.startup()});this.inherited(arguments)}}})}
if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer");dojo.addClass(this.domNode,this.baseClass);this.inherited(arguments)},startup:function(){if(!this._started){this.inherited(arguments);var a=
this.getParent&&this.getParent();if(!(a&&a.isLayoutContainer)){this.resize();this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this.resize()})}}},resize:function(a,b){var c=this.domNode;if(a){dojo.marginBox(c,a);if(a.t)c.style.top=a.t+"px";if(a.l)c.style.left=a.l+"px"}b=b||{};dojo.mixin(b,a||{});if(!("h"in b)||!("w"in b))b=dojo.mixin(dojo.marginBox(c),b);a=dojo.getComputedStyle(c);var d=dojo._getMarginExtents(c,a),f=dojo._getBorderExtents(c,a);b=this._borderBox={w:b.w-(d.w+f.w),
h:b.h-(d.h+f.h)};d=dojo._getPadExtents(c,a);this._contentBox={l:dojo._toPixelValue(c,a.paddingLeft),t:dojo._toPixelValue(c,a.paddingTop),w:b.w-d.w,h:b.h-d.h};this.layout()},layout:function(){},_setupChild:function(a){dojo.addClass(a.domNode,this.baseClass+"-child");a.baseClass&&dojo.addClass(a.domNode,this.baseClass+"-"+a.baseClass)},addChild:function(a){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){dojo.removeClass(a.domNode,this.baseClass+"-child");a.baseClass&&
dojo.removeClass(a.domNode,this.baseClass+"-"+a.baseClass);this.inherited(arguments)}});dijit.layout.marginBox2contentBox=function(a,b){var c=dojo.getComputedStyle(a),d=dojo._getMarginExtents(a,c),f=dojo._getPadBorderExtents(a,c);return{l:dojo._toPixelValue(a,c.paddingLeft),t:dojo._toPixelValue(a,c.paddingTop),w:b.w-(d.w+f.w),h:b.h-(d.h+f.h)}};(function(){var a=function(c){return c.substring(0,1).toUpperCase()+c.substring(1)},b=function(c,d){c.resize?c.resize(d):dojo.marginBox(c.domNode,d);dojo.mixin(c,
dojo.marginBox(c.domNode));dojo.mixin(c,d)};dijit.layout.layoutChildren=function(c,d,f){d=dojo.mixin({},d);dojo.addClass(c,"dijitLayoutContainer");f=dojo.filter(f,function(e){return e.layoutAlign!="client"}).concat(dojo.filter(f,function(e){return e.layoutAlign=="client"}));dojo.forEach(f,function(e){var g=e.domNode,j=e.layoutAlign,k=g.style;k.left=d.l+"px";k.top=d.t+"px";k.bottom=k.right="auto";dojo.addClass(g,"dijitAlign"+a(j));if(j=="top"||j=="bottom"){b(e,{w:d.w});d.h-=e.h;if(j=="top")d.t+=e.h;
else k.top=d.t+d.h+"px"}else if(j=="left"||j=="right"){b(e,{h:d.h});d.w-=e.w;if(j=="left")d.l+=e.w;else k.left=d.l+d.w+"px"}else j=="client"&&b(e,d)})}})()}
if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(a,b){if(!dojo.date.stamp._isoRegExp)dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;var c=dojo.date.stamp._isoRegExp.exec(a);a=null;if(c){c.shift();c[1]&&c[1]--;if(c[6])c[6]*=1E3;if(b){b=new Date(b);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds",
"Milliseconds"],function(e){return b["get"+e]()}).forEach(function(e,g){if(c[g]===undefined)c[g]=e})}a=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0,c[6]||0);if(c[0]<100)a.setFullYear(c[0]||1970);var d=0,f=c[7]&&c[7].charAt(0);if(f!="Z"){d=(c[8]||0)*60+(Number(c[9])||0);if(f!="-")d*=-1}if(f)d-=a.getTimezoneOffset();d&&a.setTime(a.getTime()+d*6E4)}return a};dojo.date.stamp.toISOString=function(a,b){var c=function(g){return g<10?"0"+g:g};b=b||{};var d=[],f=b.zulu?"getUTC":"get",e="";if(b.selector!=
"time"){e=a[f+"FullYear"]();e=["0000".substr((e+"").length)+e,c(a[f+"Month"]()+1),c(a[f+"Date"]())].join("-")}d.push(e);if(b.selector!="date"){e=[c(a[f+"Hours"]()),c(a[f+"Minutes"]()),c(a[f+"Seconds"]())].join(":");f=a[f+"Milliseconds"]();if(b.milliseconds)e+="."+(f<100?"0":"")+c(f);if(b.zulu)e+="Z";else if(b.selector!="time"){a=a.getTimezoneOffset();b=Math.abs(a);e+=(a>0?"-":"+")+c(Math.floor(b/60))+":"+c(b%60)}d.push(e)}return d.join("T")}}
if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new (function(){function a(e){if(d.isString(e))return"string";if(typeof e=="number")return"number";if(typeof e=="boolean")return"boolean";if(d.isFunction(e))return"function";if(d.isArray(e))return"array";if(e instanceof Date)return"date";if(e instanceof d._Url)return"url";return"object"}function b(e,g){switch(g){case "string":return e;case "number":return e.length?Number(e):NaN;case "boolean":return typeof e==
"boolean"?e:e.toLowerCase()!="false";case "function":if(d.isFunction(e)){e=e.toString();e=d.trim(e.substring(e.indexOf("{")+1,e.length-1))}try{return e.search(/[^\w\.]+/i)!=-1?new Function(e):d.getObject(e,false)}catch(j){return new Function}case "array":return e?e.split(/\s*,\s*/):[];case "date":switch(e){case "":return new Date("");case "now":return new Date;default:return d.date.stamp.fromISOString(e)}case "url":return d.baseUrl+e;default:return d.fromJson(e)}}function c(e){if(!f[e]){var g=d.getObject(e);
if(!d.isFunction(g))throw new Error("Could not load class '"+e+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?");var j=g.prototype,k={},i={};for(var l in j)if(l.charAt(0)!="_")if(!(l in i)){var m=j[l];k[l]=a(m)}f[e]={cls:g,params:k}}return f[e]}var d=dojo;this._attrName=d._scopeName+"Type";this._query="["+this._attrName+"]";var f={};dojo.connect(dojo,"extend",function(){f={}});this._functionFromScript=function(e){var g="",j="",k=e.getAttribute("args");k&&d.forEach(k.split(/\s*,\s*/),
function(i,l){g+="var "+i+" = arguments["+l+"]; "});(k=e.getAttribute("with"))&&k.length&&d.forEach(k.split(/\s*,\s*/),function(i){g+="with("+i+"){";j+="}"});return new Function(g+e.innerHTML+j)};this.instantiate=function(e,g,j){var k=[],i=dojo.parser;g=g||{};j=j||{};d.forEach(e,function(l){if(l){var m=i._attrName in g?g[i._attrName]:l.getAttribute(i._attrName);if(m&&m.length){var n=c(m),o=n.cls;m=o._noScript||o.prototype._noScript;var p={},r=l.attributes;for(var q in n.params){var s=q in g?{value:g[q],
specified:true}:r.getNamedItem(q);if(!(!s||!s.specified&&(!dojo.isIE||q.toLowerCase()!="value"))){s=s.value;switch(q){case "class":s="className"in g?g.className:l.className;break;case "style":s="style"in g?g.style:l.style&&l.style.cssText}var u=n.params[q];p[q]=typeof s=="string"?b(s,u):s}}if(!m){var z=[],B=[];d.query("> script[type^='dojo/']",l).orphan().forEach(function(t){var v=t.getAttribute("event"),C=t.getAttribute("type");t=d.parser._functionFromScript(t);if(v)if(C=="dojo/connect")z.push({event:v,
func:t});else p[v]=t;else B.push(t)})}var A=(q=o.markupFactory||o.prototype&&o.prototype.markupFactory)?q(p,l,o):new o(p,l);k.push(A);(l=l.getAttribute("jsId"))&&d.setObject(l,A);if(!m){d.forEach(z,function(t){d.connect(A,t.event,null,t.func)});d.forEach(B,function(t){t.call(A)})}}}});g._started||d.forEach(k,function(l){if(!j.noStart&&l&&l.startup&&!l._started&&(!l.getParent||!l.getParent()))l.startup()});return k};this.parse=function(e,g){if(!g&&e&&e.rootNode){g=e;e=g.rootNode}else e=e;e=d.query(this._query,
e);return this.instantiate(e,null,g)}});(function(){var a=function(){dojo.config.parseOnLoad&&dojo.parser.parse()};dojo.exists("dijit.wai.onload")&&dijit.wai.onload===dojo._loaders[0]?dojo._loaders.splice(1,0,a):dojo._loaders.unshift(a)})()}
if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(a,b){if(b<=0||!a)return"";for(var c=[];;){b&1&&c.push(a);if(!(b>>=1))break;a+=a}return c.join("")};dojo.string.pad=function(a,b,c,d){c||(c="0");a=String(a);b=dojo.string.rep(c,Math.ceil((b-a.length)/c.length));return d?a+b:b+a};dojo.string.substitute=function(a,b,c,d){d=d||dojo.global;c=c?dojo.hitch(d,c):function(f){return f};return a.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,
function(f,e,g){f=dojo.getObject(e,false,b);if(g)f=dojo.getObject(g,false,d).call(d,f,e);return c(f,e).toString()})};dojo.string.trim=String.prototype.trim?dojo.trim:function(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;b>=0;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a}}
if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");(function(){var a=0,b=dojo;dojo.html._secureForInnerHtml=function(c){return c.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(c,d){b.empty(c);if(d){if(typeof d=="string")d=b._toDom(d,c.ownerDocument);if(!d.nodeType&&b.isArrayLike(d))for(var f=d.length,e=0;e<d.length;e=f==d.length?e+1:0)b.place(d[e],c,"last");else b.place(d,
c,"last")}return c};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(c,d){dojo.mixin(this,c||{});d=this.node=dojo.byId(this.node||d);if(!this.id)this.id=["Setter",d?d.id||d.tagName:"",a++].join("_")},set:function(c,d){if(undefined!==c)this.content=c;d&&this._mixin(d);this.onBegin();this.setContent();this.onEnd();return this.node},setContent:function(){var c=this.node;c||console.error("setContent given no node");
try{c=dojo.html._setNodeContent(c,this.content)}catch(d){var f=this.onContentError(d);try{c.innerHTML=f}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e)}}this.node=c},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(c){c.destroy&&c.destroy()});delete this.parseResults}dojo.html._emptyNode(this.node)},onBegin:function(){var c=this.content;if(dojo.isString(c)){if(this.cleanContent)c=
dojo.html._secureForInnerHtml(c);if(this.extractContent){var d=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(d)c=d[1]}}this.empty();this.content=c;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.node;delete this.content},onContentError:function(c){return"Error occured setting content: "+c},_mixin:function(c){var d={},f;for(f in c)f in d||(this[f]=c[f])},_parse:function(){var c=this.node;try{this.parseResults=
dojo.parser.parse(c,true)}catch(d){this._onError("Content",d,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(c,d,f){c=this["on"+c+"Error"].call(this,d);if(f)console.error(f,d);else c&&dojo.html._setNodeContent(this.node,c,true)}});dojo.html.set=function(c,d,f){if(undefined==d){console.warn("dojo.html.set: no cont argument provided, using empty string");d=""}if(f){c=new dojo.html._ContentSetter(dojo.mixin(f,{content:d,node:c}));return c.set()}else return dojo.html._setNodeContent(c,
d,true)}})()}
if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(a,b,c){c=dojo.i18n.normalizeLocale(c);var d=c.split("-"),f=[a,"nls",b].join(".");if(f=dojo._loadedModules[f]){for(var e,g=d.length;g>0;g--){var j=d.slice(0,g).join("_");if(f[j]){e=f[j];break}}if(!e)e=f.ROOT;if(e){a=function(){};a.prototype=e;return new a}}throw new Error("Bundle not found: "+b+" in "+a+" , locale="+c);};dojo.i18n.normalizeLocale=function(a){a=a?a.toLowerCase():
dojo.locale;if(a=="root")a="ROOT";return a};dojo.i18n._requireLocalization=function(a,b,c,d){c=dojo.i18n.normalizeLocale(c);var f=[a,"nls",b].join("."),e="";if(d){for(var g=d.split(","),j=0;j<g.length;j++)if(c.indexOf(g[j])==0)if(g[j].length>e.length)e=g[j];e||(e="ROOT")}g=d?e:c;var k=dojo._loadedModules[f];j=null;if(k){if(dojo.config.localizationComplete&&k._built)return;j=g.replace(/-/g,"_");j=f+"."+j;j=dojo._loadedModules[j]}if(!j){k=dojo.provide(f);a=dojo._getModuleSymbols(a);var i=a.concat("nls").join("/"),
l;dojo.i18n._searchLocalePath(g,d,function(m){var n=m.replace(/-/g,"_"),o=f+"."+n,p=false;if(dojo._loadedModules[o])p=true;else{dojo.provide(o);o=[i];m!="ROOT"&&o.push(m);o.push(b);m=o.join("/")+".js";p=dojo._loadPath(m,null,function(r){var q=function(){};q.prototype=l;k[n]=new q;for(var s in r)k[n][s]=r[s]})}if(p&&k[n])l=k[n];else k[n]=l;if(d)return true})}if(d&&c!=e)k[c.replace(/-/g,"_")]=k[e.replace(/-/g,"_")]};(function(){var a=dojo.config.extraLocale;if(a){if(!a instanceof Array)a=[a];var b=
dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(c,d,f,e){b(c,d,f,e);if(!f)for(f=0;f<a.length;f++)b(c,d,a[f],e)}}})();dojo.i18n._searchLocalePath=function(a,b,c){a=dojo.i18n.normalizeLocale(a);var d=a.split("-");a=[];for(var f=d.length;f>0;f--)a.push(d.slice(0,f).join("-"));a.push(false);b&&a.reverse();for(b=a.length-1;b>=0;b--){d=a[b]||"ROOT";if(d=c(d))break}};dojo.i18n._preloadLocalizations=function(a,b){function c(e){e=dojo.i18n.normalizeLocale(e);dojo.i18n._searchLocalePath(e,
true,function(g){for(var j=0;j<b.length;j++)if(b[j]==g){dojo.require(a+"_"+g);return true}return false})}c();for(var d=dojo.config.extraLocale||[],f=0;f<d.length;f++)c(d[f])}}
if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",doLayout:true,
ioArgs:{},isContainer:true,isLayoutContainer:true,onLoadDeferred:null,postMixInProperties:function(){this.inherited(arguments);var a=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);if(!this.href&&this.srcNodeRef&&this.srcNodeRef.innerHTML)this.isLoaded=true},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},
postCreate:function(){this.domNode.title="";dojo.attr(this.domNode,"role")||dijit.setWaiRole(this.domNode,"group");dojo.addClass(this.domNode,this.baseClass)},startup:function(){if(!this._started){var a=dijit._Contained.prototype.getParent.call(this);this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.isLoaded&&dojo.forEach(this.getChildren(),function(b){b.startup()});if(this._isShown()||this.preload)this._onShow();this.inherited(arguments)}},_checkIfSingleChild:function(){var a=
dojo.query("> *",this.containerNode).filter(function(d){return d.tagName!=="SCRIPT"}),b=a.filter(function(d){return dojo.hasAttr(d,"dojoType")||dojo.hasAttr(d,"widgetId")}),c=dojo.filter(b.map(dijit.byNode),function(d){return d&&d.domNode&&d.resize});if(a.length==b.length&&c.length==1)this._singleChild=c[0];else delete this._singleChild;dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},setHref:function(a){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use attr('href', ...) instead.",
"","2.0");return this.attr("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.href=a;if(this._created&&(this.preload||this._isShown()))this._load();else this._hrefChanged=true;return this.onLoadDeferred},setContent:function(a){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use attr('content', ...) instead.","","2.0");this.attr("content",a)},_setContentAttr:function(a){this.href="";this.cancel();this.onLoadDeferred=
new dojo.Deferred(dojo.hitch(this,"cancel"));this._setContent(a||"");this._isDownloaded=false;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&this._xhrDfd.fired==-1&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},uninitialize:function(){this._beingDestroyed&&this.cancel();this.inherited(arguments)},destroyRecursive:function(){this._beingDestroyed||this.inherited(arguments)},resize:function(a,b){this._wasShown||
this._onShow();this._resizeCalled=true;a&&dojo.marginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){b=b||{};dojo.mixin(b,a||{});if(!("h"in b)||!("w"in b))b=dojo.mixin(dojo.marginBox(c),b);this._contentBox=dijit.layout.marginBox2contentBox(c,b)}else this._contentBox=dojo.contentBox(c);this._layoutChildren()},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open"in this)return this.open;return this._resizeCalled}else if("open"in this)return this.open;else{var a=
this.domNode;return a.style.display!="none"&&a.style.visibility!="hidden"&&!dojo.hasClass(a,"dijitHidden")}},_onShow:function(){if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))this.refresh()}else!this._childOfLayoutWidget&&this._needLayout&&this._layoutChildren();this.inherited(arguments);this._wasShown=true},refresh:function(){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),
true);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};dojo.isObject(this.ioArgs)&&dojo.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||dojo.xhrGet)(b);c.addCallback(function(d){try{a._isDownloaded=true;a._setContent(d,false);a.onDownloadEnd()}catch(f){a._onError("Content",f)}delete a._xhrDfd;return d});c.addErrback(function(d){c.canceled||a._onError("Download",d);delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this.isLoaded=
true;try{this.onLoadDeferred.callback(a);this.onLoad(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this.isLoaded=false;try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(){this.isLoaded&&this._onUnloadHandler();var a=this._contentSetter;dojo.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive()});if(a){dojo.forEach(a.parseResults,
function(b){b.destroyRecursive&&b.domNode&&b.domNode.parentNode==dojo.body()&&b.destroyRecursive()});delete a.parseResults}dojo.html._emptyNode(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;if(!(c&&c instanceof dojo.html._ContentSetter))c=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(f){f=this.onContentError(f);try{this.containerNode.innerHTML=
f}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e)}})});var d=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad},this._contentSetterParams||{});dojo.mixin(c,d);c.set(dojo.isObject(a)&&a.domNode?a.domNode:a);delete this._contentSetterParams;if(!b){dojo.forEach(this.getChildren(),function(f){if(!this.parseOnLoad||f.getParent)f.startup()},this);this._scheduleLayout();this._onLoadHandler(a)}},_onError:function(a,
b,c){this.onLoadDeferred.errback(b);a=this["on"+a+"Error"].call(this,b);if(c)console.error(c,b);else a&&this._setContent(a,true)},_scheduleLayout:function(){if(this._isShown())this._layoutChildren();else this._needLayout=true},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else dojo.forEach(this.getChildren(),function(b){b.resize&&
b.resize()});delete this._needLayout},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})}
if(!dojo._hasResource["lib.dijit.TabPane"]){dojo._hasResource["lib.dijit.TabPane"]=true;(function(a){a=dojo.provide("lib.dijit.TabPane");dojo.declare("lib.dijit.TabPane",dijit.layout.ContentPane,{closable:true,onClose:function(){var b=this.getParent().getChildren().length;return b==1?false:true},postCreate:function(){}})})()}
if(!dojo._hasResource["lib.dijit.DataTable"]){dojo._hasResource["lib.dijit.DataTable"]=true;(function(a){a=dojo.provide("lib.dijit.DataTable");dojo.declare("lib.dijit.DataTable",dijit._Widget,{dataSource:[],rowSize:2,postCreate:function(){var b=this.domNode,c=dojo.doc.createElement("table");dojo.addClass(c,"form");b.appendChild(c);var d=dojo.doc.createElement("tbody");c.appendChild(d);var f=0,e=dojo.doc.createElement("tr"),g=this;dojo.forEach(this.dataSource,function(j){var k=dojo.doc.createElement("th"),
i=dojo.doc.createElement("td");k.innerHTML=j.key;i.innerHTML=j.value;e.appendChild(k);e.appendChild(i);if(++f%g.rowSize===0){d.appendChild(e);e=dojo.doc.createElement("tr")}});f%this.rowSize!==0&&d.appendChild(e)}})})()}
if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var a;do a=dojo._scopeName+"Unique"+ ++dojo.dnd._uniqueId;while(dojo.byId(a));return a};dojo.dnd._empty={};dojo.dnd.isFormElement=function(a){a=a.target;if(a.nodeType==3)a=a.parentNode;return" button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")>=0}}
if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.dnd.getViewport=function(){var a=dojo.doc;a=a.documentElement;var b=window,c=dojo.body();if(dojo.isMozilla)return{w:a.clientWidth,h:b.innerHeight};else if(!dojo.isOpera&&b.innerWidth)return{w:b.innerWidth,h:b.innerHeight};else if(!dojo.isOpera&&a&&a.clientWidth)return{w:a.clientWidth,h:a.clientHeight};else if(c.clientWidth)return{w:c.clientWidth,h:c.clientHeight};return null};
dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(a){var b=dojo.dnd.getViewport(),c=0,d=0;if(a.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL)c=-dojo.dnd.H_AUTOSCROLL_VALUE;else if(a.clientX>b.w-dojo.dnd.H_TRIGGER_AUTOSCROLL)c=dojo.dnd.H_AUTOSCROLL_VALUE;if(a.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL)d=-dojo.dnd.V_AUTOSCROLL_VALUE;else if(a.clientY>b.h-dojo.dnd.V_TRIGGER_AUTOSCROLL)d=dojo.dnd.V_AUTOSCROLL_VALUE;
window.scrollBy(c,d)};dojo.dnd._validNodes={div:1,p:1,td:1};dojo.dnd._validOverflow={auto:1,scroll:1};dojo.dnd.autoScrollNodes=function(a){for(var b=a.target;b;){if(b.nodeType==1&&b.tagName.toLowerCase()in dojo.dnd._validNodes){var c=dojo.getComputedStyle(b);if(c.overflow.toLowerCase()in dojo.dnd._validOverflow){var d=dojo._getContentBox(b,c);c=dojo.position(b,true);var f=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,d.w/2),e=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,d.h/2),g=a.pageX-c.x,j=a.pageY-c.y,k=c=
0;if(dojo.isWebKit||dojo.isOpera){g+=dojo.body().scrollLeft;j+=dojo.body().scrollTop}if(g>0&&g<d.w)if(g<f)c=-f;else if(g>d.w-f)c=f;if(j>0&&j<d.h)if(j<e)k=-e;else if(j>d.h-e)k=e;d=b.scrollLeft;f=b.scrollTop;b.scrollLeft+=c;b.scrollTop+=k;if(d!=b.scrollLeft||f!=b.scrollTop)return}}try{b=b.parentNode}catch(i){b=null}}dojo.dnd.autoScroll(a)}}
if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(a,b,c){this.node=dojo.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=c;a=a.ownerDocument;c=dojo.connect(a,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(a,"onmousemove",this,"onMouseMove"),dojo.connect(a,"onmouseup",this,"onMouseUp"),dojo.connect(a,"ondragstart",dojo.stopEvent),dojo.connect(a.body,
"onselectstart",dojo.stopEvent),c];b&&b.onMoveStart&&b.onMoveStart(this)},onMouseMove:function(a){dojo.dnd.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY});dojo.stopEvent(a)},onMouseUp:function(a){if(dojo.isWebKit&&dojo.isMac&&this.mouseButton==2?a.button==0:this.mouseButton==a.button)this.destroy();dojo.stopEvent(a)},onFirstMove:function(){var a=this.node.style,b,c=this.host;switch(a.position){case "relative":case "absolute":b=Math.round(parseFloat(a.left));
a=Math.round(parseFloat(a.top));break;default:a.position="absolute";a=dojo.marginBox(this.node);b=dojo.doc.body;var d=dojo.getComputedStyle(b),f=dojo._getMarginBox(b,d);d=dojo._getContentBox(b,d);b=a.l-(d.l-f.l);a=a.t-(d.t-f.t);break}this.marginBox.l=b-this.marginBox.l;this.marginBox.t=a-this.marginBox.t;c&&c.onFirstMove&&c.onFirstMove(this);dojo.disconnect(this.events.pop())},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var a=this.host;a&&a.onMoveStop&&a.onMoveStop(this);this.events=
this.node=this.host=null}})}
if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(a,b){this.node=dojo.byId(a);b||(b={});this.handle=b.handle?dojo.byId(b.handle):null;if(!this.handle)this.handle=this.node;this.delay=b.delay>0?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,
"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(a,b){return new dojo.dnd.Moveable(b,a)},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null},onMouseDown:function(a){if(!(this.skip&&dojo.dnd.isFormElement(a))){if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=a.pageX;this._lastY=
a.pageY}else this.onDragDetected(a);dojo.stopEvent(a)}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay){this.onMouseUp(a);this.onDragDetected(a)}dojo.stopEvent(a)},onMouseUp:function(a){for(var b=0;b<2;++b)dojo.disconnect(this.events.pop());dojo.stopEvent(a)},onSelectStart:function(a){if(!this.skip||!dojo.dnd.isFormElement(a))dojo.stopEvent(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){dojo.publish("/dnd/move/start",
[a]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem")},onMoveStop:function(a){dojo.publish("/dnd/move/stop",[a]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})}
if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(a,b){return new dojo.dnd.move.constrainedMoveable(b,a)},constructor:function(a,b){b||(b={});this.constraints=b.constraints;this.within=b.within},onFirstMove:function(a){var b=this.constraintBox=this.constraints.call(this,a);b.r=b.l+b.w;b.b=b.t+b.h;if(this.within){a=
dojo.marginBox(a.node);b.r-=a.w;b.b-=a.h}},onMove:function(a,b){var c=this.constraintBox;a=a.node.style;a.left=(b.l<c.l?c.l:c.r<b.l?c.r:b.l)+"px";a.top=(b.t<c.t?c.t:c.b<b.t?c.b:b.t)+"px"}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(a,b){return new dojo.dnd.move.boxConstrainedMoveable(b,a)},constructor:function(a,b){var c=b&&b.box;this.constraints=function(){return c}}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",
dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(a,b){return new dojo.dnd.move.parentConstrainedMoveable(b,a)},constructor:function(a,b){var c=b&&b.area;this.constraints=function(){var d=this.node.parentNode,f=dojo.getComputedStyle(d),e=dojo._getMarginBox(d,f);if(c=="margin")return e;var g=dojo._getMarginExtents(d,f);e.l+=g.l;e.t+=g.t;e.w-=g.w;e.h-=g.h;if(c=="border")return e;g=dojo._getBorderExtents(d,f);e.l+=g.l;e.t+=g.t;e.w-=g.w;e.h-=g.h;if(c=="padding")return e;g=dojo._getPadExtents(d,
f);e.l+=g.l;e.t+=g.t;e.w-=g.w;e.h-=g.h;return e}}});dojo.dnd.move.constrainedMover=function(a,b){dojo.deprecated("dojo.dnd.move.constrainedMover, use dojo.dnd.move.constrainedMoveable instead");var c=function(d,f,e){dojo.dnd.Mover.call(this,d,f,e)};dojo.extend(c,dojo.dnd.Mover.prototype);dojo.extend(c,{onMouseMove:function(d){dojo.dnd.autoScroll(d);var f=this.marginBox,e=this.constraintBox,g=f.l+d.pageX;d=f.t+d.pageY;g=g<e.l?e.l:e.r<g?e.r:g;d=d<e.t?e.t:e.b<d?e.b:d;this.host.onMove(this,{l:g,t:d})},
onFirstMove:function(){dojo.dnd.Mover.prototype.onFirstMove.call(this);var d=this.constraintBox=a.call(this);d.r=d.l+d.w;d.b=d.t+d.h;if(b){var f=dojo.marginBox(this.node);d.r-=f.w;d.b-=f.h}}});return c};dojo.dnd.move.boxConstrainedMover=function(a,b){dojo.deprecated("dojo.dnd.move.boxConstrainedMover, use dojo.dnd.move.boxConstrainedMoveable instead");return dojo.dnd.move.constrainedMover(function(){return a},b)};dojo.dnd.move.parentConstrainedMover=function(a,b){dojo.deprecated("dojo.dnd.move.parentConstrainedMover, use dojo.dnd.move.parentConstrainedMoveable instead");
var c=function(){var d=this.node.parentNode,f=dojo.getComputedStyle(d),e=dojo._getMarginBox(d,f);if(a=="margin")return e;var g=dojo._getMarginExtents(d,f);e.l+=g.l;e.t+=g.t;e.w-=g.w;e.h-=g.h;if(a=="border")return e;g=dojo._getBorderExtents(d,f);e.l+=g.l;e.t+=g.t;e.w-=g.w;e.h-=g.h;if(a=="padding")return e;g=dojo._getPadExtents(d,f);e.l+=g.l;e.t+=g.t;e.w-=g.w;e.h-=g.h;return e};return dojo.dnd.move.constrainedMover(c,b)};dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=
dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover}
if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var a=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(b,c){c||(c={});if(c.timeout&&typeof c.timeout=="number"&&c.timeout>=0)this.timeout=c.timeout},markupFactory:function(b,c){return new dojo.dnd.TimedMoveable(c,b)},onMoveStop:function(b){if(b._timer){clearTimeout(b._timer);a.call(this,
b,b._leftTop)}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,c){b._leftTop=c;if(!b._timer){var d=this;b._timer=setTimeout(function(){b._timer=null;a.call(d,b,b._leftTop)},this.timeout)}}})})()}
if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(a){var b=this;dojo.mixin(b,a);b.node=a.node;b._showArgs=dojo.mixin({},a);b._showArgs.node=b.node;b._showArgs.duration=b.showDuration;b.showAnim=b.showFunc(b._showArgs);b._hideArgs=dojo.mixin({},a);b._hideArgs.node=b.node;b._hideArgs.duration=
b.hideDuration;b.hideAnim=b.hideFunc(b._hideArgs);dojo.connect(b.showAnim,"beforeBegin",dojo.hitch(b.hideAnim,"stop",true));dojo.connect(b.hideAnim,"beforeBegin",dojo.hitch(b.showAnim,"stop",true))},show:function(a){return this.showAnim.play(a||0)},hide:function(a){return this.hideAnim.play(a||0)}})}
if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var a=dojo,b={_fire:function(f,e){if(this[f])this[f].apply(this,e||[]);return this}},c=function(f){this._index=-1;this._animations=f||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;a.forEach(this._animations,function(e){this.duration+=e.duration;if(e.delay)this.duration+=e.delay},this)};a.extend(c,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){a.disconnect(this._onAnimateCtx);
a.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length)this._fire("onEnd");else{this._current=this._animations[++this._index];this._onAnimateCtx=a.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=a.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true)}},play:function(f,e){if(!this._current)this._current=this._animations[this._index=0];if(!e&&this._current.status()=="playing")return this;var g=a.connect(this._current,
"beforeBegin",this,function(){this._fire("beforeBegin")}),j=a.connect(this._current,"onBegin",this,function(){this._fire("onBegin",arguments)}),k=a.connect(this._current,"onPlay",this,function(){this._fire("onPlay",arguments);a.disconnect(g);a.disconnect(j);a.disconnect(k)});this._onAnimateCtx&&a.disconnect(this._onAnimateCtx);this._onAnimateCtx=a.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx&&a.disconnect(this._onEndCtx);this._onEndCtx=a.connect(this._current,"onEnd",this,"_onEnd");
this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var f=a.connect(this._current,"onPause",this,function(){this._fire("onPause",arguments);a.disconnect(f)});this._current.pause()}return this},gotoPercent:function(f,e){this.pause();var g=this.duration*f;this._current=null;a.some(this._animations,function(j){if(j.duration<=g){this._current=j;return true}g-=j.duration;return false});this._current&&this._current.gotoPercent(g/this._current.duration,e);return this},
stop:function(f){if(this._current){if(f){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(true);this._current=this._animations[this._index]}var e=a.connect(this._current,"onStop",this,function(){this._fire("onStop",arguments);a.disconnect(e)});this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&a.disconnect(this._onAnimateCtx);this._onEndCtx&&a.disconnect(this._onEndCtx)}});
a.extend(c,b);dojo.fx.chain=function(f){return new c(f)};var d=function(f){this._animations=f||[];this._connects=[];this.duration=this._finished=0;a.forEach(f,function(g){var j=g.duration;if(g.delay)j+=g.delay;if(this.duration<j)this.duration=j;this._connects.push(a.connect(g,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new a.Animation({curve:[0,1],duration:this.duration});var e=this;a.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(g){e._connects.push(a.connect(e._pseudoAnimation,
g,function(){e._fire(g,arguments)}))})};a.extend(d,{_doAction:function(f,e){a.forEach(this._animations,function(g){g[f].apply(g,e)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(f,e){var g=this._pseudoAnimation;g[f].apply(g,e)},play:function(){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(f,
e){var g=this.duration*f;a.forEach(this._animations,function(j){j.gotoPercent(j.duration<g?1:g/j.duration,e)});this._call("gotoPercent",arguments);return this},stop:function(){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){a.forEach(this._connects,dojo.disconnect)}});a.extend(d,b);dojo.fx.combine=function(f){return new d(f)};dojo.fx.wipeIn=function(f){var e=f.node=a.byId(f.node),g=e.style,j;f=a.animateProperty(a.mixin({properties:{height:{start:function(){j=
g.overflow;g.overflow="hidden";if(g.visibility=="hidden"||g.display=="none"){g.height="1px";g.display="";g.visibility="";return 1}else{var k=a.style(e,"height");return Math.max(k,1)}},end:function(){return e.scrollHeight}}}},f));a.connect(f,"onEnd",function(){g.height="auto";g.overflow=j});return f};dojo.fx.wipeOut=function(f){var e=f.node=a.byId(f.node),g=e.style,j;f=a.animateProperty(a.mixin({properties:{height:{end:1}}},f));a.connect(f,"beforeBegin",function(){j=g.overflow;g.overflow="hidden";
g.display=""});a.connect(f,"onEnd",function(){g.overflow=j;g.height="auto";g.display="none"});return f};dojo.fx.slideTo=function(f){var e=f.node=a.byId(f.node),g=null,j=null;e=function(k){return function(){var i=a.getComputedStyle(k),l=i.position;g=l=="absolute"?k.offsetTop:parseInt(i.top)||0;j=l=="absolute"?k.offsetLeft:parseInt(i.left)||0;if(l!="absolute"&&l!="relative"){i=a.position(k,true);g=i.y;j=i.x;k.style.position="absolute";k.style.top=g+"px";k.style.left=j+"px"}}}(e);e();f=a.animateProperty(a.mixin({properties:{top:f.top||
0,left:f.left||0}},f));a.connect(f,"beforeBegin",f,e);return f}})()}
if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");(function(){var a={};dojo.cache=function(b,c,d){if(typeof b=="string")b=dojo.moduleUrl(b,c);else{b=b;d=c}c=b.toString();b=d;if(d!==undefined&&!dojo.isString(d))b="value"in d?d.value:undefined;d=d&&d.sanitize?true:false;if(b||b===null)if(b==null)delete a[c];else b=a[c]=d?dojo.cache._sanitize(b):b;else{if(!(c in a)){b=dojo._getText(c);a[c]=d?dojo.cache._sanitize(b):b}b=a[c]}return b};dojo.cache._sanitize=
function(b){if(b){b=b.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var c=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(c)b=c[1]}else b="";return b}})()}
if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,_stringRepl:function(a){var b=this.declaredClass,c=this;return dojo.string.substitute(a,this,function(d,f){if(f.charAt(0)=="!")d=dojo.getObject(f.substr(1),false,c);if(typeof d=="undefined")throw new Error(b+" template:"+f);if(d==null)return"";
return f.charAt(0)=="!"?d:d.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){this._attachPoints=[];var a=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache),b;if(dojo.isString(a)){b=dojo._toDom(this._stringRepl(a));if(b.nodeType!=1)throw new Error("Invalid template: "+a);}else b=a.cloneNode(true);this.domNode=b;this._attachTemplateNodes(b);if(this.widgetsInTemplate){a=dojo.parser;var c,d;if(a._query!="[dojoType]"){c=a._query;d=a._attrName;
a._query="[dojoType]";a._attrName="dojoType"}var f=this._startupWidgets=dojo.parser.parse(b,{noStart:!this._earlyTemplatedStartup});if(c){a._query=c;a._attrName=d}this._supportingWidgets=dijit.findWidgets(b);this._attachTemplateNodes(f,function(e,g){return e[g]})}this._fillContent(this.srcNodeRef)},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},_attachTemplateNodes:function(a,b){b=b||function(i,l){return i.getAttribute(l)};for(var c=
dojo.isArray(a)?a:a.all||a.getElementsByTagName("*"),d=dojo.isArray(a)?0:-1;d<c.length;d++){var f=d==-1?a:c[d];if(!(this.widgetsInTemplate&&b(f,"dojoType"))){var e=b(f,"dojoAttachPoint");if(e)for(var g=e.split(/\s*,\s*/);e=g.shift();){if(dojo.isArray(this[e]))this[e].push(f);else this[e]=f;this._attachPoints.push(e)}if(e=b(f,"dojoAttachEvent")){g=e.split(/\s*,\s*/);for(var j=dojo.trim;e=g.shift();)if(e){var k=null;if(e.indexOf(":")!=-1){k=e.split(":");e=j(k[0]);k=j(k[1])}else e=j(e);k||(k=e);this.connect(f,
e,k)}}(e=b(f,"waiRole"))&&dijit.setWaiRole(f,e);(e=b(f,"waiState"))&&dojo.forEach(e.split(/\s*,\s*/),function(i){if(i.indexOf("-")!=-1){i=i.split("-");dijit.setWaiState(f,i[0],i[1])}})}}},startup:function(){dojo.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()});this.inherited(arguments)},destroyRendering:function(){dojo.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];this.inherited(arguments)}});dijit._Templated._templateCache={};
dijit._Templated.getCachedTemplate=function(a,b,c){var d=dijit._Templated._templateCache,f=b||a,e=d[f];if(e){try{if(!e.ownerDocument||e.ownerDocument==dojo.doc)return e}catch(g){}dojo.destroy(e)}b||(b=dojo.cache(a,{sanitize:true}));b=dojo.string.trim(b);if(c||b.match(/\$\{([^\}]+)\}/g))return d[f]=b;else{a=dojo._toDom(b);if(a.nodeType!=1)throw new Error("Invalid template: "+b);return d[f]=a}};dojo.isIE&&dojo.addOnWindowUnload(function(){var a=dijit._Templated._templateCache;for(var b in a){var c=
a[b];typeof c=="object"&&dojo.destroy(c);delete a[b]}});dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""})}
if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{reset:function(){dojo.forEach(this.getDescendants(),function(a){a.reset&&a.reset()})},validate:function(){var a=false;return dojo.every(dojo.map(this.getDescendants(),function(b){b._hasBeenBlurred=true;var c=b.disabled||!b.validate||b.validate();if(!c&&!a){dijit.scrollIntoView(b.containerNode||b.domNode);b.focus();a=true}return c}),
function(b){return b})},setValues:function(a){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use attr('value', val) instead.","","2.0");return this.attr("value",a)},_setValueAttr:function(a){var b={};dojo.forEach(this.getDescendants(),function(e){if(e.name){var g=b[e.name]||(b[e.name]=[]);g.push(e)}});for(var c in b)if(b.hasOwnProperty(c)){var d=b[c],f=dojo.getObject(c,false,a);if(f!==undefined){dojo.isArray(f)||(f=[f]);if(typeof d[0].checked=="boolean")dojo.forEach(d,function(e){e.attr("value",
dojo.indexOf(f,e.value)!=-1)});else d[0].multiple?d[0].attr("value",f):dojo.forEach(d,function(e,g){e.attr("value",f[g])})}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value")},_getValueAttr:function(){var a={};dojo.forEach(this.getDescendants(),function(b){var c=b.name;if(!(!c||b.disabled)){var d=b.attr("value");if(typeof b.checked=="boolean")if(/Radio/.test(b.declaredClass))if(d!==false)dojo.setObject(c,
d,a);else{d=dojo.getObject(c,false,a);d===undefined&&dojo.setObject(c,null,a)}else{b=dojo.getObject(c,false,a);if(!b){b=[];dojo.setObject(c,b,a)}d!==false&&b.push(d)}else{b=dojo.getObject(c,false,a);if(typeof b!="undefined")dojo.isArray(b)?b.push(d):dojo.setObject(c,[b,d],a);else dojo.setObject(c,d,a)}}});return a},isValid:function(){this._invalidWidgets=dojo.filter(this.getDescendants(),function(a){return!a.disabled&&a.isValid&&!a.isValid()});return!this._invalidWidgets.length},onValidStateChange:function(){},
_widgetChange:function(a){var b=this._lastValidState;if(!a||this._lastValidState===undefined){b=this.isValid();if(this._lastValidState===undefined)this._lastValidState=b}else if(a.isValid){this._invalidWidgets=dojo.filter(this._invalidWidgets||[],function(c){return c!=a},this);!a.isValid()&&!a.attr("disabled")&&this._invalidWidgets.push(a);b=this._invalidWidgets.length===0}if(b!==this._lastValidState){this._lastValidState=b;this.onValidStateChange(b)}},connectChildren:function(){dojo.forEach(this._changeConnections,
dojo.hitch(this,"disconnect"));var a=this,b=this._changeConnections=[];dojo.forEach(dojo.filter(this.getDescendants(),function(c){return c.validate}),function(c){b.push(a.connect(c,"validate",dojo.hitch(a,"_widgetChange",c)));b.push(a.connect(c,"_setDisabledAttr",dojo.hitch(a,"_widgetChange",c)))});this._widgetChange(null)},startup:function(){this.inherited(arguments);this._changeConnections=[];this.connectChildren()}})}
if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.attr("value"))},_getFocusItems:function(a){var b=dijit._getTabNavigable(dojo.byId(a));this._firstFocusItem=b.lowest||b.first||a;this._lastFocusItem=b.last||b.highest||
this._firstFocusItem;if(dojo.isMoz&&this._firstFocusItem.tagName.toLowerCase()=="input"&&dojo.getEffectiveAttrValue(this._firstFocusItem,"type").toLowerCase()=="file"){dojo.attr(a,"tabIndex","0");this._firstFocusItem=a}}})}
if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(a){dojo.attr(this.node,"id",a+"_underlay")},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+
a},postCreate:function(){dojo.body().appendChild(this.domNode)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=dijit.getViewport();b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new dijit.BackgroundIframe(this.domNode)},hide:function(){this.bgIframe.destroy();this.domNode.style.display="none"},uninitialize:function(){this.bgIframe&&this.bgIframe.destroy();
this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:dojo.cache("dijit","templates/TooltipDialog.html",'<div waiRole="presentation">\n\t<div class="dijitTooltipContainer" waiRole="presentation">\n\t\t<div class ="dijitTooltipContents dijitTooltipFocusNode" dojoAttachPoint="containerNode" tabindex="-1" waiRole="dialog"></div>\n\t</div>\n\t<div class="dijitTooltipConnector" waiRole="presentation"></div>\n</div>\n'),postCreate:function(){this.inherited(arguments);
this.connect(this.containerNode,"onkeypress","_onKey");this.containerNode.title=this.title},orient:function(a,b,c){(a=this._currentOrientClass)&&dojo.removeClass(this.domNode,a);a="dijitTooltipAB"+(c.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(c.charAt(0)=="T"?"Below":"Above");dojo.addClass(this.domNode,a);this._currentOrientClass=a},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);this._onShow();if(this.autofocus){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem)}},
onClose:function(){this.onHide()},_onKey:function(a){var b=a.target,c=dojo.keys;a.charOrCode===c.TAB&&this._getFocusItems(this.containerNode);var d=this._firstFocusItem==this._lastFocusItem;if(a.charOrCode==c.ESCAPE){this.onCancel();dojo.stopEvent(a)}else if(b==this._firstFocusItem&&a.shiftKey&&a.charOrCode===c.TAB){d||dijit.focus(this._lastFocusItem);dojo.stopEvent(a)}else if(b==this._lastFocusItem&&a.charOrCode===c.TAB&&!a.shiftKey){d||dijit.focus(this._firstFocusItem);dojo.stopEvent(a)}else a.charOrCode===
c.TAB&&a.stopPropagation()}})}
if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit._DialogBase",[dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{templateString:dojo.cache("dijit","templates/Dialog.html",'<div class="dijitDialog" tabindex="-1" waiRole="dialog" waiState="labelledby-${id}_title">\n\t<div dojoAttachPoint="titleBar" class="dijitDialogTitleBar">\n\t<span dojoAttachPoint="titleNode" class="dijitDialogTitle" id="${id}_title"></span>\n\t<span dojoAttachPoint="closeButtonNode" class="dijitDialogCloseIcon" dojoAttachEvent="onclick: onCancel, onmouseenter: _onCloseEnter, onmouseleave: _onCloseLeave" title="${buttonCancel}">\n\t\t<span dojoAttachPoint="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t</span>\n\t</div>\n\t\t<div dojoAttachPoint="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n'),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,
{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,"aria-describedby":"",postMixInProperties:function(){var a=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,a);this.inherited(arguments)},postCreate:function(){dojo.style(this.domNode,{display:"none",position:"absolute"});dojo.body().appendChild(this.domNode);
this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();this.inherited(arguments)},_endDrag:function(a){if(a&&a.node&&a.node===this.domNode)this._relativePosition=dojo.position(a.node)},_setup:function(){var a=this.domNode;if(this.titleBar&&this.draggable){this._moveable=dojo.isIE==6?new dojo.dnd.TimedMoveable(a,{handle:this.titleBar}):new dojo.dnd.Moveable(a,{handle:this.titleBar,timeout:0});dojo.subscribe("/dnd/move/stop",
this,"_endDrag")}else dojo.addClass(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(b){return b+"_underlay"}).join(" ")};this._fadeIn=dojo.fadeIn({node:a,duration:this.duration,beforeBegin:dojo.hitch(this,function(){var b=dijit._underlay;if(b)b.attr(this.underlayAttrs);else b=dijit._underlay=new dijit.DialogUnderlay(this.underlayAttrs);var c=948+dijit._dialogStack.length*2;dojo.style(dijit._underlay.domNode,"zIndex",c);dojo.style(this.domNode,
"zIndex",c+1);b.show()}),onEnd:dojo.hitch(this,function(){if(this.autofocus){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem)}})});this._fadeOut=dojo.fadeOut({node:a,duration:this.duration,onEnd:dojo.hitch(this,function(){a.style.display="none";var b=dijit._dialogStack;if(b.length==0)dijit._underlay.hide();else{dojo.style(dijit._underlay.domNode,"zIndex",948+b.length*2);dijit._underlay.attr(b[b.length-1].underlayAttrs)}if(this.refocus){var c=this._savedFocus;if(b.length>0){b=b[b.length-
1];if(!dojo.isDescendant(c.node,b.domNode)){b._getFocusItems(b.domNode);c=b._firstFocusItem}}dijit.focus(c)}})})},uninitialize:function(){var a=false;if(this._fadeIn&&this._fadeIn.status()=="playing"){a=true;this._fadeIn.stop()}if(this._fadeOut&&this._fadeOut.status()=="playing"){a=true;this._fadeOut.stop()}if(this.open||a)dijit._underlay.hide();this._moveable&&this._moveable.destroy();this.inherited(arguments)},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=
this._singleChildOriginalStyle;delete this._singleChildOriginalStyle}else dojo.style(this.containerNode,{width:"auto",height:"auto"});var a=dojo.marginBox(this.domNode),b=dijit.getViewport();if(a.w>=b.w||a.h>=b.h){var c=Math.min(a.w,Math.floor(b.w*0.75));a=Math.min(a.h,Math.floor(b.h*0.75));if(this._singleChild&&this._singleChild.resize){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:c,h:a})}else dojo.style(this.containerNode,{width:c+"px",height:a+
"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var a=this.domNode,b=dijit.getViewport(),c=this._relativePosition,d=c?null:dojo._getBorderBox(a),f=Math.floor(b.l+(c?c.x:(b.w-d.w)/2));b=Math.floor(b.t+(c?c.y:(b.h-d.h)/2));dojo.style(a,{left:f+"px",top:b+"px"})}},_onKey:function(a){var b=dijit._dialogStack;if(b[b.length-1]==this)if(a.charOrCode){b=dojo.keys;var c=
a.target;a.charOrCode===b.TAB&&this._getFocusItems(this.domNode);var d=this._firstFocusItem==this._lastFocusItem;if(c==this._firstFocusItem&&a.shiftKey&&a.charOrCode===b.TAB){d||dijit.focus(this._lastFocusItem);dojo.stopEvent(a)}else if(c==this._lastFocusItem&&a.charOrCode===b.TAB&&!a.shiftKey){d||dijit.focus(this._firstFocusItem);dojo.stopEvent(a)}else{for(;c;){if(c==this.domNode||dojo.hasClass(c,"dijitPopup"))if(a.charOrCode==b.ESCAPE)this.onCancel();else return;c=c.parentNode}if(a.charOrCode!==
b.TAB)dojo.stopEvent(a);else if(!dojo.isOpera)try{this._firstFocusItem.focus()}catch(f){}}}},show:function(){if(!this.open){if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true}this._fadeOut.status()=="playing"&&this._fadeOut.stop();this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var a=dijit.getViewport();if(!this._oldViewport||a.h!=this._oldViewport.h||a.w!=this._oldViewport.w){this.layout();
this._oldViewport=a}}));this._modalconnects.push(dojo.connect(dojo.doc.documentElement,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,display:""});this.open=true;this._onShow();this._size();this._position();dijit._dialogStack.push(this);this._fadeIn.play();this._savedFocus=dijit.getFocus(this)}},hide:function(){var a=dijit._dialogStack;if(!(!this._alreadyInitialized||this!=a[a.length-1])){this._fadeIn.status()=="playing"&&this._fadeIn.stop();a.pop();this._fadeOut.play();if(this._scrollConnected)this._scrollConnected=
false;dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];this._relativePosition&&delete this._relativePosition;this.open=false;this.onHide()}},layout:function(){if(this.domNode.style.display!="none"){dijit._underlay&&dijit._underlay.layout();this._position()}},destroy:function(){dojo.forEach(this._modalconnects,dojo.disconnect);this.refocus&&this.open&&setTimeout(dojo.hitch(dijit,"focus",this._savedFocus),25);this.inherited(arguments)},_onCloseEnter:function(){dojo.addClass(this.closeButtonNode,
"dijitDialogCloseIcon-hover")},_onCloseLeave:function(){dojo.removeClass(this.closeButtonNode,"dijitDialogCloseIcon-hover")}});dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._DialogBase],{});dijit._dialogStack=[]}
if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",disabled:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),
postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"";this.inherited(arguments)},_setDisabledAttr:function(a){this.disabled=a;dojo.attr(this.focusNode,"disabled",a);dijit.setWaiState(this.focusNode,"disabled",a);if(a){this._active=this._hovering=false;this.focusNode.removeAttribute("tabIndex")}else this.focusNode.setAttribute("tabIndex",this.tabIndex);this._setStateClass()},setDisabled:function(a){dojo.deprecated("setDisabled("+a+") is deprecated. Use attr('disabled',"+
a+") instead.","","2.0");this.attr("disabled",a)},_onFocus:function(){this.scrollOnFocus&&dijit.scrollIntoView(this.domNode);this.inherited(arguments)},_onMouse:function(a){var b=a.currentTarget;if(b&&b.getAttribute)this.stateModifier=b.getAttribute("stateModifier")||"";if(!this.disabled){switch(a.type){case "mouseenter":case "mouseover":this._hovering=true;this._active=this._mouseDown;break;case "mouseout":case "mouseleave":this._active=this._hovering=false;break;case "mousedown":this._mouseDown=
this._active=true;var c=this.connect(dojo.body(),"onmouseup",function(){this._mouseDown&&this.isFocusable()&&this.focus();this._mouseDown=this._active=false;this._setStateClass();this.disconnect(c)});break}this._setStateClass()}},isFocusable:function(){return!this.disabled&&!this.readOnly&&this.focusNode&&dojo.style(this.domNode,"display")!="none"},focus:function(){dijit.focus(this.focusNode)},_setStateClass:function(){function a(g){b=b.concat(dojo.map(b,function(j){return j+g}),"dijit"+g)}var b=
this.baseClass.split(" ");this.checked&&a("Checked");this.state&&a(this.state);this.selected&&a("Selected");if(this.disabled)a("Disabled");else if(this.readOnly)a("ReadOnly");else if(this._active)a(this.stateModifier+"Active");else{this._focused&&a("Focused");this._hovering&&a(this.stateModifier+"Hover")}var c=this.stateNode||this.domNode,d={};dojo.forEach(c.className.split(" "),function(g){d[g]=true});"_stateClasses"in this&&dojo.forEach(this._stateClasses,function(g){delete d[g]});dojo.forEach(b,
function(g){d[g]=true});var f=[];for(var e in d)f.push(e);c.className=f.join(" ");this._stateClasses=b},compare:function(a,b){return typeof a=="number"&&typeof b=="number"?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:false,_handleOnChange:function(a,b){this._lastValue=a;if(this._lastValueReported==undefined&&(b===null||!this._onChangeActive))this._resetValue=this._lastValueReported=a;if((this.intermediateChanges||b||b===undefined)&&(typeof a!=typeof this._lastValueReported||
this.compare(a,this._lastValueReported)!=0)){this._lastValueReported=a;if(this._onChangeActive){this._onChangeHandle&&clearTimeout(this._onChangeHandle);this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(a)}),0)}}},create:function(){this.inherited(arguments);this._onChangeActive=true;this._setStateClass()},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported)}this.inherited(arguments)},
setValue:function(a){dojo.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use attr('value',"+a+") instead.","","2.0");this.attr("value",a)},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value")}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(a){this.readOnly=
a;dojo.attr(this.focusNode,"readOnly",a);dijit.setWaiState(this.focusNode,"readonly",a);this._setStateClass()},postCreate:function(){if(dojo.isIE)this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);if(this._resetValue===undefined)this._resetValue=this.value},_setValueAttr:function(a,b){this.value=a;this._handleOnChange(a,b)},_getValueAttr:function(){return this._lastValue},undo:function(){this._setValueAttr(this._lastValueReported,false)},reset:function(){this._hasBeenBlurred=false;
this._setValueAttr(this._resetValue,true)},_onKeyDown:function(a){if(a.keyCode==dojo.keys.ESCAPE&&!(a.ctrlKey||a.altKey||a.metaKey)){var b;if(dojo.isIE){a.preventDefault();b=document.createEventObject();b.keyCode=dojo.keys.ESCAPE;b.shiftKey=a.shiftKey;a.srcElement.fireEvent("onkeypress",b)}}},_layoutHackIE7:function(){if(dojo.isIE==7)for(var a=this.domNode,b=a.parentNode,c=a.firstChild||a,d=c.style.filter;b&&b.clientHeight==0;){b._disconnectHandle=this.connect(b,"onscroll",dojo.hitch(this,function(){this.disconnect(b._disconnectHandle);
b.removeAttribute("_disconnectHandle");c.style.filter=(new Date).getMilliseconds();setTimeout(function(){c.style.filter=d},0)}));b=b.parentNode}}})}if(!dojo._hasResource["dijit.dijit"]){dojo._hasResource["dijit.dijit"]=true;dojo.provide("dijit.dijit")}
if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(a,b){var c=this._keyNavCodes={},d=dojo.hitch(this,this.focusPrev),f=dojo.hitch(this,this.focusNext);dojo.forEach(a,function(e){c[e]=d});dojo.forEach(b,function(e){c[e]=f});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,
"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"))},addChild:function(a){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusNext:function(){if(this.focusedChild&&this.focusedChild.hasNextFocalNode&&this.focusedChild.hasNextFocalNode())this.focusedChild.focusNext();
else{var a=this._getNextFocusableChild(this.focusedChild,1);a.getFocalNodes?this.focusChild(a,a.getFocalNodes()[0]):this.focusChild(a)}},focusPrev:function(){if(this.focusedChild&&this.focusedChild.hasPrevFocalNode&&this.focusedChild.hasPrevFocalNode())this.focusedChild.focusPrev();else{var a=this._getNextFocusableChild(this.focusedChild,-1);if(a.getFocalNodes){var b=a.getFocalNodes();this.focusChild(a,b[b.length-1])}else this.focusChild(a)}},focusChild:function(a,b){if(a){this.focusedChild&&a!==
this.focusedChild&&this._onChildBlur(this.focusedChild);this.focusedChild=a;b&&a.focusFocalNode?a.focusFocalNode(b):a.focus()}},_startupChild:function(a){if(a.getFocalNodes)dojo.forEach(a.getFocalNodes(),function(c){dojo.attr(c,"tabIndex",-1);this._connectNode(c)},this);else{var b=a.focusNode||a.domNode;a.isFocusable()&&dojo.attr(b,"tabIndex",-1);this._connectNode(b)}},_connectNode:function(a){this.connect(a,"onfocus","_onNodeFocus");this.connect(a,"onblur","_onNodeBlur")},_onContainerFocus:function(a){if(a.target===
this.domNode){this.focusFirstChild();dojo.attr(this.domNode,"tabIndex","-1")}},_onBlur:function(){this.tabIndex&&dojo.attr(this.domNode,"tabIndex",this.tabIndex);this.inherited(arguments)},_onContainerKeypress:function(a){if(!(a.ctrlKey||a.altKey)){var b=this._keyNavCodes[a.charOrCode];if(b){b();dojo.stopEvent(a)}}},_onNodeFocus:function(a){var b=dijit.getEnclosingWidget(a.target);if(b&&b.isFocusable())this.focusedChild=b;dojo.stopEvent(a)},_onNodeBlur:function(a){dojo.stopEvent(a)},_onChildBlur:function(){},
_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getNextFocusableChild:function(a,b){if(a)a=this._getSiblingOfChild(a,b);for(var c=this.getChildren(),d=0;d<c.length;d++){a||(a=c[b>0?0:c.length-1]);if(a.isFocusable())return a;a=this._getSiblingOfChild(a,b)}return null}})}
if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuItem.html",'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" waiRole="menuitem" tabIndex="-1"\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\n\t<td class="dijitReset" waiRole="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon" dojoAttachPoint="iconNode">\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" waiRole="presentation">\n\t\t<div dojoAttachPoint="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand">\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n'),
attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(a){a&&!("label"in this.params)&&this.attr("label",a.innerHTML)},postCreate:function(){dojo.setSelectable(this.domNode,false);var a=this.id+"_text";dojo.attr(this.containerNode,"id",a);if(this.accelKeyNode){dojo.attr(this.accelKeyNode,"id",this.id+"_accel");a+=" "+this.id+"_accel"}dijit.setWaiState(this.domNode,
"labelledby",a)},_onHover:function(){dojo.addClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemHover(this)},_onUnhover:function(){dojo.removeClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemUnhover(this)},_onClick:function(a){this.getParent().onItemClick(this,a);dojo.stopEvent(a)},onClick:function(){},focus:function(){try{dijit.focus(this.focusNode)}catch(a){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(a){dojo.toggleClass(this.domNode,
"dijitMenuItemSelected",a)},setLabel:function(a){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",a)},setDisabled:function(a){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",a)},_setDisabledAttr:function(a){this.disabled=a;dojo[a?"addClass":"removeClass"](this.domNode,"dijitMenuItemDisabled");dijit.setWaiState(this.focusNode,"disabled",a?"true":"false")},
_setAccelKeyAttr:function(a){this.accelKey=a;this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;dojo.attr(this.containerNode,"colSpan",a?"1":"2")}})}
if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=
dijit.byNode(a)}dojo.body().appendChild(this.popup.domNode);this.popup.domNode.style.display="none";this.arrowWrapper&&dojo.style(this.arrowWrapper,"visibility","");dijit.setWaiState(this.focusNode,"haspopup","true")}},destroyDescendants:function(){if(this.popup){this.popup._destroyed||this.popup.destroyRecursive();delete this.popup}this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html",'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" waiRole="menuitemcheckbox" tabIndex="-1"\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\n\t<td class="dijitReset" waiRole="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" dojoAttachPoint="iconNode">\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" waiRole="presentation">\n\t</td>\n</tr>\n'),
checked:false,_setCheckedAttr:function(a){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",a);dijit.setWaiState(this.domNode,"checked",a);this.checked=a},onChange:function(){},_onClick:function(){if(!this.disabled){this.attr("checked",!this.checked);this.onChange(this.checked)}this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html",'<tr class="dijitMenuSeparator">\n\t<td colspan="4">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>\n'),postCreate:function(){dojo.setSelectable(this.domNode,
false)},isFocusable:function(){return false}})}
if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(!this._started){dojo.forEach(this.getChildren(),function(a){a.startup()});this.startupKeyNavChildren();this.inherited(arguments)}},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.focusedChild._onClick(a);
else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;a.focusedChild&&a.focusedChild._setSelected(false);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive){this.focusChild(a);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer)this.hover_timer=
setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay)}this.focusedChild&&this.focusChild(a);this._hoveredChild=a},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(false);var b=a.popup;if(b){this._stopPendingCloseTimer(b);b._pendingClose_timer=setTimeout(function(){b._pendingClose_timer=null;if(b.parentMenu)b.parentMenu.currentPopup=null;dijit.popup.close(b)},this.popupDelay)}},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();if(this._hoveredChild==a)this._hoveredChild=
null},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null}},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer){clearTimeout(a._pendingClose_timer);a._pendingClose_timer=null}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);this._focus_timer=null}},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){if(a.disabled)return false;typeof this.isShowingNow=="undefined"&&
this._markActive();this.focusChild(a);if(a.popup)this._openPopup();else{this.onExecute();a.onClick(b)}},_openPopup:function(){this._stopPopupTimer();var a=this.focusedChild;if(a){var b=a.popup;if(!b.isShowingNow){if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);dijit.popup.close(this.currentPopup)}b.parentMenu=this;b.from_item=a;var c=this;dijit.popup.open({parent:this,popup:b,around:a.domNode,orient:this._orient||(this.isLeftToRight()?{TR:"TL",TL:"TR",BR:"BL",BL:"BR"}:{TL:"TR",
TR:"TL",BL:"BR",BR:"BL"}),onCancel:function(){c._cleanUp();c.focusChild(a);a._setSelected(true)},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=b;b.connect(b.domNode,"onmouseenter",dojo.hitch(c,"_onPopupHover"));if(b.focus)b._focus_timer=setTimeout(dojo.hitch(b,function(){this._focus_timer=null;this.focus()}),0)}}},_markActive:function(){this.isActive=true;dojo.addClass(this.domNode,"dijitMenuActive");dojo.removeClass(this.domNode,"dijitMenuPassive")},onOpen:function(){this.isShowingNow=
true;this._markActive()},_markInactive:function(){this.isActive=false;dojo.removeClass(this.domNode,"dijitMenuActive");dojo.addClass(this.domNode,"dijitMenuPassive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();this.focusedChild=null}if(this.currentPopup){dijit.popup.close(this.currentPopup);this.currentPopup=
null}},_onItemFocus:function(a){this._hoveredChild&&this._hoveredChild!=a&&this._hoveredChild._onUnhover()},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();typeof this.isShowingNow=="undefined"&&this._markInactive()}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[]},templateString:dojo.cache("dijit","templates/Menu.html",'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" waiRole="menu" tabIndex="${tabIndex}" dojoAttachEvent="onkeypress:_onKeyPress">\n\t<tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody>\n</table>\n'),
targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,_contextMenuWithMouse:false,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(dojo.body()):dojo.forEach(this.targetNodeIds,this.bindDomNode,this);var a=dojo.keys,b=this.isLeftToRight();this._openSubMenuKey=b?a.RIGHT_ARROW:a.LEFT_ARROW;this._closeSubMenuKey=b?a.LEFT_ARROW:a.RIGHT_ARROW;this.connectKeyNavHandlers([a.UP_ARROW],[a.DOWN_ARROW])},_onKeyPress:function(a){if(!(a.ctrlKey||a.altKey))switch(a.charOrCode){case this._openSubMenuKey:this._moveToPopup(a);
dojo.stopEvent(a);break;case this._closeSubMenuKey:if(this.parentMenu)this.parentMenu._isMenuBar?this.parentMenu.focusPrev():this.onCancel(false);else dojo.stopEvent(a);break}},_iframeContentWindow:function(a){return a=dijit.getDocumentWindow(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&dojo.doc.frames[a.name]||null},_iframeContentDocument:function(a){return a=a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&dojo.doc.frames[a.name]&&dojo.doc.frames[a.name].document||
null},bindDomNode:function(a){a=dojo.byId(a);var b;if(a.tagName.toLowerCase()=="iframe"){var c=a,d=this._iframeContentWindow(c);b=dojo.withGlobal(d,dojo.body)}else b=a==dojo.body()?dojo.doc:a;var f={node:a,iframe:c};dojo.attr(a,"_dijitMenu"+this.id,this._bindings.push(f));var e=dojo.hitch(this,function(g){return[dojo.connect(g,this.leftClickToOpen?"onclick":"oncontextmenu",this,function(j){this._openMyself(j,g,c)}),dojo.connect(g,"onkeydown",this,"_contextKey"),dojo.connect(g,"onmousedown",this,"_contextMouse")]});
f.connects=b?e(b):[];if(c){f.onloadHandler=dojo.hitch(this,function(){var g=this._iframeContentWindow(c);b=dojo.withGlobal(g,dojo.body);f.connects=e(b)});c.addEventListener?c.addEventListener("load",f.onloadHandler,false):c.attachEvent("onload",f.onloadHandler)}},unBindDomNode:function(a){var b;try{b=dojo.byId(a)}catch(c){return}a="_dijitMenu"+this.id;if(b&&dojo.hasAttr(b,a)){var d=dojo.attr(b,a)-1,f=this._bindings[d];dojo.forEach(f.connects,dojo.disconnect);var e=f.iframe;if(e)e.removeEventListener?
e.removeEventListener("load",f.onloadHandler,false):e.detachEvent("onload",f.onloadHandler);dojo.removeAttr(b,a);delete this._bindings[d]}},_contextKey:function(a){this._contextMenuWithMouse=false;if(a.keyCode==dojo.keys.F10){dojo.stopEvent(a);if(a.shiftKey&&a.type=="keydown"){var b={target:a.target,pageX:a.pageX,pageY:a.pageY};b.preventDefault=b.stopPropagation=function(){};window.setTimeout(dojo.hitch(this,function(){this._openMyself(b)}),1)}}},_contextMouse:function(){this._contextMenuWithMouse=
true},_openMyself:function(a,b,c){function d(){i.refocus&&dijit.focus(l);dijit.popup.close(i)}if(!(this.leftClickToOpen&&a.button>0)){dojo.stopEvent(a);if(dojo.isSafari||this._contextMenuWithMouse){b=a.pageX;a=a.pageY;if(c){var f=dojo.position(c,true),e=this._iframeContentWindow(c);e=dojo.withGlobal(e,"_docScroll",dojo);var g=dojo.getComputedStyle(c),j=dojo._toPixelValue,k=(dojo.isIE&&dojo.isQuirks?0:j(c,g.paddingLeft))+(dojo.isIE&&dojo.isQuirks?j(c,g.borderLeftWidth):0);c=(dojo.isIE&&dojo.isQuirks?
0:j(c,g.paddingTop))+(dojo.isIE&&dojo.isQuirks?j(c,g.borderTopWidth):0);b+=f.x+k-e.x;a+=f.y+c-e.y}}else{c=dojo.position(a.target,true);b=c.x+10;a=c.y+10}var i=this,l=dijit.getFocus(this);dijit.popup.open({popup:this,x:b,y:a,onExecute:d,onCancel:d,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this)}}},uninitialize:function(){dojo.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})}
if(!dojo._hasResource["dojox.html.metrics"]){dojo._hasResource["dojox.html.metrics"]=true;dojo.provide("dojox.html.metrics");(function(){var a=dojox.html.metrics;a.getFontMeasurements=function(){var e={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(dojo.isIE)dojo.doc.documentElement.style.fontSize="100%";var g=dojo.doc.createElement("div"),j=g.style;j.position="absolute";j.left="-100px";j.top="0";j.width="30px";j.height="1000em";
j.border="0";j.margin="0";j.padding="0";j.outline="0";j.lineHeight="1";j.overflow="hidden";dojo.body().appendChild(g);for(var k in e){j.fontSize=k;e[k]=Math.round(g.offsetHeight*12/16)*16/12/1E3}dojo.body().removeChild(g);return e};var b=null;a.getCachedFontMeasurements=function(e){if(e||!b)b=a.getFontMeasurements();return b};var c=null,d={};a.getTextBox=function(e,g,j){var k;if(c)k=c;else{k=c=dojo.doc.createElement("div");k.style.position="absolute";k.style.left="-10000px";k.style.top="0";dojo.body().appendChild(k)}k.className=
"";k.style.border="0";k.style.margin="0";k.style.padding="0";k.style.outline="0";if(arguments.length>1&&g)for(var i in g)i in d||(k.style[i]=g[i]);if(arguments.length>2&&j)k.className=j;k.innerHTML=e;return dojo.marginBox(k)};var f={w:16,h:16};a.getScrollbar=function(){return{w:f.w,h:f.h}};a._fontResizeNode=null;a.initOnFontResize=function(){var e=a._fontResizeNode=dojo.doc.createElement("iframe"),g=e.style;g.position="absolute";g.width="5em";g.height="10em";g.top="-10000px";if(dojo.isIE)e.onreadystatechange=
function(){if(e.contentWindow.document.readyState=="complete")e.onresize=e.contentWindow.parent[dojox._scopeName].html.metrics._fontresize};else e.onload=function(){e.contentWindow.onresize=e.contentWindow.parent[dojox._scopeName].html.metrics._fontresize};e.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");dojo.body().appendChild(e);a.initOnFontResize=function(){}};a.onFontResize=function(){};
a._fontresize=function(){a.onFontResize()};dojo.addOnUnload(function(){var e=a._fontResizeNode;if(e){if(dojo.isIE&&e.onresize)e.onresize=null;else if(e.contentWindow&&e.contentWindow.onresize)e.contentWindow.onresize=null;a._fontResizeNode=null}});dojo.addOnLoad(function(){try{var e=dojo.doc.createElement("div");e.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";dojo.body().appendChild(e);f.w=e.offsetWidth-e.clientWidth;f.h=e.offsetHeight-
e.clientHeight;dojo.body().removeChild(e);delete e}catch(g){}"fontSizeWatch"in dojo.config&&dojo.config.fontSizeWatch&&a.initOnFontResize()})})()}
if(!dojo._hasResource["dojox.grid.util"]){dojo._hasResource["dojox.grid.util"]=true;dojo.provide("dojox.grid.util");(function(){var a=dojox.grid.util;a.na="...";a.rowIndexTag="gridRowIndex";a.gridViewTag="gridView";a.fire=function(b,c,d){var f=b&&c&&b[c];return f&&(d?f.apply(b,d):b[c]())};a.setStyleHeightPx=function(b,c){if(c>=0){var d=b.style;c=c+"px";if(b&&d.height!=c)d.height=c}};a.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];a.keyEvents=["keyup",
"keydown","keypress"];a.funnelEvents=function(b,c,d,f){f=f?f:a.mouseEvents.concat(a.keyEvents);for(var e=0,g=f.length;e<g;e++)c.connect(b,"on"+f[e],d)};a.removeNode=function(b){(b=dojo.byId(b))&&b.parentNode&&b.parentNode.removeChild(b);return b};a.arrayCompare=function(b,c){for(var d=0,f=b.length;d<f;d++)if(b[d]!=c[d])return false;return b.length==c.length};a.arrayInsert=function(b,c,d){if(b.length<=c)b[c]=d;else b.splice(c,0,d)};a.arrayRemove=function(b,c){b.splice(c,1)};a.arraySwap=function(b,
c,d){var f=b[c];b[c]=b[d];b[d]=f}})()}
if(!dojo._hasResource["dojox.grid._Scroller"]){dojo._hasResource["dojox.grid._Scroller"]=true;dojo.provide("dojox.grid._Scroller");(function(){var a=function(e){for(var g=0,j,k=e.parentNode;j=k.childNodes[g++];)if(j==e)return g-1;return-1},b=function(e){if(e){var g=function(i){return i.domNode&&dojo.isDescendant(i.domNode,e,true)};g=dijit.registry.filter(g);for(var j=0,k;k=g[j];j++)k.destroy();delete g}},c=function(e){return(e=dojo.byId(e))&&e.tagName?e.tagName.toLowerCase():""},d=function(e,g){for(var j=
[],k=0,i;i=e.childNodes[k];){k++;c(i)==g&&j.push(i)}return j},f=function(e){return d(e,"div")};dojo.declare("dojox.grid._Scroller",null,{constructor:function(e){this.setContentNodes(e);this.pageHeights=[];this.pageNodes=[];this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(e,g,j){switch(arguments.length){case 3:this.rowsPerPage=
j;case 2:this.keepRows=g;case 1:this.rowCount=e;default:break}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll")}},_getPageCount:function(e,g){return e?Math.ceil(e/g)||1:0},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;
delete this.scrollboxNode},setKeepInfo:function(e){this.keepRows=e;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2)},setContentNodes:function(e){this.colCount=(this.contentNodes=e)?this.contentNodes.length:0;this.pageNodes=[];for(e=0;e<this.colCount;e++)this.pageNodes[e]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=this.pageCount?(this.pageCount-
1)*this.defaultPageHeight+this.calcLastPageHeight():0;this.resize();this._invalidating=false},updateRowCount:function(e){this.invalidateNodes();this.rowCount=e;e=this.pageCount;if(e===0)this.height=1;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<e)for(e=e-1;e>=this.pageCount;e--){this.height-=this.getPageHeight(e);delete this.pageHeights[e]}else if(this.pageCount>e)this.height+=this.defaultPageHeight*(this.pageCount-e-1)+this.calcLastPageHeight();this.resize()},
pageExists:function(e){return Boolean(this.getDefaultPageNode(e))},measurePage:function(e){if(this.grid.rowHeight){var g=this.grid.rowHeight+1;return((e+1)*this.rowsPerPage>this.rowCount?this.rowCount-e*this.rowsPerPage:this.rowsPerPage)*g}return(e=this.getDefaultPageNode(e))&&e.innerHTML?e.offsetHeight:undefined},positionPage:function(e,g){for(var j=0;j<this.colCount;j++)this.pageNodes[j][e].style.top=g+"px"},repositionPages:function(e){for(var g=this.getDefaultNodes(),j=0,k=0;k<this.stack.length;k++)j=
Math.max(this.stack[k],j);var i=(k=g[e])?this.getPageNodePosition(k)+this.getPageHeight(e):0;for(e=e+1;e<=j;e++){if(k=g[e]){if(this.getPageNodePosition(k)==i)return;this.positionPage(e,i)}i+=this.getPageHeight(e)}},installPage:function(e){for(var g=0;g<this.colCount;g++)this.contentNodes[g].appendChild(this.pageNodes[g][e])},preparePage:function(e,g){g=g?this.popPage():null;for(var j=0;j<this.colCount;j++){var k=this.pageNodes[j],i=g===null?this.createPageNode():this.invalidatePageNode(g,k);i.pageIndex=
e;k[e]=i}},renderPage:function(e){var g=[],j;for(j=0;j<this.colCount;j++)g[j]=this.pageNodes[j][e];j=0;for(e=e*this.rowsPerPage;j<this.rowsPerPage&&e<this.rowCount;j++,e++)this.renderRow(e,g)},removePage:function(e){var g=0;for(e=e*this.rowsPerPage;g<this.rowsPerPage;g++,e++)this.removeRow(e)},destroyPage:function(e){for(var g=0;g<this.colCount;g++){var j=this.invalidatePageNode(e,this.pageNodes[g]);j&&dojo.destroy(j)}},pacify:function(){},pacifying:false,pacifyTicks:200,setPacifying:function(e){if(this.pacifying!=
e){this.pacifying=e;this.pacify(this.pacifying)}},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var e=(new Date).getTime()-this.startPacifyTicks>this.pacifyTicks;this.setPacifying(true);this.startPacify();return e},endPacify:function(){this.setPacifying(false)},resize:function(){if(this.scrollboxNode)this.windowHeight=this.scrollboxNode.clientHeight;for(var e=0;e<this.colCount;e++)dojox.grid.util.setStyleHeightPx(this.contentNodes[e],Math.max(1,this.height));
e=!this._invalidating;if(!e){var g=this.grid.attr("autoHeight");if(typeof g=="number"&&g<=Math.min(this.rowsPerPage,this.rowCount))e=true}e&&this.needPage(this.page,this.pageTop);e=this.page<this.pageCount-1?this.rowsPerPage:this.rowCount%this.rowsPerPage||this.rowsPerPage;g=this.getPageHeight(this.page);this.averageRowHeight=g>0&&e>0?g/e:0},calcLastPageHeight:function(){if(!this.pageCount)return 0;var e=this.pageCount-1,g=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;return this.pageHeights[e]=
g},updateContentHeight:function(e){this.height+=e;this.resize()},updatePageHeight:function(e,g){if(this.pageExists(e)){var j=this.getPageHeight(e),k=this.measurePage(e);if(k===undefined)k=j;this.pageHeights[e]=k;if(j!=k){this.updateContentHeight(k-j);j=this.grid.attr("autoHeight");typeof j=="number"&&j>this.rowCount||j===true&&!g?this.grid.sizeChange():this.repositionPages(e)}return k}return 0},rowHeightChanged:function(e){this.updatePageHeight(Math.floor(e/this.rowsPerPage),false)},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},
createPageNode:function(){var e=document.createElement("div");dojo.attr(e,"role","presentation");e.style.position="absolute";e.style[dojo._isBodyLtr()?"left":"right"]="0";return e},getPageHeight:function(e){e=this.pageHeights[e];return e!==undefined?e:this.defaultPageHeight},pushPage:function(e){return this.stack.push(e)},popPage:function(){return this.stack.shift()},findPage:function(e){for(var g=0,j=0,k=0;g<this.pageCount;g++,j+=k){k=this.getPageHeight(g);if(j+k>=e)break}this.page=g;this.pageTop=
j},buildPage:function(e,g,j){this.preparePage(e,g);this.positionPage(e,j);this.installPage(e);this.renderPage(e);this.pushPage(e)},needPage:function(e,g){var j=this.getPageHeight(e);if(this.pageExists(e))this.positionPage(e,g);else{this.buildPage(e,this.keepPages&&this.stack.length>=this.keepPages,g);j=this.updatePageHeight(e,true)}return j},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(e){this.grid.scrollTop=e;if(this.colCount){this.startPacify();this.findPage(e);
for(var g=this.height,j=this.getScrollBottom(e),k=this.page,i=this.pageTop;k<this.pageCount&&(j<0||i<j);k++)i+=this.needPage(k,i);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,e);this.lastVisibleRow=this.getLastVisibleRow(k-1,i,j);g!=this.height&&this.repositionPages(k-1);this.endPacify()}},getScrollBottom:function(e){return this.windowHeight>=0?e+this.windowHeight:-1},processNodeEvent:function(e,g){for(var j=e.target;j&&j!=g&&j.parentNode&&j.parentNode.parentNode!=g;)j=j.parentNode;
if(!j||!j.parentNode||j.parentNode.parentNode!=g)return false;g=j.parentNode;e.topRowIndex=g.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+a(j);e.rowTarget=j;return true},processEvent:function(e){return this.processNodeEvent(e,this.contentNode)},renderRow:function(){},removeRow:function(){},getDefaultPageNode:function(e){return this.getDefaultNodes()[e]},positionPageNode:function(){},getPageNodePosition:function(e){return e.offsetTop},invalidatePageNode:function(e,g){var j=g[e];if(j){delete g[e];
this.removePage(e,j);b(j);j.innerHTML=""}return j},getPageRow:function(e){return e*this.rowsPerPage},getLastPageRow:function(e){return Math.min(this.rowCount,this.getPageRow(e+1))-1},getFirstVisibleRow:function(e,g,j){if(!this.pageExists(e))return 0;var k=this.getPageRow(e),i=this.getDefaultNodes();e=f(i[e]);i=0;for(var l=e.length;i<l&&g<j;i++,k++)g+=e[i].offsetHeight;return k?k-1:k},getLastVisibleRow:function(e,g,j){if(!this.pageExists(e))return 0;var k=this.getDefaultNodes(),i=this.getLastPageRow(e);
e=f(k[e]);for(k=e.length-1;k>=0&&g>j;k--,i--)g-=e[k].offsetHeight;return i+1},findTopRow:function(e){var g=this.getDefaultNodes();g=f(g[this.page]);for(var j=0,k=g.length,i=this.pageTop,l;j<k;j++){l=g[j].offsetHeight;i+=l;if(i>=e){this.offset=l-(i-e);return j+this.page*this.rowsPerPage}}return-1},findScrollTop:function(e){var g=Math.floor(e/this.rowsPerPage),j=0,k;for(k=0;k<g;k++)j+=this.getPageHeight(k);this.pageTop=j;this.needPage(g,this.pageTop);k=this.getDefaultNodes();var i=f(k[g]);g=e-this.rowsPerPage*
g;k=0;for(e=i.length;k<e&&k<g;k++)j+=i[k].offsetHeight;return j},dummy:0})})()}
if(!dojo._hasResource["dojox.grid.cells._base"]){dojo._hasResource["dojox.grid.cells._base"]=true;dojo.provide("dojox.grid.cells._base");dojo.declare("dojox.grid._DeferredTextWidget",dijit._Widget,{deferred:null,_destroyOnRemove:true,postCreate:function(){this.deferred&&this.deferred.addBoth(dojo.hitch(this,function(a){if(this.domNode)this.domNode.innerHTML=a}))}});(function(){var a=function(d){try{dojox.grid.util.fire(d,"focus");dojox.grid.util.fire(d,"select")}catch(f){}},b=function(){setTimeout(dojo.hitch.apply(dojo,
arguments),0)},c=dojox.grid.cells;dojo.declare("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(d){this._props=d||{};dojo.mixin(this,d);if(this.draggable===undefined)this.draggable=true},_defaultFormat:function(d,f){var e=this.grid.formatterScope||this,g=this.formatter;if(g&&e&&typeof g=="string")g=this.formatter=
e[g];d=d!=this.defaultValue&&g?g.apply(e,f):d;if(typeof d=="undefined")return this.defaultValue;if(d&&d.addBoth)d=new dojox.grid._DeferredTextWidget({deferred:d},dojo.create("span",{innerHTML:this.defaultValue}));if(d&&d.declaredClass)return"<div class='dojoxGridStubNode' linkWidget='"+d.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";return d},format:function(d,f){var e=this.grid.edit.info;f=(f=this.get?this.get(d,f):this.value||this.defaultValue)&&f.replace&&this.grid.escapeHTMLInData?
f.replace(/&/g,"&amp;").replace(/</g,"&lt;"):f;return this.editable&&(this.alwaysEditing||e.rowIndex==d&&e.cell==this)?this.formatEditing(f,d):this._defaultFormat(f,[f,d,this])},formatEditing:function(){},getNode:function(d){return this.view.getCellNode(d,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(d){return(this.getNode(d)||0).firstChild||0},canResize:function(){var d=this.unitWidth;return d&&d!=="auto"},isFlex:function(){var d=this.unitWidth;
return d&&dojo.isString(d)&&(d=="auto"||d.slice(-1)=="%")},applyEdit:function(d,f){this.grid.edit.applyCellEdit(d,this,f)},cancelEdit:function(d){this.grid.doCancelEdit(d)},_onEditBlur:function(d){this.grid.edit.isEditCell(d,this.index)&&this.grid.edit.apply()},registerOnBlur:function(d,f){this.commitOnBlur&&dojo.connect(d,"onblur",function(){setTimeout(dojo.hitch(this,"_onEditBlur",f),250)})},needFormatNode:function(d,f){this._formatPending=true;b(this,"_formatNode",d,f)},cancelFormatNode:function(){this._formatPending=
false},_formatNode:function(d,f){if(this._formatPending){this._formatPending=false;dojo.setSelectable(this.grid.domNode,true);this.formatNode(this.getEditNode(f),d,f)}},formatNode:function(d,f,e){dojo.isIE?b(this,"focus",e,d):this.focus(e,d)},dispatchEvent:function(d,f){if(d in this)return this[d](f)},getValue:function(d){return this.getEditNode(d)[this._valueProp]},setValue:function(d,f){if(d=this.getEditNode(d))d[this._valueProp]=f},focus:function(d,f){a(f||this.getEditNode(d))},save:function(d){this.value=
this.value||this.getValue(d)},restore:function(d){this.setValue(d,this.value)},_finish:function(){dojo.setSelectable(this.grid.domNode,false);this.cancelFormatNode()},apply:function(d){this.applyEdit(this.getValue(d),d);this._finish(d)},cancel:function(d){this.cancelEdit(d);this._finish(d)}});c._Base.markupFactory=function(d,f){var e=dojo,g=e.trim(e.attr(d,"formatter")||"");if(g)f.formatter=dojo.getObject(g)||g;if(g=e.trim(e.attr(d,"get")||""))f.get=dojo.getObject(g);g=function(j,k,i){var l=e.trim(e.attr(d,
j)||"");if(l)k[i||j]=l.toLowerCase()!="false"};g("sortDesc",f);g("editable",f);g("alwaysEditing",f);g("noresize",f);g("draggable",f);if(g=e.trim(e.attr(d,"loadingText")||e.attr(d,"defaultValue")||""))f.defaultValue=g;g=function(j,k,i){var l=e.trim(e.attr(d,j)||"")||undefined;if(l)k[i||j]=l};g("styles",f);g("headerStyles",f);g("cellStyles",f);g("classes",f);g("headerClasses",f);g("cellClasses",f)};dojo.declare("dojox.grid.cells.Cell",c._Base,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,
formatEditing:function(d,f){this.needFormatNode(d,f);return'<input class="dojoxGridInput" type="text" value="'+d+'">'},formatNode:function(d,f,e){this.inherited(arguments);this.registerOnBlur(d,e)},doKey:function(d){if(this.keyFilter){var f=String.fromCharCode(d.charCode);f.search(this.keyFilter)==-1&&dojo.stopEvent(d)}},_finish:function(d){this.inherited(arguments);var f=this.getEditNode(d);try{dojox.grid.util.fire(f,"blur")}catch(e){}}});c.Cell.markupFactory=function(d,f){c._Base.markupFactory(d,
f);var e=dojo;if(d=e.trim(e.attr(d,"keyFilter")||""))f.keyFilter=new RegExp(d)};dojo.declare("dojox.grid.cells.RowIndex",c.Cell,{name:"Row",postscript:function(){this.editable=false},get:function(d){return d+1}});c.RowIndex.markupFactory=function(d,f){c.Cell.markupFactory(d,f)};dojo.declare("dojox.grid.cells.Select",c.Cell,{options:null,values:null,returnIndex:-1,constructor:function(){this.values=this.values||this.options},formatEditing:function(d,f){this.needFormatNode(d,f);f=['<select class="dojoxGridSelect">'];
for(var e=0,g,j;(g=this.options[e])!==undefined&&(j=this.values[e])!==undefined;e++)f.push("<option",d==j?" selected":"",' value="'+j+'"',">",g,"</option>");f.push("</select>");return f.join("")},getValue:function(d){var f=this.getEditNode(d);if(f){d=f.selectedIndex;f=f.options[d];return this.returnIndex>-1?d:f.value||f.innerHTML}}});c.Select.markupFactory=function(d,f){c.Cell.markupFactory(d,f);var e=dojo,g=e.trim(e.attr(d,"options")||"");if(g){var j=g.split(",");if(j[0]!=g)f.options=j}if(d=e.trim(e.attr(d,
"values")||"")){e=d.split(",");if(e[0]!=d)f.values=e}};dojo.declare("dojox.grid.cells.AlwaysEdit",c.Cell,{alwaysEditing:true,_formatNode:function(d,f){this.formatNode(this.getEditNode(f),d,f)},applyStaticValue:function(d){var f=this.grid.edit;f.applyCellEdit(this.getValue(d),this,d);f.start(this,d,true)}});c.AlwaysEdit.markupFactory=function(d,f){c.Cell.markupFactory(d,f)};dojo.declare("dojox.grid.cells.Bool",c.AlwaysEdit,{_valueProp:"checked",formatEditing:function(d){return'<input class="dojoxGridInput" type="checkbox"'+
(d?' checked="checked"':"")+' style="width: auto" />'},doclick:function(d){d.target.tagName=="INPUT"&&this.applyStaticValue(d.rowIndex)}});c.Bool.markupFactory=function(d,f){c.AlwaysEdit.markupFactory(d,f)}})()}if(!dojo._hasResource["dojox.grid.cells"]){dojo._hasResource["dojox.grid.cells"]=true;dojo.provide("dojox.grid.cells")}
if(!dojo._hasResource["dojox.grid._Builder"]){dojo._hasResource["dojox.grid._Builder"]=true;dojo.provide("dojox.grid._Builder");(function(){var a=dojox.grid,b=function(i){return i.cellIndex>=0?i.cellIndex:dojo.indexOf(i.parentNode.cells,i)},c=function(i){return i.rowIndex>=0?i.rowIndex:dojo.indexOf(i.parentNode.childNodes,i)},d=function(i,l){return i&&((i.rows||0)[l]||i.childNodes[l])},f=function(i){for(i=i;i&&i.tagName!="TABLE";i=i.parentNode);return i},e=function(i,l){for(i=i;i&&l(i);i=i.parentNode);
return i},g=function(i){var l=i.toUpperCase();return function(m){return m.tagName!=l}},j=dojox.grid.util.rowIndexTag,k=dojox.grid.util.gridViewTag;a._Builder=dojo.extend(function(i){if(i){this.view=i;this.grid=i.grid}},{view:null,_table:'<table class="dojoxGridRowTable" border="0" cellspacing="0" cellpadding="0" role="presentation"',getTableArray:function(){var i=[this._table];this.view.viewWidth&&i.push([' style="width:',this.view.viewWidth,';"'].join(""));i.push(">");return i},generateCellMarkup:function(i,
l,m,n){var o=[],p;if(n){p=i.index!=i.grid.getSortIndex()?"":i.grid.sortInfo>0?'aria-sort="ascending"':'aria-sort="descending"';if(!i.id)i.id=this.grid.id+"Hdr"+i.index;p=['<th tabIndex="-1" aria-readonly="true" role="columnheader"',p,'id="',i.id,'"']}else{p=this.grid.editable&&!i.editable?'aria-readonly="true"':"";p=['<td tabIndex="-1" role="gridcell"',p]}i.colSpan&&p.push(' colspan="',i.colSpan,'"');i.rowSpan&&p.push(' rowspan="',i.rowSpan,'"');p.push(' class="dojoxGridCell ');i.classes&&p.push(i.classes,
" ");m&&p.push(m," ");o.push(p.join(""));o.push("");p=['" idx="',i.index,'" style="'];if(l&&l[l.length-1]!=";")l+=";";p.push(i.styles,l||"",i.hidden?"display:none;":"");i.unitWidth&&p.push("width:",i.unitWidth,";");o.push(p.join(""));o.push("");p=['"'];i.attrs&&p.push(" ",i.attrs);p.push(">");o.push(p.join(""));o.push("");o.push(n?"</th>":"</td>");return o},isCellNode:function(i){return Boolean(i&&i!=dojo.doc&&dojo.attr(i,"idx"))},getCellNodeIndex:function(i){return i?Number(dojo.attr(i,"idx")):-1},
getCellNode:function(i,l){for(var m=0,n;n=d(i.firstChild,m);m++)for(var o=0,p;p=n.cells[o];o++)if(this.getCellNodeIndex(p)==l)return p;return null},findCellTarget:function(i,l){for(i=i;i&&(!this.isCellNode(i)||i.offsetParent&&k in i.offsetParent.parentNode&&i.offsetParent.parentNode[k]!=this.view.id)&&i!=l;)i=i.parentNode;return i!=l?i:null},baseDecorateEvent:function(i){i.dispatch="do"+i.type;i.grid=this.grid;i.sourceView=this.view;i.cellNode=this.findCellTarget(i.target,i.rowNode);i.cellIndex=this.getCellNodeIndex(i.cellNode);
i.cell=i.cellIndex>=0?this.grid.getCell(i.cellIndex):null},findTarget:function(i,l){for(i=i;i&&i!=this.domNode&&(!(l in i)||k in i&&i[k]!=this.view.id);)i=i.parentNode;return i!=this.domNode?i:null},findRowTarget:function(i){return this.findTarget(i,j)},isIntraNodeEvent:function(i){try{return i.cellNode&&i.relatedTarget&&dojo.isDescendant(i.relatedTarget,i.cellNode)}catch(l){return false}},isIntraRowEvent:function(i){try{var l=i.relatedTarget&&this.findRowTarget(i.relatedTarget);return!l&&i.rowIndex==
-1||l&&i.rowIndex==l.gridRowIndex}catch(m){return false}},dispatchEvent:function(i){if(i.dispatch in this)return this[i.dispatch](i);return false},domouseover:function(i){if(i.cellNode&&i.cellNode!=this.lastOverCellNode){this.lastOverCellNode=i.cellNode;this.grid.onMouseOver(i)}this.grid.onMouseOverRow(i)},domouseout:function(i){if(i.cellNode&&i.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(i,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(i);this.isIntraRowEvent(i)||
this.grid.onMouseOutRow(i)}},domousedown:function(i){i.cellNode&&this.grid.onMouseDown(i);this.grid.onMouseDownRow(i)}});a._ContentBuilder=dojo.extend(function(i){a._Builder.call(this,i)},a._Builder.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){for(var i=this.grid.get,l=this.view.structure.cells,m=0,n;n=l[m];m++)for(var o=0,p;p=n[o];o++){p.get=p.get||p.value==undefined&&i;p.markup=this.generateCellMarkup(p,p.cellStyles,p.cellClasses,false);if(!this.grid.editable&&p.editable)this.grid.editable=
true}},generateHtml:function(i,l){i=this.getTableArray();var m=this.view;m=m.structure.cells;var n=this.grid.getItem(l);dojox.grid.util.fire(this.view,"onBeforeRow",[l,m]);for(var o=0,p;p=m[o];o++)if(!(p.hidden||p.header)){i.push(!p.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var r=0,q,s,u,z;q=p[r];r++){s=q.markup;u=q.customClasses=[];z=q.customStyles=[];s[5]=q.format(l,n);s[1]=u.join(" ");s[3]=z.join(";");i.push.apply(i,s)}i.push("</tr>")}i.push("</table>");return i.join("")},decorateEvent:function(i){i.rowNode=
this.findRowTarget(i.target);if(!i.rowNode)return false;i.rowIndex=i.rowNode[j];this.baseDecorateEvent(i);i.cell=this.grid.getCell(i.cellIndex);return true}});a._HeaderBuilder=dojo.extend(function(i){this.moveable=null;a._Builder.call(this,i)},a._Builder.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap)this.tableMap.mapRows(this.view.structure.cells);else this.tableMap=new a._TableMap(this.view.structure.cells)},generateHtml:function(i,l){var m=
this.getTableArray(),n=this.view.structure.cells;dojox.grid.util.fire(this.view,"onBeforeRow",[-1,n]);for(var o=0,p;p=n[o];o++)if(!p.hidden){m.push(!p.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var r=0,q,s;q=p[r];r++){q.customClasses=[];q.customStyles=[];if(this.view.simpleStructure){if(q.draggable)if(q.headerClasses){if(q.headerClasses.indexOf("dojoDndItem")==-1)q.headerClasses+=" dojoDndItem"}else q.headerClasses="dojoDndItem";if(q.attrs){if(q.attrs.indexOf("dndType='gridColumn_")==
-1)q.attrs+=" dndType='gridColumn_"+this.grid.id+"'"}else q.attrs="dndType='gridColumn_"+this.grid.id+"'"}s=this.generateCellMarkup(q,q.headerStyles,q.headerClasses,true);s[5]=l!=undefined?l:i(q);s[3]=q.customStyles.join(";");s[1]=q.customClasses.join(" ");m.push(s.join(""))}m.push("</tr>")}m.push("</table>");return m.join("")},getCellX:function(i){var l,m=i.layerX;if(dojo.isMoz){l=e(i.target,g("th"));m-=l&&l.offsetLeft||0;var n=i.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()&&i.sourceView.headerNode.scrollLeft<
n)m-=n}l=e(i.target,function(){if(!l||l==i.cellNode)return false;m+=l.offsetLeft<0?0:l.offsetLeft;return true});return m},decorateEvent:function(i){this.baseDecorateEvent(i);i.rowIndex=-1;i.cellX=this.getCellX(i);return true},prepareResize:function(i,l){do{var m=b(i.cellNode);i.cellNode=m?i.cellNode.parentNode.cells[m+l]:null;i.cellIndex=i.cellNode?this.getCellNodeIndex(i.cellNode):-1}while(i.cellNode&&i.cellNode.style.display=="none");return Boolean(i.cellNode)},canResize:function(i){if(!i.cellNode||
i.cellNode.colSpan>1)return false;i=this.grid.getCell(i.cellIndex);return!i.noresize&&i.canResize()},overLeftResizeArea:function(i){if(dojo.hasClass(dojo.body(),"dojoDndMove"))return false;if(dojo.isIE){var l=i.target;if(dojo.hasClass(l,"dojoxGridArrowButtonNode")||dojo.hasClass(l,"dojoxGridArrowButtonChar"))return false}if(dojo._isBodyLtr())return i.cellIndex>0&&i.cellX<this.overResizeWidth&&this.prepareResize(i,-1);return i=i.cellNode&&i.cellX<this.overResizeWidth},overRightResizeArea:function(i){if(dojo.hasClass(dojo.body(),
"dojoDndMove"))return false;if(dojo.isIE){var l=i.target;if(dojo.hasClass(l,"dojoxGridArrowButtonNode")||dojo.hasClass(l,"dojoxGridArrowButtonChar"))return false}if(dojo._isBodyLtr())return i.cellNode&&i.cellX>=i.cellNode.offsetWidth-this.overResizeWidth;return i.cellIndex>0&&i.cellX>=i.cellNode.offsetWidth-this.overResizeWidth&&this.prepareResize(i,-1)},domousemove:function(i){if(!this.moveable){var l=this.overRightResizeArea(i)?"dojoxGridColResize":this.overLeftResizeArea(i)?"dojoxGridColResize":
"";if(l&&!this.canResize(i))l="dojoxGridColNoResize";dojo.toggleClass(i.sourceView.headerNode,"dojoxGridColNoResize",l=="dojoxGridColNoResize");dojo.toggleClass(i.sourceView.headerNode,"dojoxGridColResize",l=="dojoxGridColResize");if(dojo.isIE){var m=i.sourceView.headerNode.scrollLeft;i.sourceView.headerNode.scrollLeft=m}l&&dojo.stopEvent(i)}},domousedown:function(i){if(!this.moveable)if((this.overRightResizeArea(i)||this.overLeftResizeArea(i))&&this.canResize(i))this.beginColumnResize(i);else{this.grid.onMouseDown(i);
this.grid.onMouseOverRow(i)}},doclick:function(i){if(this._skipBogusClicks){dojo.stopEvent(i);return true}return false},colResizeSetup:function(i,l){var m=dojo.contentBox(i.sourceView.headerNode);if(l){this.lineDiv=document.createElement("div");l=(dojo.position||dojo._abs)(i.sourceView.headerNode,true);var n=dojo.contentBox(i.sourceView.domNode);dojo.style(this.lineDiv,{top:l.y+"px",left:i.clientX+"px",height:n.h+m.h+"px"});dojo.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=
i.clientX;dojo.body().appendChild(this.lineDiv)}l=[];n=this.tableMap.findOverlappingNodes(i.cellNode);for(var o=0,p;p=n[o];o++)l.push({node:p,index:this.getCellNodeIndex(p),width:p.offsetWidth});n=i.sourceView;p=dojo._isBodyLtr()?1:-1;var r=i.grid.views.views;o=[];for(var q=n.idx+p,s;s=r[q];q+=p)o.push({node:s.headerNode,left:window.parseInt(s.headerNode.style.left)});p=n.headerContentNode.firstChild;return i={scrollLeft:i.sourceView.headerNode.scrollLeft,view:n,node:i.cellNode,index:i.cellIndex,
w:dojo.contentBox(i.cellNode).w,vw:m.w,table:p,tw:dojo.contentBox(p).w,spanners:l,followers:o}},beginColumnResize:function(i){this.moverDiv=document.createElement("div");dojo.style(this.moverDiv,{position:"absolute",left:0});dojo.body().appendChild(this.moverDiv);dojo.addClass(this.grid.domNode,"dojoxGridColumnResizing");var l=this.moveable=new dojo.dnd.Moveable(this.moverDiv),m=this.colResizeSetup(i,true);l.onMove=dojo.hitch(this,"doResizeColumn",m);dojo.connect(l,"onMoveStop",dojo.hitch(this,function(){this.endResizeColumn(m);
m.node.releaseCapture&&m.node.releaseCapture();this.moveable.destroy();delete this.moveable;this.moveable=null;dojo.removeClass(this.grid.domNode,"dojoxGridColumnResizing")}));i.cellNode.setCapture&&i.cellNode.setCapture();l.onMouseDown(i)},doResizeColumn:function(i,l,m){var n=m.l;n={deltaX:n,w:i.w+n,vw:i.vw+n,tw:i.tw+n};this.dragRecord={inDrag:i,mover:l,leftTop:m};if(n.w>=this.minColWidth)l?dojo.style(this.lineDiv,"left",this.lineDiv._origLeft+n.deltaX+"px"):this.doResizeNow(i,n)},endResizeColumn:function(i){if(this.dragRecord){var l=
this.dragRecord.leftTop;l=dojo._isBodyLtr()?l.l:-l.l;l+=Math.max(i.w+l,this.minColWidth)-(i.w+l);if(dojo.isWebKit&&i.spanners.length)l+=dojo._getPadBorderExtents(i.spanners[0].node).w;l={deltaX:l,w:i.w+l,vw:i.vw+l,tw:i.tw+l};this.doResizeNow(i,l)}dojo.destroy(this.lineDiv);dojo.destroy(this.moverDiv);dojo.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;i.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(i.index)},doResizeNow:function(i,l){i.view.convertColPctToFixed();
if(i.view.flexCells&&!i.view.testFlexCells()){var m=f(i.node);if(m)m.style.width=""}var n,o;for(m=0;n=i.spanners[m];m++){o=n.width+l.deltaX;n.node.style.width=o+"px";i.view.setColWidth(n.index,o)}for(m=0;n=i.followers[m];m++){o=n.left+l.deltaX;n.node.style.left=o+"px"}i.node.style.width=l.w+"px";i.view.setColWidth(i.index,l.w);i.view.headerNode.style.width=l.vw+"px";i.view.setColumnsWidth(l.tw);if(!dojo._isBodyLtr())i.view.headerNode.scrollLeft=i.scrollLeft+l.deltaX}});a._TableMap=dojo.extend(function(i){this.mapRows(i)},
{map:null,mapRows:function(i){var l=i.length;if(l){this.map=[];for(l=0;i[l];l++)this.map[l]=[];for(var m=0;l=i[m];m++)for(var n=0,o=0,p,r;p=l[n];n++){for(;this.map[m][o];)o++;this.map[m][o]={c:n,r:m};r=p.rowSpan||1;p=p.colSpan||1;for(var q=0;q<r;q++)for(var s=0;s<p;s++)this.map[m+q][o+s]=this.map[m][o];o+=p}}},dumpMap:function(){for(var i=0,l,m="";l=this.map[i];i++,m="")for(var n=0,o;o=l[n];n++)m+=o.r+","+o.c+"   "},getMapCoords:function(i,l){for(var m=0,n;n=this.map[m];m++)for(var o=0,p;p=n[o];o++)if(p.c==
l&&p.r==i)return{j:m,i:o};return{j:-1,i:-1}},getNode:function(i,l,m){return(i=i&&i.rows[l])&&i.cells[m]},_findOverlappingNodes:function(i,l,m){var n=[];l=this.getMapCoords(l,m);m=0;for(var o;o=this.map[m];m++)if(m!=l.j)(o=(o=o[l.i])?this.getNode(i,o.r,o.c):null)&&n.push(o);return n},findOverlappingNodes:function(i){return this._findOverlappingNodes(f(i),c(i.parentNode),b(i))}})})()}
if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(a,b){this.node=dojo.byId(a);b||(b={});this.creator=b.creator||null;this.skipForm=b.skipForm;this.parent=b.dropParent&&dojo.byId(b.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");b&&b._skipStartup||this.startup();this.events=[dojo.connect(this.node,
"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){b=b||dojo.global;var c=this.map,d=dojo.dnd._empty;for(var f in c)f in d||a.call(b,c[f],f,this);return b},clearItems:function(){this.map=
{}},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=dojo.dnd.getUniqueId();c=b.getAttribute("dndType");var d=b.getAttribute("dndData");a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){if(this.parent.firstChild)if(b){if(!c)c=this.parent.firstChild}else{if(c)c=c.nextSibling}else c=
null;if(c)for(b=0;b<a.length;++b){var d=this._normalizedCreator(a[b]);this.setItem(d.node.id,{data:d.data,type:d.type});this.parent.insertBefore(d.node,c)}else for(b=0;b<a.length;++b){d=this._normalizedCreator(a[b]);this.setItem(d.node.id,{data:d.data,type:d.type});this.parent.appendChild(d.node)}return this},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Container(b,
a)},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var a=this.parent.getElementsByTagName("tbody");if(a&&a.length)this.parent=a[0]}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b;){if(b==this.node)break;try{b=b.parentNode}catch(c){b=null}}if(!b){this._changeState("Container","Over");this.onOverEvent()}b=this._getChildByEvent(a);if(this.current!=b){this.current&&this._removeItemClass(this.current,
"Over");b&&this._addItemClass(b,"Over");this.current=b}},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null}this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){if(!this.skipForm||!dojo.dnd.isFormElement(a))dojo.stopEvent(a)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a;a=a.toLowerCase()+"State";
dojo.removeClass(this.node,c+this[a]);dojo.addClass(this.node,c+b);this[a]=b},_addItemClass:function(a,b){dojo.addClass(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){dojo.removeClass(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if(b==this.parent&&dojo.hasClass(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(a,b){a=(this.creator||this.defaultCreator).call(this,a,b);if(!dojo.isArray(a.type))a.type=["text"];if(!a.node.id)a.node.id=
dojo.dnd.getUniqueId();dojo.addClass(a.node,"dojoDndItem");return a}});dojo.dnd._createNode=function(a){if(!a)return dojo.dnd._createSpan;return function(b){return dojo.create(a,{innerHTML:b})}};dojo.dnd._createTrTd=function(a){var b=dojo.create("tr");dojo.create("td",{innerHTML:a},b);return b};dojo.dnd._createSpan=function(a){return dojo.create("span",{innerHTML:a})};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(a){a=a.tagName.toLowerCase();var b=
a=="tbody"||a=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[a]);return function(c,d){var f=c&&dojo.isObject(c),e;if(f&&c.tagName&&c.nodeType&&c.getAttribute){e=c.getAttribute("dndData")||c.innerHTML;f=(f=c.getAttribute("dndType"))?f.split(/\s*,\s*/):["text"];c=c}else{e=f&&c.data?c.data:c;f=f&&c.type?c.type:["text"];c=(d=="avatar"?dojo.dnd._createSpan:b)(String(e))}c.id=dojo.dnd.getUniqueId();return{node:c,data:e,type:f}}}}
if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(a,b){b||(b={});this.singular=b.singular;this.autoSync=b.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"))},singular:false,getSelectedNodes:function(){var a=
new dojo.NodeList,b=dojo.dnd._empty;for(var c in this.selection)c in b||a.push(dojo.byId(c));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(dojo.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=dojo.dnd._empty;for(var b in this.selection)if(!(b in a)){var c=dojo.byId(b);this.delItem(b);dojo.destroy(c)}this.anchor=null;this.selection=
{};return this},forInSelectedItems:function(a,b){b=b||dojo.global;var c=this.selection,d=dojo.dnd._empty;for(var f in c)f in d||a.call(b,this.getItem(f),f,this)},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor)if(!this.getItem(this.anchor.id))this.anchor=null;var a=[],b=dojo.dnd._empty;for(var c in this.selection)c in b||this.getItem(c)||a.push(c);dojo.forEach(a,function(d){delete this.selection[d]},this);return this},insertNodes:function(a,b,c,d){var f=this._normalizedCreator;
this._normalizedCreator=function(e,g){e=f.call(this,e,g);if(a){if(this.anchor){if(this.anchor!=e.node){this._removeItemClass(e.node,"Anchor");this._addItemClass(e.node,"Selected")}}else{this.anchor=e.node;this._removeItemClass(e.node,"Selected");this._addItemClass(this.anchor,"Anchor")}this.selection[e.node.id]=1}else{this._removeItemClass(e.node,"Selected");this._removeItemClass(e.node,"Anchor")}return e};dojo.dnd.Selector.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=f;return this},
destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Selector(b,a)},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!dojo.isCopyKey(a)&&!a.shiftKey&&this.current.id in this.selection){this.simpleSelection=true;a.button===dojo.mouseButtons.LEFT&&dojo.stopEvent(a)}else{if(!this.singular&&a.shiftKey){dojo.isCopyKey(a)||this._removeSelection();var b=
this.getAllNodes();if(b.length){if(!this.anchor){this.anchor=b[0];this._addItemClass(this.anchor,"Anchor")}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){for(var c=0;c<b.length;++c){var d=b[c];if(d==this.anchor||d==this.current)break}for(++c;c<b.length;++c){d=b[c];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}}else if(this.singular)if(this.anchor==this.current)dojo.isCopyKey(a)&&
this.selectNone();else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}else if(dojo.isCopyKey(a))if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor()}else if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id]}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected")}this.anchor=
this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}else if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}dojo.stopEvent(a)}},onMouseUp:function(){if(this.simpleSelection){this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}}},onMouseMove:function(){this.simpleSelection=
false},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove")},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent},_removeSelection:function(){var a=dojo.dnd._empty;for(var b in this.selection)if(!(b in a)){var c=dojo.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null}return this}})}
if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(a){this.manager=a;this.construct()},construct:function(){this.isA11y=dojo.hasClass(dojo.body(),"dijit_a11y");var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),b=this.manager.source,c,d=dojo.create("tbody",null,a),f=dojo.create("tr",null,d),e=dojo.create("td",null,f);this.isA11y&&
dojo.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},e);dojo.create("span",{innerHTML:b.generateText?this._generateText():""},e);var g=Math.min(5,this.manager.nodes.length),j=0;for(dojo.attr(f,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});j<g;++j){if(b.creator)c=b._normalizedCreator(b.getItem(this.manager.nodes[j].id).data,"avatar").node;else{c=this.manager.nodes[j].cloneNode(true);if(c.tagName.toLowerCase()=="tr"){f=dojo.create("table");e=dojo.create("tbody",null,f);e.appendChild(c);
c=f}}c.id="";f=dojo.create("tr",null,d);e=dojo.create("td",null,f);e.appendChild(c);dojo.attr(f,{"class":"dojoDndAvatarItem",style:{opacity:(9-j)/10}})}this.node=a},destroy:function(){dojo.destroy(this.node);this.node=false},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");if(this.isA11y){var a=dojo.byId("a11yIcon"),b="+";if(this.manager.canDropFlag&&!this.manager.copy)b="< ";else if(!this.manager.canDropFlag&&!this.manager.copy)b="o";else this.manager.canDropFlag||
(b="x");a.innerHTML=b}dojo.query("tr.dojoDndAvatarHeader td span"+(this.isA11y?" span":""),this.node).forEach(function(c){c.innerHTML=this._generateText()},this)},_generateText:function(){return this.manager.nodes.length.toString()}})}
if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[]},OFFSET_X:16,OFFSET_Y:16,overSource:function(a){if(this.avatar){this.target=a&&a.targetState!="Disabled"?a:null;this.canDropFlag=Boolean(this.target);this.avatar.update()}dojo.publish("/dnd/source/over",[a])},
outSource:function(a){if(this.avatar){if(this.target==a){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null])}}else dojo.publish("/dnd/source/over",[null])},startDrag:function(a,b,c){this.source=a;this.nodes=b;this.copy=Boolean(c);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[a,b,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,
"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];a="dojoDnd"+(c?"Copy":"Move");dojo.addClass(dojo.body(),a)},canDrop:function(a){a=Boolean(this.target&&a);if(this.canDropFlag!=a){this.canDropFlag=a;this.avatar.update()}},stopDrag:function(){dojo.removeClass(dojo.body(),"dojoDndCopy");dojo.removeClass(dojo.body(),"dojoDndMove");
dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new dojo.dnd.Avatar(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;if(b){dojo.dnd.autoScrollNodes(a);b=b.node.style;b.left=a.pageX+this.OFFSET_X+"px";b.top=a.pageY+this.OFFSET_Y+"px";a=Boolean(this.source.copyState(dojo.isCopyKey(a)));this.copy!=a&&this._setCopyStatus(a)}},onMouseUp:function(a){if(this.avatar){if(this.target&&
this.canDropFlag){a=Boolean(this.source.copyState(dojo.isCopyKey(a)));a=[this.source,this.nodes,a,this.target];dojo.publish("/dnd/drop/before",a);dojo.publish("/dnd/drop",a)}else dojo.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case dojo.keys.CTRL:a=Boolean(this.source.copyState(true));this.copy!=a&&this._setCopyStatus(a);break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break}},onKeyUp:function(a){if(this.avatar&&a.keyCode==
dojo.keys.CTRL){a=Boolean(this.source.copyState(false));this.copy!=a&&this._setCopyStatus(a)}},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.removeClass(dojo.body(),"dojoDnd"+(this.copy?"Move":"Copy"));dojo.addClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"))}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager)dojo.dnd._manager=new dojo.dnd.Manager;return dojo.dnd._manager}}
if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(a,b){dojo.mixin(this,dojo.mixin({},b));a=this.accept;if(a.length){this.accept={};for(b=0;b<a.length;++b)this.accept[a[b]]=1}this.mouseDown=this.isDragging=
false;this.targetBox=this.targetAnchor=null;this.before=true;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&dojo.addClass(this.node,"dojoDndSource");this.targetState="";this.accept&&dojo.addClass(this.node,"dojoDndTarget");this.horizontal&&dojo.addClass(this.node,"dojoDndHorizontal");this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")]},
checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,f=false,e=0;e<d.length;++e)if(d[e]in this.accept){f=true;break}if(!f)return false}return true},copyState:function(a,b){if(a)return true;if(arguments.length<2)b=this==dojo.dnd.manager().target;if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return false},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,
dojo.unsubscribe);this.targetAnchor=null},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Source(b,a)},onMouseMove:function(a){if(!(this.isDragging&&this.targetState=="Disabled")){dojo.dnd.Source.superclass.onMouseMove.call(this,a);var b=dojo.dnd.manager();if(this.isDragging){var c=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=dojo.position(this.current,true);c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2:a.pageY-this.targetBox.y<
this.targetBox.h/2}if(this.current!=this.targetAnchor||c!=this.before){this._markTargetAnchor(c);b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection))}}else if(this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){c=this.getSelectedNodes();c.length&&b.startDrag(this,c,this.copyState(dojo.isCopyKey(a),true))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||!dojo.dnd.isFormElement(a))){this.mouseDown=
true;this._lastX=a.pageX;this._lastY=a.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,a)}},onMouseUp:function(a){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,a)}},onDndSourceOver:function(a){if(this!=a){this.mouseDown=false;this.targetAnchor&&this._unmarkTargetAnchor()}else if(this.isDragging){a=dojo.dnd.manager();a.canDrop(this.targetState!="Disabled"&&(!this.current||a.source!=this||!(this.current.id in this.selection)))}},onDndStart:function(a,
b,c){this.autoSync&&this.sync();if(this.isSource)this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?"":"Disabled");this==a&&dojo.dnd.manager().overSource(this);this.isDragging=true},onDndDrop:function(a,b,c,d){this==d&&this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null}this.before=true;this.mouseDown=this.isDragging=false;this._changeState("Source",
"");this._changeState("Target","")},onDrop:function(a,b,c){this!=a?this.onDropExternal(a,b,c):this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var d=this._normalizedCreator;this._normalizedCreator=this.creator?function(f,e){return d.call(this,a.getItem(f.id).data,e)}:c?function(f){var e=a.getItem(f.id);f=f.cloneNode(true);f.id=dojo.dnd.getUniqueId();return{node:f,data:e.data,type:e.type}}:function(f){var e=a.getItem(f.id);a.delItem(f.id);return{node:f,data:e.data,type:e.type}};this.selectNone();
!c&&!this.creator&&a.selectNone();this.insertNodes(true,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,b){var c=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(d,f){return c.call(this,this.getItem(d.id).data,f)}:function(d){var f=this.getItem(d.id);d=d.cloneNode(true);d.id=dojo.dnd.getUniqueId();return{node:d,data:f.data,type:f.type}};else{if(!this.current)return;
this._normalizedCreator=function(d){var f=this.getItem(d.id);return{node:d,data:f.data,type:f.type}}}this._removeSelection();this.insertNodes(true,a,this.before,this.current);this._normalizedCreator=c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);this.isDragging&&this.targetState!="Disabled"&&this.onDraggingOver()},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);
dojo.dnd.manager().outSource(this);this.isDragging&&this.targetState!="Disabled"&&this.onDraggingOut()},_markTargetAnchor:function(a){if(!(this.current==this.targetAnchor&&this.before==a)){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=this.current;this.targetBox=null;this.before=a;if(this.targetAnchor)this._addItemClass(this.targetAnchor,this.before?"Before":"After")}},_unmarkTargetAnchor:function(){if(this.targetAnchor){this._removeItemClass(this.targetAnchor,
this.before?"Before":"After");this.targetBox=this.targetAnchor=null;this.before=true}},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if(!dojo.mouseButtons.isLeft(a))return false;if(!this.withHandles)return true;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(dojo.hasClass(a,"dojoDndHandle"))return true;if(dojo.hasClass(a,"dojoDndItem")||dojo.hasClass(a,"dojoDndIgnore"))break}return false}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,
{constructor:function(){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource")},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Target(b,a)}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(){this.autoSync=true},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.AutoSource(b,a)}})}
if(!dojo._hasResource["dojox.grid._View"]){dojo._hasResource["dojox.grid._View"]=true;dojo.provide("dojox.grid._View");(function(){var a=function(c){return c.style.cssText==undefined?c.getAttribute("style"):c.style.cssText};dojo.declare("dojox.grid._View",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:'<div class="dojoxGridView" wairole="presentation">\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" wairole="presentation">\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" wairole="presentation">\n\t\t\t<div dojoAttachPoint="headerContentNode" wairole="row"></div>\n\t\t</div>\n\t</div>\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" wairole="presentation" />\n\t<input type="checkbox" class="dojoxGridHiddenFocus" wairole="presentation" />\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" wairole="presentation">\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" wairole="presentation"></div>\n\t</div>\n</div>\n',
themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:dojox.grid._HeaderBuilder,_contentBuilderClass:dojox.grid._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.util.funnelEvents(this.headerNode,this,"doHeaderEvent",
["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!dojo._isBodyLtr())this.headerNodeContainer.style.width=""},destroy:function(){dojo.destroy(this.headerNode);delete this.headerNode;for(var c in this.rowNodes)dojo.destroy(this.rowNodes[c]);this.rowNodes={};this.source&&this.source.destroy();this.inherited(arguments)},focus:function(){dojo.isIE||dojo.isWebKit||dojo.isOpera?
this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(c){c=this.structure=c;this.viewWidth=c.width&&!isNaN(c.width)?c.width+"em":c.width||(c.noscroll?"auto":this.viewWidth);this._onBeforeRow=c.onBeforeRow||function(){};this._onAfterRow=c.onAfterRow||function(){};if(this.noscroll=c.noscroll)this.scrollboxNode.style.overflow="hidden";this.simpleStructure=Boolean(c.cells.length==1);this.testFlexCells();this.updateStructure()},_cleanupRowWidgets:function(c){c&&dojo.forEach(dojo.query("[widgetId]",
c).map(dijit.byNode),function(d){if(d._destroyOnRemove){d.destroy();delete d}else d.domNode&&d.domNode.parentNode&&d.domNode.parentNode.removeChild(d.domNode)})},onBeforeRow:function(c,d){this._onBeforeRow(c,d);c>=0&&this._cleanupRowWidgets(this.getRowNode(c))},onAfterRow:function(c,d,f){this._onAfterRow(c,d,f);var e=this.grid;dojo.forEach(dojo.query(".dojoxGridStubNode",f),function(g){if(g&&g.parentNode){var j=g.getAttribute("linkWidget"),k=window.parseInt(dojo.attr(g,"cellIdx"),10);e.getCell(k);
if(j=dijit.byId(j)){g.parentNode.replaceChild(j.domNode,g);j._started||j.startup()}else g.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=false;for(var c=0,d;d=this.structure.cells[c];c++)for(var f=0,e;e=d[f];f++){e.view=this;this.flexCells=this.flexCells||e.isFlex()}return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){var c=this.hasVScrollbar(),d=dojo.style(this.scrollboxNode,"overflow");if(this.noscroll||!d||d==
"hidden")c=false;else if(d=="scroll")c=true;return c?dojox.html.metrics.getScrollbar().w:0},getColumnsWidth:function(){var c=this.headerContentNode;return c&&c.firstChild?c.firstChild.offsetWidth:0},setColumnsWidth:function(c){this.headerContentNode.firstChild.style.width=c+"px";if(this.viewWidth)this.viewWidth=c+"px"},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+
"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1}var c=this.grid.layout.cells,d=dojo.hitch(this,function(j,k){k=k?-1:1;j=this.header.getCellNodeIndex(j)+k;for(var i=c[j];i&&i.getHeaderNode()&&i.getHeaderNode().style.display=="none";){j+=k;i=c[j]}if(i)return i.getHeaderNode();return null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&
this.source.destroy();var f="dojoxGrid_bottomMarker",e="dojoxGrid_topMarker";this.bottomMarker&&dojo.destroy(this.bottomMarker);this.bottomMarker=dojo.byId(f);this.topMarker&&dojo.destroy(this.topMarker);this.topMarker=dojo.byId(e);if(!this.bottomMarker){this.bottomMarker=dojo.create("div",{id:f,"class":"dojoxGridColPlaceBottom"},dojo.body());this._hide(this.bottomMarker);this.topMarker=dojo.create("div",{id:e,"class":"dojoxGridColPlaceTop"},dojo.body());this._hide(this.topMarker)}this.arrowDim=dojo.contentBox(this.bottomMarker);
var g=dojo.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new dojo.dnd.Source(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:dojo.hitch(this,function(j){this.header.decorateEvent(j);if((this.header.overRightResizeArea(j)||this.header.overLeftResizeArea(j))&&this.header.canResize(j)&&!this.header.moveable)this.header.beginColumnResize(j);else{this.grid.headerMenu&&this.grid.headerMenu.onCancel(true);
if(j.button===(dojo.isIE?1:0))dojo.dnd.Source.prototype.onMouseDown.call(this.source,j)}}),onMouseOver:dojo.hitch(this,function(j){var k=this.source;k._getChildByEvent(j)&&dojo.dnd.Source.prototype.onMouseOver.apply(k,arguments)}),_markTargetAnchor:dojo.hitch(this,function(j){var k=this.source;if(!(k.current==k.targetAnchor&&k.before==j)){if(k.targetAnchor&&d(k.targetAnchor,k.before))k._removeItemClass(d(k.targetAnchor,k.before),k.before?"After":"Before");dojo.dnd.Source.prototype._markTargetAnchor.call(k,
j);var i=j?k.targetAnchor:d(k.targetAnchor,k.before);j=0;if(!i){i=k.targetAnchor;j=dojo.contentBox(i).w+this.arrowDim.w/2+2}i=(dojo.position||dojo._abs)(i,true);j=Math.floor(i.x-this.arrowDim.w/2+j);dojo.style(this.bottomMarker,"visibility","visible");dojo.style(this.topMarker,"visibility","visible");dojo.style(this.bottomMarker,{left:j+"px",top:g+i.y+"px"});dojo.style(this.topMarker,{left:j+"px",top:i.y-this.arrowDim.h+"px"});if(k.targetAnchor&&d(k.targetAnchor,k.before))k._addItemClass(d(k.targetAnchor,
k.before),k.before?"After":"Before")}}),_unmarkTargetAnchor:dojo.hitch(this,function(){var j=this.source;if(j.targetAnchor){if(j.targetAnchor&&d(j.targetAnchor,j.before))j._removeItemClass(d(j.targetAnchor,j.before),j.before?"After":"Before");this._hide(this.bottomMarker);this._hide(this.topMarker);dojo.dnd.Source.prototype._unmarkTargetAnchor.call(j)}}),destroy:dojo.hitch(this,function(){dojo.disconnect(this._source_conn);dojo.unsubscribe(this._source_sub);dojo.dnd.Source.prototype.destroy.call(this.source);
if(this.bottomMarker){dojo.destroy(this.bottomMarker);delete this.bottomMarker}if(this.topMarker){dojo.destroy(this.topMarker);delete this.topMarker}}),onDndCancel:dojo.hitch(this,function(){dojo.dnd.Source.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker)})});this._source_conn=dojo.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=dojo.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup()}},_hide:function(c){dojo.style(c,
{left:"-10000px",top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(c){if(dojo.dnd.manager().target===this.source){this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var d=this.grid.views.views;c=d[c.viewIndex];d=d[this.index];if(d!=c){c.convertColPctToFixed();d.convertColPctToFixed()}}},_onDndDrop:function(c,d){if(dojo.dnd.manager().target!==this.source){if(dojo.dnd.manager().source===this.source)this._removingColumn=true}else{this._hide(this.bottomMarker);
this._hide(this.topMarker);var f=function(i){return i?dojo.attr(i,"idx"):null},e=dojo.marginBox(d[0]).w;if(c.viewIndex!==this.index){var g=this.grid.views.views,j=g[c.viewIndex];g=g[this.index];j.viewWidth&&j.viewWidth!="auto"&&j.setColumnsWidth(j.getColumnsWidth()-e);g.viewWidth&&g.viewWidth!="auto"&&g.setColumnsWidth(g.getColumnsWidth())}e=this.source._targetNode;j=this.source._beforeTarget;g=this.grid.layout;var k=this.index;delete this.source._targetNode;delete this.source._beforeTarget;g.moveColumn(c.viewIndex,
k,f(d[0]),f(e),j)}},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth}dojox.grid.util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(c){var d=c.name||c.grid.getCellName(c),f=['<div class="dojoxGridSortNode'];if(c.index!=c.grid.getSortIndex())f.push('">');else f=f.concat([" ",
c.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',c.grid.sortInfo>0?"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div>']);f=f.concat([d,"</div>"]);return f.join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasHScrollbar:function(c){var d=this._hasHScroll||false;if(this._hasHScroll==undefined||c)if(this.noscroll)this._hasHScroll=false;else{c=dojo.style(this.scrollboxNode,"overflow");this._hasHScroll=
c=="hidden"?false:c=="scroll"?true:this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth}d!==this._hasHScroll&&this.grid.update();return this._hasHScroll},hasVScrollbar:function(c){var d=this._hasVScroll||false;if(this._hasVScroll==undefined||c)if(this.noscroll)this._hasVScroll=false;else{c=dojo.style(this.scrollboxNode,"overflow");this._hasVScroll=c=="hidden"?false:c=="scroll"?true:this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight}d!==this._hasVScroll&&
this.grid.update();return this._hasVScroll},convertColPctToFixed:function(){var c=false;this.grid.initialWidth="";var d=dojo.query("th",this.headerContentNode),f=dojo.map(d,function(e,g){var j=e.style.width;dojo.attr(e,"vIdx",g);if(j&&j.slice(-1)=="%")c=true;else if(j&&j.slice(-2)=="px")return window.parseInt(j,10);return dojo.contentBox(e).w});if(c){dojo.forEach(this.grid.layout.cells,function(e,g){if(e.view==this)if((e=e.view.getHeaderCellNode(e.index))&&dojo.hasAttr(e,"vIdx")){var j=window.parseInt(dojo.attr(e,
"vIdx"));this.setColWidth(g,f[j]);dojo.removeAttr(e,"vIdx")}},this);return true}return false},adaptHeight:function(c){if(!this.grid._autoHeight){var d=this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight,f=this,e=function(){var g;for(var j in f.grid.views.views){g=f.grid.views.views[j];if(g!==f&&g.hasHScrollbar())return true}return false};if(c||this.noscroll&&e())d-=dojox.html.metrics.getScrollbar().h;dojox.grid.util.setStyleHeightPx(this.scrollboxNode,
d)}this.hasVScrollbar(true)},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth}var c=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(this._removingColumn){c=Math.min(c,this.getColumnsWidth())+"px";this._removingColumn=false}else c=Math.max(c,this.getColumnsWidth())+"px";var d=this.contentNode;d.style.width=c;this.hasHScrollbar(true)},setSize:function(c,d){var f=this.domNode.style,e=this.headerNode.style;
if(c){f.width=c;e.width=c}f.height=d>=0?d+"px":""},renderRow:function(c){var d=this.createRowNode(c);this.buildRow(c,d);this.grid.edit.restore(this,c);return d},createRowNode:function(c){var d=document.createElement("div");d.className=this.classTag+"Row";if(this instanceof dojox.grid._RowSelector)dojo.attr(d,"role","presentation");else{dojo.attr(d,"role","row");this.grid.selectionMode!="none"&&dojo.attr(d,"aria-selected","false")}d[dojox.grid.util.gridViewTag]=this.id;d[dojox.grid.util.rowIndexTag]=
c;return this.rowNodes[c]=d},buildRow:function(c,d){this.buildRowContent(c,d);this.styleRow(c,d)},buildRowContent:function(c,d){d.innerHTML=this.content.generateHtml(c,c);if(this.flexCells&&this.contentWidth)d.firstChild.style.width=this.contentWidth;dojox.grid.util.fire(this,"onAfterRow",[c,this.structure.cells,d])},rowRemoved:function(c){c>=0&&this._cleanupRowWidgets(this.getRowNode(c));this.grid.edit.save(this,c);delete this.rowNodes[c]},getRowNode:function(c){return this.rowNodes[c]},getCellNode:function(c,
d){if(c=this.getRowNode(c))return this.content.getCellNode(c,d)},getHeaderCellNode:function(c){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,c)},styleRow:function(c,d){d._style=a(d);this.styleRowNode(c,d)},styleRowNode:function(c,d){d&&this.doStyleRowNode(c,d)},doStyleRowNode:function(c,d){this.grid.styleRowNode(c,d)},updateRow:function(c){var d=this.getRowNode(c);if(d){d.style.height="";this.buildRow(c,d)}return d},updateRowStyles:function(c){this.styleRowNode(c,
this.getRowNode(c))},lastTop:0,firstScroll:0,doscroll:function(){var c=dojo._isBodyLtr();if(this.firstScroll<2){if(!c&&this.firstScroll==1||c&&this.firstScroll===0){var d=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE)this.headerNodeContainer.style.width=d.w+this.getScrollbarWidth()+"px";else if(dojo.isMoz){this.headerNodeContainer.style.width=d.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=c?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-
this.scrollboxNode.clientWidth}}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;c=this.scrollboxNode.scrollTop;c!=this.lastTop&&this.grid.scrollTo(c)},setScrollTop:function(c){this.lastTop=c;this.scrollboxNode.scrollTop=c;return this.scrollboxNode.scrollTop},doContentEvent:function(c){this.content.decorateEvent(c)&&this.grid.onContentEvent(c)},doHeaderEvent:function(c){this.header.decorateEvent(c)&&this.grid.onHeaderEvent(c)},dispatchContentEvent:function(c){return this.content.dispatchEvent(c)},
dispatchHeaderEvent:function(c){return this.header.dispatchEvent(c)},setColWidth:function(c,d){this.grid.setCellWidth(c,d+"px")},update:function(){if(this.domNode){this.content.update();this.grid.update();var c=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=c;this.headerNode.scrollLeft=c}}});dojo.declare("dojox.grid._GridAvatar",dojo.dnd.Avatar,{construct:function(){var c=dojo.doc,d=c.createElement("table");d.cellPadding=d.cellSpacing="0";d.className="dojoxGridDndAvatar";d.style.position=
"absolute";d.style.zIndex=1999;d.style.margin="0px";var f=c.createElement("tbody"),e=c.createElement("tr"),g=c.createElement("td"),j=c.createElement("td");e.className="dojoxGridDndAvatarItem";j.className="dojoxGridDndAvatarItemImage";j.style.width="16px";var k=this.manager.source;if(k.creator)k=k._normalizedCreator(k.getItem(this.manager.nodes[0].id).data,"avatar").node;else{k=this.manager.nodes[0].cloneNode(true);var i,l;if(k.tagName.toLowerCase()=="tr"){i=c.createElement("table");l=c.createElement("tbody");
l.appendChild(k);i.appendChild(l);k=i}else if(k.tagName.toLowerCase()=="th"){i=c.createElement("table");l=c.createElement("tbody");c=c.createElement("tr");i.cellPadding=i.cellSpacing="0";c.appendChild(k);l.appendChild(c);i.appendChild(l);k=i}}k.id="";g.appendChild(k);e.appendChild(j);e.appendChild(g);dojo.style(e,"opacity",0.9);f.appendChild(e);d.appendChild(f);this.node=d;d=dojo.dnd.manager();this.oldOffsetY=d.OFFSET_Y;d.OFFSET_Y=1},destroy:function(){dojo.dnd.manager().OFFSET_Y=this.oldOffsetY;
this.inherited(arguments)}});var b=dojo.dnd.manager().makeAvatar;dojo.dnd.manager().makeAvatar=function(){var c=this.source;if(c.viewIndex!==undefined&&!dojo.hasClass(dojo.body(),"dijit_a11y"))return new dojox.grid._GridAvatar(this);return b.call(dojo.dnd.manager())}})()}
if(!dojo._hasResource["dojox.grid._RowSelector"]){dojo._hasResource["dojox.grid._RowSelector"]=true;dojo.provide("dojox.grid._RowSelector");dojo.declare("dojox.grid._RowSelector",dojox.grid._View,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(a,b){a=this.contentWidth||
0;b.innerHTML='<table class="dojoxGridRowbarTable" style="width:'+a+'px;height:1px;" border="0" cellspacing="0" cellpadding="0" role="presentation"><tr><td class="dojoxGridRowbarInner">&nbsp;</td></tr></table>'},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){if(!("contentWidth"in this)&&this.contentNode)this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth},doStyleRowNode:function(a,b){var c=["dojoxGridRowbar dojoxGridNonNormalizedCell"];
this.grid.rows.isOver(a)&&c.push("dojoxGridRowbarOver");this.grid.selection.isSelected(a)&&c.push("dojoxGridRowbarSelected");b.className=c.join(" ")},domouseover:function(a){this.grid.onMouseOverRow(a)},domouseout:function(a){this.isIntraRowEvent(a)||this.grid.onMouseOutRow(a)}})}
if(!dojo._hasResource["dojox.grid._Layout"]){dojo._hasResource["dojox.grid._Layout"]=true;dojo.provide("dojox.grid._Layout");dojo.declare("dojox.grid._Layout",null,{constructor:function(a){this.grid=a},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(a,b,c,d,f){var e=this.structure[a].cells[0],g=this.structure[b].cells[0],j=null,k=j=0;a=0;for(var i;i=e[a];a++)if(i.index==c){j=a;break}j=e.splice(j,1)[0];j.view=this.grid.views.views[b];for(a=0;i=g[a];a++)if(i.index==d){k=a;break}f||(k+=
1);g.splice(k,0,j);if(c=this.grid.getCell(this.grid.getSortIndex()))c._currentlySorted=this.grid.getSortAsc();this.cells=[];for(a=c=0;b=this.structure[a];a++)for(d=0;f=b.cells[d];d++)for(e=0;i=f[e];e++){i.index=c;this.cells.push(i);if("_currentlySorted"in i){g=c+1;g*=i._currentlySorted?1:-1;this.grid.sortInfo=g;delete i._currentlySorted}c++}this.grid.setupHeaderMenu()},setColumnVisibility:function(a,b){a=this.cells[a];if(a.hidden==b){a.hidden=!b;b=a.view;var c=b.viewWidth;if(c&&c!="auto")b._togglingColumn=
dojo.marginBox(a.getHeaderNode()).w||0;b.update();return true}else return false},addCellDef:function(a,b,c){var d=this,f=function(e){var g=0;if(e.colSpan>1)g=0;else{g=e.width||d._defaultCellProps.width||d.defaultWidth;isNaN(g)||(g+="em")}return g};a={grid:this.grid,subrow:a,layoutIndex:b,index:this.cells.length};if(c&&c instanceof dojox.grid.cells._Base){b=dojo.clone(c);a.unitWidth=f(b._props);return b=dojo.mixin(b,this._defaultCellProps,c._props,a)}b=c.type||this._defaultCellProps.type||dojox.grid.cells.Cell;
a.unitWidth=f(c);return new b(dojo.mixin({},this._defaultCellProps,c,a))},addRowDef:function(a,b){for(var c=[],d=0,f=0,e=true,g=0,j;j=b[g];g++){j=this.addCellDef(a,g,j);c.push(j);this.cells.push(j);if(e&&j.relWidth)d+=j.relWidth;else if(j.width){j=j.width;if(typeof j=="string"&&j.slice(-1)=="%")f+=window.parseInt(j,10);else if(j=="auto")e=false}}d&&e&&dojo.forEach(c,function(k){if(k.relWidth)k.width=k.unitWidth=k.relWidth/d*(100-f)+"%"});return c},addRowsDef:function(a){var b=[];if(dojo.isArray(a))if(dojo.isArray(a[0]))for(var c=
0,d;a&&(d=a[c]);c++)b.push(this.addRowDef(c,d));else b.push(this.addRowDef(0,a));return b},addViewDef:function(a){this._defaultCellProps=a.defaultCell||{};a.width&&a.width=="auto"&&delete a.width;return dojo.mixin({},a,{cells:this.addRowsDef(a.rows||a.cells)})},setStructure:function(a){this.fieldIndex=0;this.cells=[];var b=this.structure=[];if(this.grid.rowSelector){var c={type:dojox._scopeName+".grid._RowSelector"};if(dojo.isString(this.grid.rowSelector)){var d=this.grid.rowSelector;if(d=="false")c=
null;else if(d!="true")c.width=d}else this.grid.rowSelector||(c=null);c&&b.push(this.addViewDef(c))}var f=function(k){return"name"in k||"field"in k||"get"in k};c=function(k){if(dojo.isArray(k))if(dojo.isArray(k[0])||f(k[0]))return true;return false};d=function(k){return k!==null&&dojo.isObject(k)&&("cells"in k||"rows"in k||"type"in k&&!f(k))};if(dojo.isArray(a)){for(var e=false,g=0,j;j=a[g];g++)if(d(j)){e=true;break}if(e)for(g=0;j=a[g];g++)if(c(j))b.push(this.addViewDef({cells:j}));else d(j)&&b.push(this.addViewDef(j));
else b.push(this.addViewDef({cells:a}))}else d(a)&&b.push(this.addViewDef(a));this.cellCount=this.cells.length;this.grid.setupHeaderMenu()}})}
if(!dojo._hasResource["dojox.grid._ViewManager"]){dojo._hasResource["dojox.grid._ViewManager"]=true;dojo.provide("dojox.grid._ViewManager");dojo.declare("dojox.grid._ViewManager",null,{constructor:function(a){this.grid=a},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(a){a.idx=this.views.length;this.views.push(a)},destroyViews:function(){for(var a=0,b;b=this.views[a];a++)b.destroy();this.views=[]},getContentNodes:function(){for(var a=
[],b=0,c;c=this.views[b];b++)a.push(c.contentNode);return a},forEach:function(a){for(var b=0,c;c=this.views[b];b++)a(c,b)},onEach:function(a,b){b=b||[];for(var c=0,d;d=this.views[c];c++)a in d&&d[a].apply(d,b)},normalizeHeaderNodeHeight:function(){for(var a=[],b=0,c;c=this.views[b];b++)c.headerContentNode.firstChild&&a.push(c.headerContentNode);this.normalizeRowNodeHeights(a)},normalizeRowNodeHeights:function(a){var b=0,c=[];if(this.grid.rowHeight)b=this.grid.rowHeight;else{if(a.length<=1)return;
for(var d=0,f;f=a[d];d++)if(!dojo.hasClass(f,"dojoxGridNonNormalizedCell")){c[d]=f.firstChild.offsetHeight;b=Math.max(b,c[d])}b=b>=0?b:0;dojo.isMoz&&b&&b++}for(d=0;f=a[d];d++)if(c[d]!=b)f.firstChild.style.height=b+"px"},resetHeaderNodeHeight:function(){for(var a=0,b;b=this.views[a];a++)if(b=b.headerContentNode.firstChild)b.style.height=""},renormalizeRow:function(a){for(var b=[],c=0,d,f;(d=this.views[c])&&(f=d.getRowNode(a));c++){f.firstChild.style.height="";b.push(f)}this.normalizeRowNodeHeights(b)},
getViewWidth:function(a){return this.views[a].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(b){b.headerContentNode.style.height=""});var a=0;this.forEach(function(b){a=Math.max(b.headerNode.offsetHeight,a)});return a},measureContent:function(){var a=0;this.forEach(function(b){a=Math.max(b.domNode.offsetHeight,a)});return a},findClient:function(){var a=this.grid.elasticView||-1;if(a<0)for(var b=1,c;c=this.views[b];b++)if(c.viewWidth){for(b=
1;c=this.views[b];b++)if(!c.viewWidth){a=b;break}break}if(a<0)a=Math.floor(this.views.length/2);return a},arrange:function(a,b){var c,d,f,e=this.views.length,g=b<=0?e:this.findClient(),j=function(i,l){var m=i.domNode.style,n=i.headerNode.style;if(dojo._isBodyLtr()){m.left=l+"px";n.left=l+"px"}else{m.right=l+"px";if(dojo.isMoz){n.right=l+i.getScrollbarWidth()+"px";n.width=parseInt(n.width,10)-i.getScrollbarWidth()+"px"}else n.right=l+"px"}m.top="0px";n.top=0};for(c=0;(d=this.views[c])&&c<g;c++){f=
this.getViewWidth(c);d.setSize(f,0);j(d,a);f=d.headerContentNode&&d.headerContentNode.firstChild?d.getColumnsWidth()+d.getScrollbarWidth():d.domNode.offsetWidth;a+=f}c++;b=b;for(var k=e-1;(d=this.views[k])&&c<=k;k--){f=this.getViewWidth(k);d.setSize(f,0);f=d.domNode.offsetWidth;b-=f;j(d,b)}if(g<e){d=this.views[g];f=Math.max(1,b-a);d.setSize(f+"px",0);j(d,a)}return a},renderRow:function(a,b,c){for(var d=[],f=0,e,g;(e=this.views[f])&&(g=b[f]);f++){e=e.renderRow(a);g.appendChild(e);d.push(e)}c||this.normalizeRowNodeHeights(d)},
rowRemoved:function(a){this.onEach("rowRemoved",[a])},updateRow:function(a,b){for(var c=0,d;d=this.views[c];c++)d.updateRow(a);b||this.renormalizeRow(a)},updateRowStyles:function(a){this.onEach("updateRowStyles",[a])},setScrollTop:function(a){for(var b=a,c=0,d;d=this.views[c];c++){b=d.setScrollTop(a);if(dojo.isIE&&d.headerNode&&d.scrollboxNode)d.headerNode.scrollLeft=d.scrollboxNode.scrollLeft}return b},getFirstScrollingView:function(){for(var a=0,b;b=this.views[a];a++)if(b.hasHScrollbar()||b.hasVScrollbar())return b;
return null}})}
if(!dojo._hasResource["dojox.grid._RowManager"]){dojo._hasResource["dojox.grid._RowManager"]=true;dojo.provide("dojox.grid._RowManager");(function(){var a=function(b,c){if(b.style.cssText==undefined)b.setAttribute("style",c);else b.style.cssText=c};dojo.declare("dojox.grid._RowManager",null,{constructor:function(b){this.grid=b},linesToEms:2,overRow:-2,prepareStylingRow:function(b,c){return{index:b,node:c,odd:Boolean(b&1),selected:!!this.grid.selection.isSelected(b),over:this.isOver(b),customStyles:"",
customClasses:"dojoxGridRow"}},styleRowNode:function(b,c){b=this.prepareStylingRow(b,c);this.grid.onStyleRow(b);this.applyStyles(b)},applyStyles:function(b){b=b;b.node.className=b.customClasses;var c=b.node.style.height;a(b.node,b.customStyles+";"+(b.node._style||""));b.node.style.height=c},updateStyles:function(b){this.grid.updateRowStyles(b)},setOverRow:function(b){var c=this.overRow;this.overRow=b;if(c!=this.overRow&&(dojo.isString(c)||c>=0))this.updateStyles(c);this.updateStyles(this.overRow)},
isOver:function(b){return this.overRow==b&&!dojo.hasClass(this.grid.domNode,"dojoxGridColumnResizing")}})})()}
if(!dojo._hasResource["dojox.grid._FocusManager"]){dojo._hasResource["dojox.grid._FocusManager"]=true;dojo.provide("dojox.grid._FocusManager");dojo.declare("dojox.grid._FocusManager",null,{constructor:function(a){this.grid=a;this.cell=null;this.rowIndex=-1;this._connects=[];this._connects.push(dojo.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(dojo.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onfocus",this,
"doLastNodeFocus"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(dojo.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(dojo.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);delete this.grid;delete this.cell},_colHeadNode:null,_colHeadFocusIdx:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=
this.grid.views.getFirstScrollingView()||this.focusView;this._initColumnHeaders()},isFocusCell:function(a,b){return this.cell==a&&this.rowIndex==b},isLastFocusCell:function(){if(this.cell)return this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1;return false},isFirstFocusCell:function(){if(this.cell)return this.rowIndex===0&&this.cell.index===0;return false},isNoFocusCell:function(){return this.rowIndex<0||!this.cell},isNavHeader:function(){return!!this._colHeadNode},
getHeaderIndex:function(){return this._colHeadNode?dojo.indexOf(this._findHeaderCells(),this._colHeadNode):-1},_focusifyCellNode:function(a){var b=this.cell&&this.cell.getNode(this.rowIndex);if(b){dojo.toggleClass(b,this.focusClass,a);if(a){a=this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.util.fire(b,"focus");if(a)this.cell.view.scrollboxNode.scrollLeft=a}}catch(c){}}}},_delayedCellFocus:function(){if(!(this.isNavHeader()||!this.grid._focused)){var a=this.cell&&this.cell.getNode(this.rowIndex);
if(a)try{if(!this.grid.edit.isEditing()){dojo.toggleClass(a,this.focusClass,true);dojo.removeAttr(this.grid.domNode,"aria-activedescendant");dojox.grid.util.fire(a,"focus")}}catch(b){}}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();this.grid.domNode.focus()}},_initColumnHeaders:function(){for(var a=this._findHeaderCells(),b=0;b<a.length;b++){this._connects.push(dojo.connect(a[b],"onfocus",this,"doColHeaderFocus"));this._connects.push(dojo.connect(a[b],"onblur",this,"doColHeaderBlur"))}},
_findHeaderCells:function(){for(var a=dojo.query("th",this.grid.viewsHeaderNode),b=[],c=0;c<a.length;c++){var d=a[c],f=dojo.hasAttr(d,"tabIndex"),e=dojo.attr(d,"tabIndex");f&&e<0&&b.push(d)}return b},_setActiveColHeader:function(a,b,c){dojo.attr(this.grid.domNode,"aria-activedescendant",a.id);c!=null&&c>=0&&c!=b&&dojo.toggleClass(this._findHeaderCells()[c],this.focusClass,false);dojo.toggleClass(a,this.focusClass,true);this._colHeadNode=a;this._colHeadFocusIdx=b;this._scrollHeader(this._colHeadFocusIdx)},
scrollIntoView:function(){var a=this.cell?this._scrollInfo(this.cell):null;if(!a||!a.s)return null;var b=this.grid.scroller.findScrollTop(this.rowIndex);if(a.n&&a.sr)if(a.n.offsetLeft+a.n.offsetWidth>a.sr.l+a.sr.w)a.s.scrollLeft=a.n.offsetLeft+a.n.offsetWidth-a.sr.w;else if(a.n.offsetLeft<a.sr.l)a.s.scrollLeft=a.n.offsetLeft;if(a.r&&a.sr)if(b+a.r.offsetHeight>a.sr.t+a.sr.h)this.grid.setScrollTop(b+a.r.offsetHeight-a.sr.h);else b<a.sr.t&&this.grid.setScrollTop(b);return a.s.scrollLeft},_scrollInfo:function(a,
b){if(a){var c=a,d=c.view.scrollboxNode,f={w:d.clientWidth,l:d.scrollLeft,t:d.scrollTop,h:d.clientHeight},e=c.view.getRowNode(this.rowIndex);return{c:c,s:d,sr:f,n:b?b:a.getNode(this.rowIndex),r:e}}return null},_scrollHeader:function(a){var b=null;if(this._colHeadNode){var c=this.grid.getCell(a);b=this._scrollInfo(c,c.getNode(0))}if(b&&b.s&&b.sr&&b.n){a=b.sr.l+b.sr.w;if(b.n.offsetLeft+b.n.offsetWidth>a)b.s.scrollLeft=b.n.offsetLeft+b.n.offsetWidth-b.sr.w;else if(b.n.offsetLeft<b.sr.l)b.s.scrollLeft=
b.n.offsetLeft;else if(dojo.isIE<=7&&c&&c.view.headerNode)c.view.headerNode.scrollLeft=b.s.scrollLeft}},_isHeaderHidden:function(){var a=this.focusView;if(!a)for(var b=0,c;c=this.grid.views.views[b];b++)if(c.headerNode){a=c;break}return a&&dojo.getComputedStyle(a.headerNode).display=="none"},colSizeAdjust:function(a,b,c){var d=this._findHeaderCells(),f=this.focusView;if(!f)for(var e=0,g;g=this.grid.views.views[e];e++)if(g.header.tableMap.map){f=g;break}e=d[b];if(!(!f||b==d.length-1&&b===0)){f.content.baseDecorateEvent(a);
a.cellNode=e;a.cellIndex=f.content.getCellNodeIndex(a.cellNode);a.cell=a.cellIndex>=0?this.grid.getCell(a.cellIndex):null;if(f.header.canResize(a)){b={l:c};a=f.header.colResizeSetup(a,false);f.header.doResizeColumn(a,null,b);f.update()}}},styleRow:function(){},setFocusIndex:function(a,b){this.setFocusCell(this.grid.getCell(b),a)},setFocusCell:function(a,b){if(a&&!this.isFocusCell(a,b)){this.tabbingOut=false;if(this._colHeadNode){dojo.toggleClass(this._colHeadNode,this.focusClass,false);dojo.removeAttr(this.grid.domNode,
"aria-activedescendant")}this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=a;this.rowIndex=b;this._focusifyCellNode(true)}dojo.isOpera?setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1):this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var a=this.rowIndex,b=this.cell.index+1,c=this.grid.layout.cellCount-1,d=this.grid.rowCount-1;if(b>c){b=0;a++}if(a>d){b=c;a=d}if(this.grid.edit.isEditing()){c=
this.grid.getCell(b);if(!this.isLastFocusCell()&&!c.editable){this.cell=c;this.rowIndex=a;this.next();return}}this.setFocusIndex(a,b)}},previous:function(){if(this.cell){var a=this.rowIndex||0,b=(this.cell.index||0)-1;if(b<0){b=this.grid.layout.cellCount-1;a--}if(a<0)b=a=0;if(this.grid.edit.isEditing()){var c=this.grid.getCell(b);if(!this.isFirstFocusCell()&&!c.editable){this.cell=c;this.rowIndex=a;this.previous();return}}this.setFocusIndex(a,b)}},move:function(a,b){var c=b<0?-1:1;if(this.isNavHeader()){a=
this._findHeaderCells();var d=currentIdx=dojo.indexOf(a,this._colHeadNode);for(currentIdx+=b;currentIdx>=0&&currentIdx<a.length&&a[currentIdx].style.display=="none";)currentIdx+=c;currentIdx>=0&&currentIdx<a.length&&this._setActiveColHeader(a[currentIdx],currentIdx,d)}else if(this.cell){var f=this.grid.scroller;d=this.rowIndex;var e=this.grid.rowCount-1;e=Math.min(e,Math.max(0,d+a));if(a)if(a>0)e>f.getLastPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop+f.findScrollTop(e)-f.findScrollTop(d));
else a<0&&e<=f.getPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop-f.findScrollTop(d)-f.findScrollTop(e));f=this.grid.layout.cellCount-1;var g=this.cell.index;b=Math.min(f,Math.max(0,g+b));for(var j=this.grid.getCell(b);b>=0&&b<f&&j&&j.hidden===true;){b+=c;j=this.grid.getCell(b)}if(!j||j.hidden===true)b=g;this.setFocusIndex(e,b);a&&this.grid.updateRow(d)}},previousKey:function(a){if(this.grid.edit.isEditing()){dojo.stopEvent(a);this.previous()}else if(!this.isNavHeader()&&!this._isHeaderHidden()){this.focusHeader();
dojo.stopEvent(a)}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){dojo.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null}this._focusifyCellNode(false)}},nextKey:function(a){if(a.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();dojo.stopEvent(a)}else if(this.isNavHeader()){dojo.toggleClass(this._colHeadNode,this.focusClass,false);this.findAndFocusGridCell()||this.tabOut(this.grid.lastFocusNode);
this._colHeadNode=this._colHeadFocusIdx=null}else if(this.grid.edit.isEditing()){dojo.stopEvent(a);this.next()}else this.tabOut(this.grid.lastFocusNode)},tabOut:function(a){this.tabbingOut=true;a.focus()},focusGridView:function(){dojox.grid.util.fire(this.focusView,"focus")},focusGrid:function(){this.focusGridView();this._focusifyCellNode(true)},findAndFocusGridCell:function(){var a=true,b=this.grid.rowCount===0;if(this.isNoFocusCell()&&!b){b=0;var c=this.grid.getCell(b);if(c.hidden)b=this.isNavHeader()?
this._colHeadFocusIdx:0;this.setFocusIndex(0,b)}else if(this.cell&&!b){this.focusView&&!this.focusView.rowNodes[this.rowIndex]&&this.grid.scrollToRow(this.rowIndex);this.focusGrid()}else a=false;this._colHeadNode=this._colHeadFocusIdx=null;return a},focusHeader:function(){var a=this._findHeaderCells(),b=this._colHeadFocusIdx;if(this._isHeaderHidden())this.findAndFocusGridCell();else if(!this._colHeadFocusIdx)this._colHeadFocusIdx=this.isNoFocusCell()?0:this.cell.index;for(this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&
this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<a.length&&this._colHeadNode.style.display=="none";){this._colHeadFocusIdx++;this._colHeadNode=a[this._colHeadFocusIdx]}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false)}else this.findAndFocusGridCell()},doFocus:function(a){if(!(a&&a.target!=a.currentTarget)){this.tabbingOut||this.focusHeader();this.tabbingOut=
false}dojo.stopEvent(a)},doBlur:function(a){dojo.stopEvent(a)},doLastNodeFocus:function(a){if(this.tabbingOut)this._focusifyCellNode(false);else if(this.grid.rowCount>0){this.isNoFocusCell()&&this.setFocusIndex(0,0);this._focusifyCellNode(true)}else this.focusHeader();this.tabbingOut=false;dojo.stopEvent(a)},doLastNodeBlur:function(a){dojo.stopEvent(a)},doColHeaderFocus:function(a){this._setActiveColHeader(a.target,dojo.attr(a.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());
dojo.stopEvent(a)},doColHeaderBlur:function(a){dojo.toggleClass(a.target,this.focusClass,false)}})}
if(!dojo._hasResource["dojox.grid._EditManager"]){dojo._hasResource["dojox.grid._EditManager"]=true;dojo.provide("dojox.grid._EditManager");dojo.declare("dojox.grid._EditManager",null,{constructor:function(a){this.grid=a;this.connections=[];dojo.isIE&&this.connections.push(dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus")))},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect)},cellFocus:function(a,b){this.grid.singleClickEdit||this.isEditRow(b)?this.setEditCell(a,
b):this.apply();if(this.isEditing()||a&&a.editable&&a.alwaysEditing)this._focusEditor(a,b)},rowClick:function(a){this.isEditing()&&!this.isEditRow(a.rowIndex)&&this.apply()},styleRow:function(a){if(a.index==this.info.rowIndex)a.customClasses+=" dojoxGridRowEditing"},dispatchEvent:function(a){var b=a.cell;return(b=b&&b.editable?b:0)&&b.dispatchEvent(a.dispatch,a)},isEditing:function(){return this.info.rowIndex!==undefined},isEditCell:function(a,b){return this.info.rowIndex===a&&this.info.cell.index==
b},isEditRow:function(a){return this.info.rowIndex===a},setEditCell:function(a,b){if(!this.isEditCell(b,a.index)&&this.grid.canEdit&&this.grid.canEdit(a,b))this.start(a,b,this.isEditRow(b)||a.editable)},_focusEditor:function(a,b){dojox.grid.util.fire(a,"focus",[b])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();
this.focusEditor();this._catchBoomerang=0}},_doCatchBoomerang:function(){if(dojo.isIE)this._catchBoomerang=(new Date).getTime()+this._boomerangWindow},start:function(a,b,c){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(b)){this.applyRowEdit();this.grid.updateRow(b)}if(c){this.info={cell:a,rowIndex:b};this.grid.doStartEdit(a,b);this.grid.updateRow(b)}else this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(a,b);this._doCatchBoomerang()},
_editorDo:function(a){var b=this.info.cell;b&&b.editable&&b[a](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(a,b,c){this.grid.canEdit(b,c)&&this.grid.doApplyCellEdit(a,c,b.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();
this._doCatchBoomerang()}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},save:function(a,b){var c=this.info.cell;if(this.isEditRow(a)&&(!b||c.view==b)&&c.editable)c.save(c,this.info.rowIndex)},restore:function(a,b){var c=this.info.cell;this.isEditRow(b)&&c.view==a&&c.editable&&c.restore(c,this.info.rowIndex)}})}
if(!dojo._hasResource["dojox.grid.Selection"]){dojo._hasResource["dojox.grid.Selection"]=true;dojo.provide("dojox.grid.Selection");dojo.declare("dojox.grid.Selection",null,{constructor:function(a){this.grid=a;this.selected=[];this.setMode(a.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(a){this.selected.length&&this.deselectAll();this.mode=a!="extended"&&a!="multiple"&&a!="single"&&a!="none"?"extended":a},onCanSelect:function(a){return this.grid.onCanSelect(a)},
onCanDeselect:function(a){return this.grid.onCanDeselect(a)},onSelected:function(){},onDeselected:function(){},onChanging:function(){},onChanged:function(){},isSelected:function(a){if(this.mode=="none")return false;return this.selected[a]},getFirstSelected:function(){if(!this.selected.length||this.mode=="none")return-1;for(var a=0,b=this.selected.length;a<b;a++)if(this.selected[a])return a;return-1},getNextSelected:function(a){if(this.mode=="none")return-1;a=a+1;for(var b=this.selected.length;a<b;a++)if(this.selected[a])return a;
return-1},getSelected:function(){for(var a=[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(b);return a},getSelectedCount:function(){for(var a=0,b=0;b<this.selected.length;b++)this.selected[b]&&a++;return a},_beginUpdate:function(){this.updating===0&&this.onChanging();this.updating++},_endUpdate:function(){this.updating--;this.updating===0&&this.onChanged()},select:function(a){if(this.mode!="none")if(this.mode!="multiple"){this.deselectAll(a);this.addToSelection(a)}else this.toggleSelect(a)},
addToSelection:function(a){if(this.mode!="none")if(dojo.isArray(a))dojo.forEach(a,this.addToSelection,this);else{a=Number(a);if(this.selected[a])this.selectedIndex=a;else if(this.onCanSelect(a)!==false){this.selectedIndex=a;var b=this.grid.getRowNode(a);b&&dojo.attr(b,"aria-selected","true");this._beginUpdate();this.selected[a]=true;this.onSelected(a);this._endUpdate()}}},deselect:function(a){if(this.mode!="none")if(dojo.isArray(a))dojo.forEach(a,this.deselect,this);else{a=Number(a);if(this.selectedIndex==
a)this.selectedIndex=-1;if(this.selected[a])if(this.onCanDeselect(a)!==false){var b=this.grid.getRowNode(a);b&&dojo.attr(b,"aria-selected","false");this._beginUpdate();delete this.selected[a];this.onDeselected(a);this._endUpdate()}}},setSelected:function(a,b){this[b?"addToSelection":"deselect"](a)},toggleSelect:function(a){dojo.isArray(a)?dojo.forEach(a,this.toggleSelect,this):this.setSelected(a,!this.selected[a])},_range:function(a,b,c){var d=a>=0?a:b;a=b;if(d>a){a=d;d=b}for(b=d;b<=a;b++)c(b)},selectRange:function(a,
b){this._range(a,b,dojo.hitch(this,"addToSelection"))},deselectRange:function(a,b){this._range(a,b,dojo.hitch(this,"deselect"))},insert:function(a){this.selected.splice(a,0,false);this.selectedIndex>=a&&this.selectedIndex++},remove:function(a){this.selected.splice(a,1);this.selectedIndex>=a&&this.selectedIndex--},deselectAll:function(a){for(var b in this.selected)b!=a&&this.selected[b]===true&&this.deselect(b)},clickSelect:function(a,b,c){if(this.mode!="none"){this._beginUpdate();if(this.mode!="extended")this.select(a);
else{var d=this.selectedIndex;b||this.deselectAll(a);if(c)this.selectRange(d,a);else b?this.toggleSelect(a):this.addToSelection(a)}this._endUpdate()}},clickSelectEvent:function(a){this.clickSelect(a.rowIndex,dojo.isCopyKey(a),a.shiftKey)},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate()}})}
if(!dojo._hasResource["dojox.grid._Events"]){dojo._hasResource["dojox.grid._Events"]=true;dojo.provide("dojox.grid._Events");dojo.declare("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(a){this.dispatchKeyEvent(a)},onContentEvent:function(a){this.dispatchContentEvent(a)},onHeaderEvent:function(a){this.dispatchHeaderEvent(a)},onStyleRow:function(a){var b=a;b.customClasses+=(b.odd?" dojoxGridRowOdd":"")+(b.selected?" dojoxGridRowSelected":"")+(b.over?" dojoxGridRowOver":
"");this.focus.styleRow(a);this.edit.styleRow(a)},onKeyDown:function(a){if(!(a.altKey||a.metaKey)){var b=dojo.keys,c;switch(a.keyCode){case b.ESCAPE:this.edit.cancel();break;case b.ENTER:if(!this.edit.isEditing()){c=this.focus.getHeaderIndex();if(c>=0){this.setSortIndex(c);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(a),a.shiftKey);dojo.stopEvent(a)}if(!a.shiftKey){b=this.edit.isEditing();this.edit.apply();b||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex)}if(!this.edit.isEditing()){b=
this.focus.focusView||this.views.views[0];b.content.decorateEvent(a);this.onRowClick(a)}break;case b.SPACE:if(!this.edit.isEditing()){c=this.focus.getHeaderIndex();if(c>=0){this.setSortIndex(c);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(a),a.shiftKey);dojo.stopEvent(a)}break;case b.TAB:this.focus[a.shiftKey?"previousKey":"nextKey"](a);break;case b.LEFT_ARROW:case b.RIGHT_ARROW:if(!this.edit.isEditing()){var d=a.keyCode;dojo.stopEvent(a);c=this.focus.getHeaderIndex();
if(c>=0&&a.shiftKey&&a.ctrlKey)this.focus.colSizeAdjust(a,c,(d==b.LEFT_ARROW?-1:1)*5);else{a=d==b.LEFT_ARROW?1:-1;if(dojo._isBodyLtr())a*=-1;this.focus.move(0,a)}}break;case b.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(a);this.focus.move(-1,0)}break;case b.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(a);this.focus.move(1,0)}break;case b.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(a);if(this.focus.rowIndex!=
this.scroller.firstVisibleRow+1)this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)}}break;case b.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(a);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1)this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+
1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)}}break;default:break}}},onMouseOver:function(a){a.rowIndex==-1?this.onHeaderCellMouseOver(a):this.onCellMouseOver(a)},onMouseOut:function(a){a.rowIndex==-1?this.onHeaderCellMouseOut(a):this.onCellMouseOut(a)},onMouseDown:function(a){a.rowIndex==-1?this.onHeaderCellMouseDown(a):this.onCellMouseDown(a)},onMouseOverRow:function(a){if(!this.rows.isOver(a.rowIndex)){this.rows.setOverRow(a.rowIndex);a.rowIndex==-1?this.onHeaderMouseOver(a):
this.onRowMouseOver(a)}},onMouseOutRow:function(a){if(this.rows.isOver(-1))this.onHeaderMouseOut(a);else if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(a)}},onMouseDownRow:function(a){a.rowIndex!=-1&&this.onRowMouseDown(a)},onCellMouseOver:function(a){a.cellNode&&dojo.addClass(a.cellNode,this.cellOverClass)},onCellMouseOut:function(a){a.cellNode&&dojo.removeClass(a.cellNode,this.cellOverClass)},onCellMouseDown:function(){},onCellClick:function(a){this._click[0]=this._click[1];
this._click[1]=a;this.edit.isEditCell(a.rowIndex,a.cellIndex)||this.focus.setFocusCell(a.cell,a.rowIndex);this.onRowClick(a)},onCellDblClick:function(a){if(this._click.length>1&&dojo.isIE)this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex);else this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex?this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex):this.edit.setEditCell(a.cell,a.rowIndex);this.onRowDblClick(a)},onCellContextMenu:function(a){this.onRowContextMenu(a)},
onCellFocus:function(a,b){this.edit.cellFocus(a,b)},onRowClick:function(a){this.edit.rowClick(a);this.selection.clickSelectEvent(a)},onRowDblClick:function(){},onRowMouseOver:function(){},onRowMouseOut:function(){},onRowMouseDown:function(){},onRowContextMenu:function(a){dojo.stopEvent(a)},onHeaderMouseOver:function(){},onHeaderMouseOut:function(){},onHeaderCellMouseOver:function(a){a.cellNode&&dojo.addClass(a.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(a){a.cellNode&&dojo.removeClass(a.cellNode,
this.cellOverClass)},onHeaderCellMouseDown:function(){},onHeaderClick:function(){},onHeaderCellClick:function(a){this.setSortIndex(a.cell.index);this.onHeaderClick(a)},onHeaderDblClick:function(){},onHeaderCellDblClick:function(a){this.onHeaderDblClick(a)},onHeaderCellContextMenu:function(a){this.onHeaderContextMenu(a)},onHeaderContextMenu:function(a){this.headerMenu||dojo.stopEvent(a)},onStartEdit:function(){},onApplyCellEdit:function(){},onCancelEdit:function(){},onApplyEdit:function(){},onCanSelect:function(){return true},
onCanDeselect:function(){return true},onSelected:function(a){this.updateRowStyles(a)},onDeselected:function(a){this.updateRowStyles(a)},onSelectionChanged:function(){}})}
if(!dojo._hasResource["dojox.grid._Grid"]){dojo._hasResource["dojox.grid._Grid"]=true;dojo.provide("dojox.grid._Grid");(function(){if(!dojo.isCopyKey)dojo.isCopyKey=dojo.dnd.getCopyKeyState;dojo.declare("dojox.grid._Grid",[dijit._Widget,dijit._Templated,dojox.grid._Events],{templateString:'<div class="dojoxGrid" hidefocus="hidefocus" wairole="grid" dojoAttachEvent="onmouseout:_mouseOut">\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" wairole="presentation"></div>\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" wairole="presentation"></div>\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\n</div>\n',classTag:"dojoxGrid",
get:function(){},rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",
escapeHTMLInData:true,formatterScope:null,editable:false,sortInfo:0,themeable:true,_placeholders:null,_layoutClass:dojox.grid._Layout,buildRendering:function(){this.inherited(arguments);if(this.get==dojox.grid._Grid.prototype.get)this.get=null;if(!this.domNode.getAttribute("tabIndex"))this.domNode.tabIndex="0";this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,
"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");dojox.html.metrics.initOnFontResize();this.connect(dojox.html.metrics,"onFontResize","textSizeChanged");dojox.grid.util.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.util.keyEvents);if(this.selectionMode!="none")dojo.attr(this.domNode,"aria-multiselectable",this.selectionMode=="single"?"false":"true")},postMixInProperties:function(){this.inherited(arguments);var a=dojo.i18n.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);if(this.srcNodeRef&&this.srcNodeRef.style.height)this.height=this.srcNodeRef.style.height;this._setAutoHeightAttr(this.autoHeight,true)},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth)this.domNode.style.width=
this.initialWidth;this.domNode&&!this.editable&&dojo.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.scroller){this.scroller.destroy();delete this.scroller}if(this.focus){this.focus.destroy();delete this.focus}if(this.headerMenu&&this._placeholders.length){dojo.forEach(this._placeholders,function(a){a.unReplace(true)});this.headerMenu.unBindDomNode(this.viewsHeaderNode)}this.inherited(arguments)},
_setAutoHeightAttr:function(a,b){if(typeof a=="string")a=!a||a=="false"?false:a=="true"?true:window.parseInt(a,10);if(typeof a=="number"){if(isNaN(a))a=false;if(a<0)a=true;else if(a===0)a=false}this.autoHeight=a;this._autoHeight=typeof a=="boolean"?a:typeof a=="number"?a>=this.attr("rowCount"):false;this._started&&!b&&this.render()},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},
sizeChange:function(){this.update()},createManagers:function(){this.rows=new dojox.grid._RowManager(this);this.focus=new dojox.grid._FocusManager(this);this.edit=new dojox.grid._EditManager(this)},createSelection:function(){this.selection=new dojox.grid.Selection(this)},createScroller:function(){this.scroller=new dojox.grid._Scroller;this.scroller.grid=this;this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved")},createLayout:function(){this.layout=
new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.render()},onResizeColumn:function(){},createViews:function(){this.views=new dojox.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView")},createView:function(a,b){a=dojo.getObject(a);b=new a({grid:this,index:b});this.viewsNode.appendChild(b.domNode);this.viewsHeaderNode.appendChild(b.headerNode);this.views.addView(b);return b},buildViews:function(){for(var a=0,b;b=this.layout.structure[a];a++)this.createView(b.type||
dojox._scopeName+".grid._View",a).setStructure(b);this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(a){if((a=a)&&dojo.isString(a)){dojo.deprecated("dojox.grid._Grid.attr('structure', 'objVar')","use dojox.grid._Grid.attr('structure', objVar) instead","2.0");a=dojo.getObject(a)}this.structure=a;if(!a)if(this.layout.structure)a=this.layout.structure;else return;this.views.destroyViews();a!==this.layout.structure&&this.layout.setStructure(a);this._structureChanged()},
setStructure:function(a){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.attr('structure', obj) instead.","2.0");this._setStructureAttr(a)},getColumnTogglingItems:function(){return dojo.map(this.layout.cells,function(a){if(!a.menuItems)a.menuItems=[];var b=this,c=new dijit.CheckedMenuItem({label:a.name,checked:!a.hidden,_gridCell:a,onChange:function(d){if(b.layout.setColumnVisibility(this._gridCell.index,d)){var f=this._gridCell.menuItems;f.length>1&&dojo.forEach(f,function(e){e!==
this&&e.setAttribute("checked",d)},this);d=dojo.filter(b.layout.cells,function(e){e.menuItems.length>1?dojo.forEach(e.menuItems,"item.attr('disabled', false);"):e.menuItems[0].attr("disabled",false);return!e.hidden});d.length==1&&dojo.forEach(d[0].menuItems,"item.attr('disabled', true);")}},destroy:function(){var d=dojo.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(d,1);delete this._gridCell;dijit.CheckedMenuItem.prototype.destroy.apply(this,arguments)}});a.menuItems.push(c);
return c},this)},_setHeaderMenuAttr:function(a){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(b){b.unReplace(true)});this._placeholders=[]}this.headerMenu&&this.headerMenu.unBindDomNode(this.viewsHeaderNode);if(this.headerMenu=a){this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders)this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel)}},setHeaderMenu:function(a){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)",
"use dojox.grid._Grid.attr('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(a)},setupHeaderMenu:function(){this._placeholders&&this._placeholders.length&&dojo.forEach(this._placeholders,function(a){a._replaced&&a.unReplace(true);a.replace(this.getColumnTogglingItems())},this)},_fetch:function(){this.setScrollTop(0)},getItem:function(){return null},showMessage:function(a){if(a){this.messagesNode.innerHTML=a;this.messagesNode.style.display=""}else{this.messagesNode.innerHTML="";this.messagesNode.style.display=
"none"}},_structureChanged:function(){this.buildViews();this.autoRender&&this._started&&this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(a,b){this._pendingChangeSize=a;this._pendingResultSize=b;this.sizeChange()},_getPadBorder:function(){return this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode)},_getHeaderHeight:function(){var a=this.viewsHeaderNode.style,b=a.display=="none"?0:this.views.measureHeader();a.height=b+"px";this.views.normalizeHeaderNodeHeight();
return b},_resize:function(a,b){a=a||this._pendingChangeSize;b=b||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(this.domNode){var c=this.domNode.parentNode;if(!(!c||c.nodeType!=1||!this.hasLayout()||c.style.visibility=="hidden"||c.style.display=="none")){var d=this._getPadBorder(),f=undefined,e;if(this._autoHeight){this.domNode.style.height="auto";this.viewsNode.style.height=""}else if(typeof this.autoHeight=="number"){e=f=this._getHeaderHeight();e+=this.scroller.averageRowHeight*
this.autoHeight;this.domNode.style.height=e+"px"}else if(this.domNode.clientHeight<=d.h)if(c==document.body)this.domNode.style.height=this.defaultHeight;else if(this.height)this.domNode.style.height=this.height;else this.fitTo="parent";if(b)a=b;if(a){dojo.marginBox(this.domNode,a);this.height=this.domNode.style.height;delete this.fitTo}else if(this.fitTo=="parent"){e=this._parentContentBoxHeight=this._parentContentBoxHeight||dojo._getContentBox(c).h;this.domNode.style.height=Math.max(0,e)+"px"}a=
dojo.some(this.views.views,function(g){return g.flexCells});if(!this._autoHeight&&(e||dojo._getContentBox(this.domNode).h)===0)this.viewsHeaderNode.style.display="none";else{this.viewsHeaderNode.style.display="block";if(!a&&f===undefined)f=this._getHeaderHeight()}if(a)f=undefined;this.adaptWidth();this.adaptHeight(f);this.postresize()}}},adaptWidth:function(){var a=!this.initialWidth&&this.autoWidth,b=a?0:this.domNode.clientWidth||this.domNode.offsetWidth-this._getPadBorder().w;b=this.views.arrange(1,
b);this.views.onEach("adaptWidth");if(a)this.domNode.style.width=b+"px"},adaptHeight:function(a){a=a===undefined?this._getHeaderHeight():a;var b=this._autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0;this.views.onEach("setSize",[0,b]);this.views.onEach("adaptHeight");if(!this._autoHeight){var c=0,d=0,f=dojo.filter(this.views.views,function(e){if(e=e.hasHScrollbar())c++;else d++;return!e});c>0&&d>0&&dojo.forEach(f,function(e){e.adaptHeight(true)})}this.scroller.windowHeight=this.autoHeight===
true||b!=-1||typeof this.autoHeight=="number"&&this.autoHeight>=this.attr("rowCount")?b:Math.max(this.domNode.clientHeight-a,0)},startup:function(){if(!this._started){this.inherited(arguments);this.autoRender&&this.render()}},render:function(){if(this.domNode)if(this._started)if(this.hasLayout()){this.update=this.defaultUpdate;this._render()}else this.scroller.init(0,this.keepRows,this.rowsPerPage)},_render:function(){this.scroller.init(this.attr("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();
this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight){var a=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=a}},renderRow:function(a,b){this.views.renderRow(a,b,this._skipRowRenormalize)},
rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true},endUpdate:function(){this.updating=false;var a=this.invalidated,b;if(a.all)this.update();else if(a.rowCount!=undefined)this.updateRowCount(a.rowCount);else for(b in a)this.updateRow(Number(b));this.invalidated=[]},defaultUpdate:function(){if(this.domNode)if(this.updating)this.invalidated.all=true;else{var a=this.scrollTop;this.prerender();this.scroller.invalidateNodes();
this.setScrollTop(a);this.postrender()}},update:function(){this.render()},updateRow:function(a){a=Number(a);if(this.updating)this.invalidated[a]=true;else{this.views.updateRow(a);this.scroller.rowHeightChanged(a)}},updateRows:function(a,b){a=Number(a);b=Number(b);var c;if(this.updating)for(c=0;c<b;c++)this.invalidated[c+a]=true;else{for(c=0;c<b;c++)this.views.updateRow(c+a,this._skipRowRenormalize);this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){if(this.updating)this.invalidated.rowCount=
a;else{this.rowCount=a;this._setAutoHeightAttr(this.autoHeight,true);this.layout.cells.length&&this.scroller.updateRowCount(a);this._resize();this.layout.cells.length&&this.setScrollTop(this.scrollTop)}},updateRowStyles:function(a){this.views.updateRowStyles(a)},getRowNode:function(a){if(this.focus.focusView&&!(this.focus.focusView instanceof dojox.grid._RowSelector))return this.focus.focusView.rowNodes[a];else for(var b=0,c;c=this.views.views[b];b++)if(!(c instanceof dojox.grid._RowSelector))return c.rowNodes[a];
return null},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},fastScroll:true,delayScroll:false,scrollRedrawThreshold:dojo.isIE?100:50,scrollTo:function(a){if(this.fastScroll){var b=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;if(b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=a;this.views.setScrollTop(a);this._pendingScroll&&window.clearTimeout(this._pendingScroll);var c=this;this._pendingScroll=window.setTimeout(function(){delete c._pendingScroll;
c.finishScrollJob()},200)}else this.setScrollTop(a)}else this.setScrollTop(a)},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scroller.scroll(this.views.setScrollTop(a))},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,b){b&&this.rows.styleRowNode(a,b)},_mouseOut:function(){this.rows.setOverRow(-2)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=
b},getCellName:function(a){return"Cell "+a.index},canSort:function(){},sort:function(){},getSortAsc:function(a){a=a==undefined?this.sortInfo:a;return Boolean(a>0)},getSortIndex:function(a){a=a==undefined?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(a,b){var c=a+1;if(b!=undefined)c*=b?1:-1;else if(this.getSortIndex()==a)c=-this.sortInfo;this.setSortInfo(c)},setSortInfo:function(a){if(this.canSort(a)){this.sortInfo=a;this.sort();this.update()}},doKeyEvent:function(a){a.dispatch="do"+
a.type;this.onKeyEvent(a)},_dispatch:function(a,b){if(a in this)return this[a](b);return false},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){a.cellNode?this.onCellClick(a):this.onRowClick(a)},
dodblclick:function(a){a.cellNode?this.onCellDblClick(a):this.onRowDblClick(a)},docontextmenu:function(a){a.cellNode?this.onCellContextMenu(a):this.onRowContextMenu(a)},doheaderclick:function(a){a.cellNode?this.onHeaderCellClick(a):this.onHeaderClick(a)},doheaderdblclick:function(a){a.cellNode?this.onHeaderCellDblClick(a):this.onHeaderDblClick(a)},doheadercontextmenu:function(a){a.cellNode?this.onHeaderCellContextMenu(a):this.onHeaderContextMenu(a)},doStartEdit:function(a,b){this.onStartEdit(a,b)},
doApplyCellEdit:function(a,b,c){this.onApplyCellEdit(a,b,c)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.attr("rowCount")+1)},removeSelectedRows:function(){this.allItemsSelected?this.updateRowCount(0):this.updateRowCount(Math.max(0,this.attr("rowCount")-this.selection.getSelected().length));this.selection.clear()}});dojox.grid._Grid.markupFactory=function(a,b,c,d){var f=dojo,e=function(g){g=f.attr(g,"width")||
"auto";if(g!="auto"&&g.slice(-2)!="em"&&g.slice(-1)!="%")g=parseInt(g,10)+"px";return g};if(!a.structure&&b.nodeName.toLowerCase()=="table"){a.structure=f.query("> colgroup",b).map(function(g){var j=f.attr(g,"span");j={noscroll:f.attr(g,"noscroll")=="true"?true:false,__span:j?parseInt(j,10):1,cells:[]};if(f.hasAttr(g,"width"))j.width=e(g);return j});a.structure.length||a.structure.push({__span:Infinity,cells:[]});f.query("thead > tr",b).forEach(function(g,j){var k=0,i=0,l,m=null;f.query("> th",g).map(function(n){if(m){if(k>=
l+m.__span){i++;l+=m.__span;m=a.structure[i]}}else{l=0;m=a.structure[0]}var o={name:f.trim(f.attr(n,"name")||n.innerHTML),colSpan:parseInt(f.attr(n,"colspan")||1,10),type:f.trim(f.attr(n,"cellType")||""),id:f.trim(f.attr(n,"id")||"")};k+=o.colSpan;var p=f.attr(n,"rowspan");if(p)o.rowSpan=p;if(f.hasAttr(n,"width"))o.width=e(n);if(f.hasAttr(n,"relWidth"))o.relWidth=window.parseInt(dojo.attr(n,"relWidth"),10);if(f.hasAttr(n,"hidden"))o.hidden=f.attr(n,"hidden")=="true";d&&d(n,o);o.type=o.type?dojo.getObject(o.type):
dojox.grid.cells.Cell;o.type&&o.type.markupFactory&&o.type.markupFactory(n,o);m.cells[j]||(m.cells[j]=[]);m.cells[j].push(o)})})}return new c(a,b)}})()}
if(!dojo._hasResource["dojox.grid.DataSelection"]){dojo._hasResource["dojox.grid.DataSelection"]=true;dojo.provide("dojox.grid.DataSelection");dojo.declare("dojox.grid.DataSelection",dojox.grid.Selection,{getFirstSelected:function(){var a=dojox.grid.Selection.prototype.getFirstSelected.call(this);if(a==-1)return null;return this.grid.getItem(a)},getNextSelected:function(a){a=this.grid.getItemIndex(a);a=dojox.grid.Selection.prototype.getNextSelected.call(this,a);if(a==-1)return null;return this.grid.getItem(a)},
getSelected:function(){for(var a=[],b=0,c=this.selected.length;b<c;b++)this.selected[b]&&a.push(this.grid.getItem(b));return a},addToSelection:function(a){if(this.mode!="none"){var b=null;b=typeof a=="number"||typeof a=="string"?a:this.grid.getItemIndex(a);dojox.grid.Selection.prototype.addToSelection.call(this,b)}},deselect:function(a){if(this.mode!="none"){var b=null;b=typeof a=="number"||typeof a=="string"?a:this.grid.getItemIndex(a);dojox.grid.Selection.prototype.deselect.call(this,b)}},deselectAll:function(a){var b=
null;if(a||typeof a=="number"){b=typeof a=="number"||typeof a=="string"?a:this.grid.getItemIndex(a);dojox.grid.Selection.prototype.deselectAll.call(this,b)}else this.inherited(arguments)}})}
if(!dojo._hasResource["dojox.grid.DataGrid"]){dojo._hasResource["dojox.grid.DataGrid"]=true;dojo.provide("dojox.grid.DataGrid");dojo.declare("dojox.grid.DataGrid",dojox.grid._Grid,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,postCreate:function(){this._pages=[];this._store_connects=
[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},createSelection:function(){this.selection=new dojox.grid.DataSelection(this)},get:function(a,b){if(b&&this.field=="_item"&&!this.fields)return b;else if(b&&this.fields){var c=[],d=this.grid.store;dojo.forEach(this.fields,function(f){c=c.concat(d.getValues(b,f))});return c}return!b?this.defaultValue:!this.field?this.value:this.field=="_item"?b:this.grid.store.getValue(b,
this.field)},_checkUpdateStatus:function(){if(this.updateDelay>0){var a=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;a=true}if(!this.updating){this.beginUpdate();a=true}if(a){var b=this;this._endUpdateDelay=setTimeout(function(){delete b._endUpdateDelay;b.endUpdate()},this.updateDelay)}}},_onSet:function(a){this._checkUpdateStatus();a=this.getItemIndex(a);a>-1&&this.updateRow(a)},_createItem:function(a,b){b=this._hasIdentity?this.store.getIdentity(a):
dojo.toJson(this.query)+":idx:"+b+":sort:"+dojo.toJson(this.getSortProps());return a=this._by_idty[b]={idty:b,item:a}},_addItem:function(a,b,c){this._by_idx[b]=this._createItem(a,b);c||this.updateRow(b)},_onNew:function(a){this._checkUpdateStatus();var b=this.attr("rowCount");this._addingItem=true;this.updateRowCount(b+1);this._addingItem=false;this._addItem(a,b);this.showMessage()},_onDelete:function(a){this._checkUpdateStatus();a=this._getItemIndex(a,true);if(a>=0){this._pages=[];this._eop=this._bop=
-1;var b=this._by_idx[a];this._by_idx.splice(a,1);delete this._by_idty[b.idty];this.updateRowCount(this.attr("rowCount")-1);this.attr("rowCount")===0&&this.showMessage(this.noDataMessage)}},_onRevert:function(){this._refresh()},setStore:function(a,b,c){this._setQuery(b,c);this._setStore(a);this._refresh(true)},setQuery:function(a,b){this._setQuery(a,b);this._refresh(true)},setItems:function(a){this.items=a;this._setStore(this.store);this._refresh(true)},_setQuery:function(a,b){this.query=a;this.queryOptions=
b||this.queryOptions},_setStore:function(a){this.store&&this._store_connects&&dojo.forEach(this._store_connects,function(c){dojo.forEach(c,dojo.disconnect)});if(this.store=a){a=this.store.getFeatures();var b=[];this._canEdit=!!a["dojo.data.api.Write"]&&!!a["dojo.data.api.Identity"];this._hasIdentity=!!a["dojo.data.api.Identity"];if(a["dojo.data.api.Notification"]&&!this.items){b.push(this.connect(this.store,"onSet","_onSet"));b.push(this.connect(this.store,"onNew","_onNew"));b.push(this.connect(this.store,
"onDelete","_onDelete"))}this._canEdit&&b.push(this.connect(this.store,"revert","_onRevert"));this._store_connects=b}},_onFetchBegin:function(a,b){if(this.scroller){if(this.rowCount!=a)if(b.isRender){this.scroller.init(a,this.keepRows,this.rowsPerPage);this.rowCount=a;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false}else this.updateRowCount(a);if(a)this.showMessage();else{this.views.render();this._resize();this.showMessage(this.noDataMessage);
this.focus.initFocusView()}}},_onFetchComplete:function(a,b){if(this.scroller){if(a&&a.length>0){dojo.forEach(a,function(c,d){this._addItem(c,b.start+d,true)},this);if(this._autoHeight)this._skipRowRenormalize=true;this.updateRows(b.start,a.length);if(this._autoHeight)this._skipRowRenormalize=false;if(b.isRender){this.setScrollTop(0);this.postrender()}else this._lastScrollTop&&this.setScrollTop(this._lastScrollTop)}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=
true}this._pending_requests[b.start]=false}},_onFetchError:function(a,b){console.log(a);delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage)}this._pending_requests[b.start]=false;this.onFetchError(a,b)},onFetchError:function(){},_fetch:function(a,b){a=a||0;if(this.store&&!this._pending_requests[a]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage)}this._pending_requests[a]=true;try{if(this.items){var c=
this.items,d=this.store;this.rowsPerPage=c.length;var f={start:a,count:this.rowsPerPage,isRender:b};this._onFetchBegin(c.length,f);var e=0;dojo.forEach(c,function(k){d.isItemLoaded(k)||e++});if(e===0)this._onFetchComplete(c,f);else{var g=function(){e--;e===0&&this._onFetchComplete(c,f)};dojo.forEach(c,function(k){d.isItemLoaded(k)||d.loadItem({item:k,onItem:g,scope:this})},this)}}else this.store.fetch({start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,
isRender:b,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")})}catch(j){this._onFetchError(j)}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoading=this._isLoaded=false},getItem:function(a){var b=this._by_idx[a];if(!b||b&&!b.item){this._preparePage(a);return null}return b.item},getItemIndex:function(a){return this._getItemIndex(a,false)},_getItemIndex:function(a,
b){if(!b&&!this.store.isItem(a))return-1;b=this._hasIdentity?this.store.getIdentity(a):null;for(var c=0,d=this._by_idx.length;c<d;c++){var f=this._by_idx[c];if(f&&(b&&f.idty==b||f.item===a))return c}return-1},filter:function(a,b){this.query=a;b&&this._clearData();this._fetch()},_getItemAttr:function(a,b){a=this.getItem(a);return!a?this.fetchText:this.store.getValue(a,b)},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.attr("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();
this._fetch(0,true)}},_requestsPending:function(a){return this._pending_requests[a]},_rowToPage:function(a){return this.rowsPerPage?Math.floor(a/this.rowsPerPage):a},_pageToRow:function(a){return this.rowsPerPage?this.rowsPerPage*a:a},_preparePage:function(a){if((a<this._bop||a>=this._eop)&&!this._addingItem){a=this._rowToPage(a);this._needPage(a);this._bop=a*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.attr("rowCount"))}},_needPage:function(a){if(!this._pages[a]){this._pages[a]=true;
this._requestPage(a)}},_requestPage:function(a){a=this._pageToRow(a);var b=Math.min(this.rowsPerPage,this.attr("rowCount")-a);if(b>0){this._requests++;this._requestsPending(a)||setTimeout(dojo.hitch(this,"_fetch",a,false),1)}},getCellName:function(a){return a.field},_refresh:function(a){this._clearData();this._fetch(0,a)},sort:function(){this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var a=this.getCell(this.getSortIndex());if(a){var b=
a.sortDesc,c=!(this.sortInfo>0);b=typeof b=="undefined"?c:c?!b:b;return[{attribute:a.field,descending:b}]}else{if(this.sortFields)return this.sortFields;return null}},styleRowState:function(a){if(this.store&&this.store.getState){for(var b=this.store.getState(a.index),c="",d=0,f=["inflight","error","inserting"],e;e=f[d];d++)if(b[e]){c=" dojoxGridRow-"+e;break}a.customClasses+=c}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)},canEdit:function(){return this._canEdit},_copyAttr:function(a,
b){a=this.getItem(a);return this.store.getValue(a,b)},doStartEdit:function(a,b){this._cache[b]||(this._cache[b]=this._copyAttr(b,a.field));this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,c){this.store.fetchItemByIdentity({identity:this._by_idx[b].idty,onItem:dojo.hitch(this,function(d){var f=this.store.getValue(d,c);if(typeof f=="number")a=isNaN(a)?a:parseFloat(a);else if(typeof f=="boolean")a=a=="true"?true:a=="false"?false:a;else if(f instanceof Date){f=new Date(a);a=isNaN(f.getTime())?a:f}this.store.setValue(d,
c,a);this.onApplyCellEdit(a,b,c)})})},doCancelEdit:function(a){var b=this._cache[a];if(b){this.updateRow(a);delete this._cache[a]}this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a){this.onApplyEdit(a)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var a=dojo.hitch(this,function(b){if(b.length){dojo.forEach(b,this.store.deleteItem,this.store);this.selection.clear()}});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:a}):
a(this.selection.getSelected())}}});dojox.grid.DataGrid.cell_markupFactory=function(a,b,c){var d=dojo.trim(dojo.attr(b,"field")||"");if(d)c.field=d;c.field=c.field||c.name;if(d=dojo.trim(dojo.attr(b,"fields")||""))c.fields=d.split(",");a&&a(b,c)};dojox.grid.DataGrid.markupFactory=function(a,b,c,d){return dojox.grid._Grid.markupFactory(a,b,c,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,d))}}
if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(a,b){for(var c="^",d=null,f=0;f<a.length;f++){d=a.charAt(f);switch(d){case "\\":c+=d;f++;c+=a.charAt(f);break;case "*":c+=".*";break;case "?":c+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":c+="\\";default:c+=d}}c+="$";return b?new RegExp(c,"mi"):
new RegExp(c,"m")}}
if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(a,b){var c=-1;if(a===null)a=undefined;if(b===null)b=undefined;if(a==b)c=0;else if(a>b||a==null)c=1;return c};dojo.data.util.sorter.createSortFunction=function(a,b){function c(l,m,n,o){return function(p,r){p=o.getValue(p,l);r=o.getValue(r,l);return m*n(p,r)}}for(var d=[],f,e=b.comparatorMap,g=dojo.data.util.sorter.basicComparator,j=
0;j<a.length;j++){f=a[j];var k=f.attribute;if(k){f=f.descending?-1:1;var i=g;if(e){if(typeof k!=="string"&&"toString"in k)k=k.toString();i=e[k]||g}d.push(c(k,f,i,b))}}return function(l,m){for(var n=0;n<d.length;){var o=d[n++](l,m);if(o!==0)return o}return 0}}}
if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(a){a=a||{};if(!a.store)a.store=this;var b=this,c=function(f,e){if(e.onError){var g=e.scope||dojo.global;e.onError.call(g,f,e)}},d=function(f,e){var g=e.abort||null,j=false,k=e.start?e.start:0,i=e.count&&e.count!==Infinity?k+e.count:f.length;e.abort=function(){j=true;g&&g.call(e)};var l=e.scope||dojo.global;if(!e.store)e.store=
b;e.onBegin&&e.onBegin.call(l,f.length,e);e.sort&&f.sort(dojo.data.util.sorter.createSortFunction(e.sort,b));if(e.onItem)for(var m=k;m<f.length&&m<i;++m){var n=f[m];j||e.onItem.call(l,n,e)}if(e.onComplete&&!j){m=null;e.onItem||(m=f.slice(k,i));e.onComplete.call(l,m,e)}};this._fetchItems(a,d,c);return a}}
if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(b){return dojo.date.stamp.fromISOString(b)}});
this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(a.urlPreventCache!==undefined)this.urlPreventCache=a.urlPreventCache?true:false;if(a.hierarchical!==undefined)this.hierarchical=a.hierarchical?true:false;if(a.clearOnClose)this.clearOnClose=true;if("failOk"in a)this.failOk=a.failOk?true:
false},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(a){if(!this.isItem(a))throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");},_assertIsAttribute:function(a){if(typeof a!=="string")throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");},getValue:function(a,b,c){a=this.getValues(a,b);return a.length>0?a[0]:c},getValues:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);
return a[b]||[]},getAttributes:function(a){this._assertIsItem(a);var b=[];for(var c in a)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&b.push(c);return b},hasAttribute:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return b in a},containsValue:function(a,b,c){var d=undefined;if(typeof c==="string")d=dojo.data.util.filter.patternToRegExp(c,false);return this._containsValue(a,b,c,d)},_containsValue:function(a,b,c,d){return dojo.some(this.getValues(a,
b),function(f){if(f!==null&&!dojo.isObject(f)&&d){if(f.toString().match(d))return true}else if(c===f)return true})},isItem:function(a){if(a&&a[this._storeRefPropName]===this)if(this._arrayOfAllItems[a[this._itemNumPropName]]===a)return true;return false},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(){if(this._labelAttr)return[this._labelAttr];
return null},_fetchItems:function(a,b,c){var d=this,f=function(i,l){var m=[],n,o;if(i.query){var p;n=i.queryOptions?i.queryOptions.ignoreCase:false;var r={};for(o in i.query){p=i.query[o];if(typeof p==="string")r[o]=dojo.data.util.filter.patternToRegExp(p,n);else if(p instanceof RegExp)r[o]=p}for(n=0;n<l.length;++n){var q=true,s=l[n];if(s===null)q=false;else for(o in i.query){p=i.query[o];d._containsValue(s,o,p,r[o])||(q=false)}q&&m.push(s)}}else for(n=0;n<l.length;++n){o=l[n];o!==null&&m.push(o)}b(m,
i)};if(this._loadFinished)f(a,this._getItemsArray(a.queryOptions));else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this.url=this._ccUrl=this._jsonFileUrl}else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,
filter:f});else{this._loadInProgress=true;var e={url:d._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk},g=dojo.xhrGet(e);g.addCallback(function(i){try{d._getItemsFromLoadedData(i);d._loadFinished=true;d._loadInProgress=false;f(a,d._getItemsArray(a.queryOptions));d._handleQueuedFetches()}catch(l){d._loadFinished=true;d._loadInProgress=false;c(l,a)}});g.addErrback(function(i){d._loadInProgress=false;c(i,a)});var j=null;if(a.abort)j=a.abort;a.abort=
function(){var i=g;i&&i.fired===-1&&i.cancel();j&&j.call(a)}}else if(this._jsonData)try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;f(a,this._getItemsArray(a.queryOptions))}catch(k){c(k,a)}else c(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),a)}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],
c=b.args;(b=b.filter)?b(c,this._getItemsArray(c.queryOptions)):this.fetchItemByIdentity(c)}this._queuedFetches=[]}},_getItemsArray:function(a){if(a&&a.deep)return this._arrayOfAllItems;return this._arrayOfTopLevelItems},close:function(){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null)&&this.data==null)console.debug("dojo.data.ItemFileReadStore: WARNING!  Data reload  information has not been provided.  Please set 'url' or 'data' to the appropriate value before the next fetch");
this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[]}},_getItemsFromLoadedData:function(a){function b(p){return p=p!==null&&typeof p==="object"&&(!dojo.isArray(p)||d)&&!dojo.isFunction(p)&&(p.constructor==Object||dojo.isArray(p))&&typeof p._reference==="undefined"&&typeof p._type==="undefined"&&typeof p._value==="undefined"&&f.hierarchical}function c(p){f._arrayOfAllItems.push(p);for(var r in p){var q=
p[r];if(q)if(dojo.isArray(q)){q=q;for(var s=0;s<q.length;++s){var u=q[s];b(u)&&c(u)}}else b(q)&&c(q)}}var d=false,f=this;this._labelAttr=a.label;var e,g;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(e=0;e<this._arrayOfTopLevelItems.length;++e){g=this._arrayOfTopLevelItems[e];if(dojo.isArray(g))d=true;c(g);g[this._rootItemPropName]=true}var j={},k;for(e=0;e<this._arrayOfAllItems.length;++e){g=this._arrayOfAllItems[e];for(k in g){if(k!==this._rootItemPropName){var i=g[k];if(i!==null)dojo.isArray(i)||
(g[k]=[i]);else g[k]=[null]}j[k]=k}}for(;j[this._storeRefPropName];)this._storeRefPropName+="_";for(;j[this._itemNumPropName];)this._itemNumPropName+="_";for(;j[this._reverseRefMap];)this._reverseRefMap+="_";if(j=a.identifier){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=j;for(e=0;e<this._arrayOfAllItems.length;++e){g=this._arrayOfAllItems[e];a=g[j];a=a[0];if(this._itemsByIdentity[a])if(this._jsonFileUrl)throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+j+"].  Value collided: ["+a+"]");else{if(this._jsonData)throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+j+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=g}}else this._features["dojo.data.api.Identity"]=Number;for(e=0;e<this._arrayOfAllItems.length;++e){g=this._arrayOfAllItems[e];g[this._storeRefPropName]=
this;g[this._itemNumPropName]=e}for(e=0;e<this._arrayOfAllItems.length;++e){g=this._arrayOfAllItems[e];for(k in g){a=g[k];for(j=0;j<a.length;++j){i=a[j];if(i!==null&&typeof i=="object"){if("_type"in i&&"_value"in i){var l=i._type,m=this._datatypeMap[l];if(m)if(dojo.isFunction(m))a[j]=new m(i._value);else if(dojo.isFunction(m.deserialize))a[j]=m.deserialize(i._value);else throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");
else throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+l+"'");}if(i._reference){i=i._reference;if(dojo.isObject(i))for(l=0;l<this._arrayOfAllItems.length;++l){m=this._arrayOfAllItems[l];var n=true;for(var o in i)if(m[o]!=i[o])n=false;if(n)a[j]=m}else a[j]=this._itemsByIdentity[i];if(this.referenceIntegrity){i=a[j];this.isItem(i)&&this._addReferenceToMap(i,g,k)}}else this.isItem(i)&&this.referenceIntegrity&&this._addReferenceToMap(i,
g,k)}}}}},_addReferenceToMap:function(){},getIdentity:function(a){var b=this._features["dojo.data.api.Identity"];if(b===Number)return a[this._itemNumPropName];else if(a=a[b])return a[0];return null},fetchItemByIdentity:function(a){var b,c;if(this._loadFinished){b=this._getItemByIdentity(a.identity);if(a.onItem){c=a.scope?a.scope:dojo.global;a.onItem.call(c,b)}}else{var d=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");
this.url=this._ccUrl=this._jsonFileUrl}else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a});else{this._loadInProgress=true;c={url:d._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};c=dojo.xhrGet(c);c.addCallback(function(f){var e=a.scope?a.scope:dojo.global;try{d._getItemsFromLoadedData(f);
d._loadFinished=true;d._loadInProgress=false;b=d._getItemByIdentity(a.identity);a.onItem&&a.onItem.call(e,b);d._handleQueuedFetches()}catch(g){d._loadInProgress=false;a.onError&&a.onError.call(e,g)}});c.addErrback(function(f){d._loadInProgress=false;if(a.onError){var e=a.scope?a.scope:dojo.global;a.onError.call(e,f)}})}else if(this._jsonData){d._getItemsFromLoadedData(d._jsonData);d._jsonData=null;d._loadFinished=true;b=d._getItemByIdentity(a.identity);if(a.onItem){c=a.scope?a.scope:dojo.global;a.onItem.call(c,
b)}}}},_getItemByIdentity:function(a){var b=null;b=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a];if(b===undefined)b=null;return b},getIdentityAttributes:function(){var a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");
this.url=this._ccUrl=this._jsonFileUrl}else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl){var b={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};b=dojo.xhrGet(b);b.addCallback(function(c){try{if(a._loadInProgress!==true&&!a._loadFinished){a._getItemsFromLoadedData(c);a._loadFinished=true}else if(a._loadInProgress)throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");
}catch(d){console.log(d);throw d;}});b.addErrback(function(c){throw c;})}else if(this._jsonData){a._getItemsFromLoadedData(a._jsonData);a._jsonData=null;a._loadFinished=true}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch)}
if(!dojo._hasResource["dojo.data.ItemFileWriteStore"]){dojo._hasResource["dojo.data.ItemFileWriteStore"]=true;dojo.provide("dojo.data.ItemFileWriteStore");dojo.declare("dojo.data.ItemFileWriteStore",dojo.data.ItemFileReadStore,{constructor:function(a){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap.Date.serialize)this._datatypeMap.Date.serialize=function(b){return dojo.date.stamp.toISOString(b,
{zulu:true})};if(a&&a.referenceIntegrity===false)this.referenceIntegrity=false;this._saveInProgress=false},referenceIntegrity:true,_assert:function(a){if(!a)throw new Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){var a=this.getFeatures()["dojo.data.api.Identity"];return a},newItem:function(a,b){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if(typeof a!="object"&&typeof a!="undefined")throw new Error("newItem() was passed something other than an object");
var c=null,d=this._getIdentifierAttribute();if(d===Number)c=this._arrayOfAllItems.length;else{c=a[d];if(typeof c==="undefined")throw new Error("newItem() was not passed an identity for the new item");if(dojo.isArray(c))throw new Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert(typeof this._itemsByIdentity[c]==="undefined");this._assert(typeof this._pending._newItems[c]==="undefined");this._assert(typeof this._pending._deletedItems[c]==="undefined");
var f={};f[this._storeRefPropName]=this;f[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[c]=f;f[d]=[c]}this._arrayOfAllItems.push(f);d=null;if(b&&b.parent&&b.attribute){d={item:b.parent,attribute:b.attribute,oldValue:undefined};var e=this.getValues(b.parent,b.attribute);if(e&&e.length>0){var g=e.slice(0,e.length);d.oldValue=e.length===1?e[0]:e.slice(0,e.length);g.push(f);this._setValueOrValues(b.parent,b.attribute,g,false);d.newValue=this.getValues(b.parent,
b.attribute)}else{this._setValueOrValues(b.parent,b.attribute,f,false);d.newValue=f}}else{f[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(f)}this._pending._newItems[c]=f;for(var j in a){if(j===this._storeRefPropName||j===this._itemNumPropName)throw new Error("encountered bug in ItemFileWriteStore.newItem");b=a[j];dojo.isArray(b)||(b=[b]);f[j]=b;if(this.referenceIntegrity)for(c=0;c<b.length;c++){e=b[c];this.isItem(e)&&this._addReferenceToMap(e,f,j)}}this.onNew(f,d);return f},_removeArrayElement:function(a,
b){b=dojo.indexOf(a,b);if(b!=-1){a.splice(b,1);return true}return false},deleteItem:function(a){this._assert(!this._saveInProgress);this._assertIsItem(a);var b=a[this._itemNumPropName],c=this.getIdentity(a);if(this.referenceIntegrity){var d=this.getAttributes(a);if(a[this._reverseRefMap])a["backup_"+this._reverseRefMap]=dojo.clone(a[this._reverseRefMap]);dojo.forEach(d,function(i){dojo.forEach(this.getValues(a,i),function(l){if(this.isItem(l)){a["backupRefs_"+this._reverseRefMap]||(a["backupRefs_"+
this._reverseRefMap]=[]);a["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(l),attr:i});this._removeReferenceFromMap(l,a,i)}},this)},this);if(d=a[this._reverseRefMap])for(var f in d){var e=null;if(e=this._itemsByIdentity?this._itemsByIdentity[f]:this._arrayOfAllItems[f])for(var g in d[f]){var j=this.getValues(e,g)||[],k=dojo.filter(j,function(i){return!(this.isItem(i)&&this.getIdentity(i)==c)},this);this._removeReferenceFromMap(a,e,g);k.length<j.length&&this._setValueOrValues(e,g,k,true)}}}this._arrayOfAllItems[b]=
null;a[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[c];this._pending._deletedItems[c]=a;a[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,a);this.onDelete(a);return true},setValue:function(a,b,c){return this._setValueOrValues(a,b,c,true)},setValues:function(a,b,c){return this._setValueOrValues(a,b,c,true)},unsetAttribute:function(a,b){return this._setValueOrValues(a,b,[],true)},_setValueOrValues:function(a,b,c,d){this._assert(!this._saveInProgress);
this._assertIsItem(a);this._assert(dojo.isString(b));this._assert(typeof c!=="undefined");var f=this._getIdentifierAttribute();if(b==f)throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");f=this._getValueOrValues(a,b);var e=this.getIdentity(a);if(!this._pending._modifiedItems[e]){var g={};for(var j in a)g[j]=j===this._storeRefPropName||j===this._itemNumPropName||j===this._rootItemPropName?a[j]:j===this._reverseRefMap?dojo.clone(a[j]):a[j].slice(0,
a[j].length);this._pending._modifiedItems[e]=g}e=false;if(dojo.isArray(c)&&c.length===0){e=delete a[b];c=undefined;if(this.referenceIntegrity&&f){j=f;dojo.isArray(j)||(j=[j]);for(var k=0;k<j.length;k++){g=j[k];this.isItem(g)&&this._removeReferenceFromMap(g,a,b)}}}else{e=dojo.isArray(c)?c.slice(0,c.length):[c];if(this.referenceIntegrity)if(f){j=f;dojo.isArray(j)||(j=[j]);var i={};dojo.forEach(j,function(l){if(this.isItem(l)){l=this.getIdentity(l);i[l.toString()]=true}},this);dojo.forEach(e,function(l){if(this.isItem(l)){var m=
this.getIdentity(l);if(i[m.toString()])delete i[m.toString()];else this._addReferenceToMap(l,a,b)}},this);for(k in i){j=this._itemsByIdentity?this._itemsByIdentity[k]:this._arrayOfAllItems[k];this._removeReferenceFromMap(j,a,b)}}else for(k=0;k<e.length;k++){g=e[k];this.isItem(g)&&this._addReferenceToMap(g,a,b)}a[b]=e;e=true}d&&this.onSet(a,b,f,c);return e},_addReferenceToMap:function(a,b,c){b=this.getIdentity(b);var d=a[this._reverseRefMap];d||(d=a[this._reverseRefMap]={});(a=d[b])||(a=d[b]={});a[c]=
true},_removeReferenceFromMap:function(a,b,c){b=this.getIdentity(b);var d=a[this._reverseRefMap],f;if(d){for(f in d)if(f==b){delete d[f][c];this._isEmpty(d[f])&&delete d[f]}this._isEmpty(d)&&delete a[this._reverseRefMap]}},_dumpReferenceMap:function(){var a;for(a=0;a<this._arrayOfAllItems.length;a++){var b=this._arrayOfAllItems[a];b&&b[this._reverseRefMap]&&console.log("Item: ["+this.getIdentity(b)+"] is referenced by: "+dojo.toJson(b[this._reverseRefMap]))}},_getValueOrValues:function(a,b){var c=
undefined;if(this.hasAttribute(a,b)){a=this.getValues(a,b);c=a.length==1?a[0]:a}return c},_flatten:function(a){if(this.isItem(a)){a=a;a=this.getIdentity(a);return a={_reference:a}}else{if(typeof a==="object")for(var b in this._datatypeMap){var c=this._datatypeMap[b];if(dojo.isObject(c)&&!dojo.isFunction(c)){if(a instanceof c.type){if(!c.serialize)throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+b+"]");return{_type:b,_value:c.serialize(a)}}}else if(a instanceof c)return{_type:b,
_value:a.toString()}}return a}},_getNewFileContentString:function(){var a={},b=this._getIdentifierAttribute();if(b!==Number)a.identifier=b;if(this._labelAttr)a.label=this._labelAttr;a.items=[];for(b=0;b<this._arrayOfAllItems.length;++b){var c=this._arrayOfAllItems[b];if(c!==null){var d={};for(var f in c)if(f!==this._storeRefPropName&&f!==this._itemNumPropName&&f!==this._reverseRefMap&&f!==this._rootItemPropName){var e=f,g=this.getValues(c,e);if(g.length==1)d[e]=this._flatten(g[0]);else for(var j=
[],k=0;k<g.length;++k){j.push(this._flatten(g[k]));d[e]=j}}a.items.push(d)}}f=true;return dojo.toJson(a,f)},_isEmpty:function(a){var b=true;if(dojo.isObject(a)){var c;for(c in a){b=false;break}}else if(dojo.isArray(a))if(a.length>0)b=false;return b},save:function(a){this._assert(!this._saveInProgress);this._saveInProgress=true;var b=this,c=function(){b._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};b._saveInProgress=false;if(a&&a.onComplete){var e=a.scope||dojo.global;a.onComplete.call(e)}},
d=function(e){b._saveInProgress=false;if(a&&a.onError){var g=a.scope||dojo.global;a.onError.call(g,e)}};if(this._saveEverything){var f=this._getNewFileContentString();this._saveEverything(c,d,f)}this._saveCustom&&this._saveCustom(c,d);!this._saveEverything&&!this._saveCustom&&c()},revert:function(){this._assert(!this._saveInProgress);var a;for(a in this._pending._modifiedItems){var b=this._pending._modifiedItems[a],c=null;c=this._itemsByIdentity?this._itemsByIdentity[a]:this._arrayOfAllItems[a];b[this._storeRefPropName]=
this;for(key in c)delete c[key];dojo.mixin(c,b)}var d;for(a in this._pending._deletedItems){d=this._pending._deletedItems[a];d[this._storeRefPropName]=this;b=d[this._itemNumPropName];if(d["backup_"+this._reverseRefMap]){d[this._reverseRefMap]=d["backup_"+this._reverseRefMap];delete d["backup_"+this._reverseRefMap]}this._arrayOfAllItems[b]=d;if(this._itemsByIdentity)this._itemsByIdentity[a]=d;d[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(d)}for(a in this._pending._deletedItems){d=this._pending._deletedItems[a];
if(d["backupRefs_"+this._reverseRefMap]){dojo.forEach(d["backupRefs_"+this._reverseRefMap],function(f){var e;e=this._itemsByIdentity?this._itemsByIdentity[f.id]:this._arrayOfAllItems[f.id];this._addReferenceToMap(e,d,f.attr)},this);delete d["backupRefs_"+this._reverseRefMap]}}for(a in this._pending._newItems){b=this._pending._newItems[a];b[this._storeRefPropName]=null;this._arrayOfAllItems[b[this._itemNumPropName]]=null;b[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,
b);this._itemsByIdentity&&delete this._itemsByIdentity[a]}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true},isDirty:function(a){if(a){a=this.getIdentity(a);return(new Boolean(this._pending._newItems[a]||this._pending._modifiedItems[a]||this._pending._deletedItems[a])).valueOf()}else{if(!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems))return true;return false}},onSet:function(){},onNew:function(){},
onDelete:function(){},close:function(){if(this.clearOnClose)if(this.isDirty())throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");else this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.form.Form"]){dojo._hasResource["dijit.form.Form"]=true;dojo.provide("dijit.form.Form");dojo.declare("dijit.form.Form",[dijit._Widget,dijit._Templated,dijit.form._FormMixin],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onreset:_onReset,onsubmit:_onSubmit' ${nameAttrSetting}></form>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{action:"",method:"",
encType:"","accept-charset":"",accept:"",target:""}),postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){this.encType=a;dojo.attr(this.domNode,"encType",a);if(dojo.isIE)this.domNode.encoding=a},postCreate:function(){if(dojo.isIE&&this.srcNodeRef&&this.srcNodeRef.attributes){var a=this.srcNodeRef.attributes.getNamedItem("encType");a&&!a.specified&&typeof a.value=="string"&&
this.attr("encType",a.value)}this.inherited(arguments)},onReset:function(){return true},_onReset:function(a){var b={returnValue:true,preventDefault:function(){this.returnValue=false},stopPropagation:function(){},currentTarget:a.currentTarget,target:a.target};this.onReset(b)!==false&&b.returnValue&&this.reset();dojo.stopEvent(a);return false},_onSubmit:function(a){var b=dijit.form.Form.prototype;if(this.execute!=b.execute||this.onExecute!=b.onExecute){dojo.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.",
"","2.0");this.onExecute();this.execute(this.getValues())}this.onSubmit(a)===false&&dojo.stopEvent(a)},onSubmit:function(){return this.isValid()},submit:function(){this.onSubmit()!==false&&this.containerNode.submit()}})}
if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,templateString:dojo.cache("dijit.form","templates/TextBox.html",'<input class="dijit dijitReset dijitLeft" dojoAttachPoint=\'textbox,focusNode\'\n\tdojoAttachEvent=\'onmouseenter:_onMouse,onmouseleave:_onMouse\'\n\tautocomplete="off" type="${type}" ${nameAttrSetting}\n\t/>\n'),
baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),_getValueAttr:function(){return this.parse(this.attr("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var d;if(a!==undefined){d=this.filter(a);if(typeof c!="string")c=d!==null&&(typeof d!="number"||!isNaN(d))?this.filter(this.format(d,this.constraints)):""}if(c!=null&&c!=undefined&&(typeof c!="number"||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=
c;this.inherited(arguments,[d,b])},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use attr('displayedValue') instead.","","2.0");return this.attr("displayedValue")},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},setDisplayedValue:function(a){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use attr('displayedValue', ...) instead.","","2.0");this.attr("displayedValue",a)},_setDisplayedValueAttr:function(a){if(a===
null||a===undefined)a="";else if(typeof a!="string")a=String(a);this.textbox.value=a;this._setValueAttr(this.attr("value"),undefined,a)},format:function(a){return a==null||a==undefined?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},_onInput:function(a){if(a&&a.type&&/key/i.test(a.type)&&a.keyCode)switch(a.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return}if(this.intermediateChanges){var b=this;setTimeout(function(){b._handleOnChange(b.attr("value"),
false)},0)}this._refreshState()},_onMouseDown:function(){this._selectOnUp=!this._focused&&!this.disabled&&!this.readOnly},_onClick:function(){if(this._focused&&this._selectOnUp){var a;if(dojo.isIE){a=dojo.doc.selection.createRange();var b=a.parentElement();a=b==this.textbox&&a.text.length==0}else a=this.textbox.selectionStart==this.textbox.selectionEnd;a&&dijit.selectInputText(this.textbox)}this._selectOnUp=false},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);
if(dojo.isMoz||dojo.isOpera)this.connect(this.textbox,"oninput",this._onInput);else{this.connect(this.textbox,"onkeydown",this._onInput);this.connect(this.textbox,"onkeyup",this._onInput);this.connect(this.textbox,"onpaste",this._onInput);this.connect(this.textbox,"oncut",this._onInput)}if(this.selectOnClick){this.connect(this.textbox,"onmousedown",this._onMouseDown);this.connect(this.textbox,"onclick",this._onClick)}},_blankValue:"",filter:function(a){if(a===null)return this._blankValue;if(typeof a!=
"string")return a;if(this.trim)a=dojo.trim(a);if(this.uppercase)a=a.toUpperCase();if(this.lowercase)a=a.toLowerCase();if(this.propercase)a=a.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)});return a},_setBlurValue:function(){this._setValueAttr(this.attr("value"),true)},_onBlur:function(){if(!this.disabled){this._setBlurValue();this.inherited(arguments);if(this.selectOnClick&&dojo.isMoz)this.textbox.selectionStart=this.textbox.selectionEnd=undefined}},_onFocus:function(){if(!(this.disabled||
this.readOnly)){this._refreshState();this.inherited(arguments)}},reset:function(){this.textbox.value="";this.inherited(arguments)}});dijit.selectInputText=function(a,b,c){var d=dojo.global,f=dojo.doc;a=dojo.byId(a);if(isNaN(b))b=0;if(isNaN(c))c=a.value?a.value.length:0;dijit.focus(a);if(f.selection&&dojo.body().createTextRange){if(a.createTextRange){a=a.createTextRange();with(a){collapse(true);moveStart("character",-99999);moveStart("character",b);moveEnd("character",c-b);select()}}}else d.getSelection&&
a.setSelectionRange&&a.setSelectionRange(b,c)}}
if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html",'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip">\n\t<div class="dijitTooltipContainer dijitTooltipContents" dojoAttachPoint="containerNode" waiRole=\'alert\'></div>\n\t<div class="dijitTooltipConnector"></div>\n</div>\n'),postCreate:function(){dojo.body().appendChild(this.domNode);
this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")})},show:function(a,b,c){if(!(this.aroundNode&&this.aroundNode===b))if(this.fadeOut.status()=="playing")this._onDeck=arguments;else{this.containerNode.innerHTML=a;this.domNode.style.top=this.domNode.offsetTop+1+"px";dijit.placeOnScreenAroundElement(this.domNode,
b,dijit.getPopupAroundAlignment(c&&c.length?c:dijit.Tooltip.defaultPosition,this.isLeftToRight()),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=b}},orient:function(a,b,c){a.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+
"-"+c]},_onShow:function(){if(dojo.isIE)this.domNode.style.filter=""},hide:function(a){if(this._onDeck&&this._onDeck[1]==a)this._onDeck=null;else if(this.aroundNode===a){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play()}},_onHide:function(){this.domNode.style.cssText="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null}}});dijit.showTooltip=function(a,b,c){if(!dijit._masterTT)dijit._masterTT=new dijit._MasterTooltip;return dijit._masterTT.show(a,
b,c)};dijit.hideTooltip=function(a){if(!dijit._masterTT)dijit._masterTT=new dijit._MasterTooltip;return dijit._masterTT.hide(a)};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],constructor:function(){this._nodeConnectionsById={}},_setConnectIdAttr:function(a){for(var b in this._nodeConnectionsById)this.removeTarget(b);dojo.forEach(dojo.isArrayLike(a)?a:[a],this.addTarget,this)},_getConnectIdAttr:function(){var a=[];for(var b in this._nodeConnectionsById)a.push(b);
return a},addTarget:function(a){if(a=dojo.byId(a))if(!(a.id in this._nodeConnectionsById)){this._nodeConnectionsById[a.id]=[this.connect(a,"onmouseenter","_onTargetMouseEnter"),this.connect(a,"onmouseleave","_onTargetMouseLeave"),this.connect(a,"onfocus","_onTargetFocus"),this.connect(a,"onblur","_onTargetBlur")];if(dojo.isIE&&!a.style.zoom)a.style.zoom=1}},removeTarget:function(a){a=a.id||a;if(a in this._nodeConnectionsById){dojo.forEach(this._nodeConnectionsById[a],this.disconnect,this);delete this._nodeConnectionsById[a]}},
postCreate:function(){dojo.addClass(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;dojo.forEach(dojo.isArrayLike(a)?a:[a],this.addTarget,this)},_onTargetMouseEnter:function(a){this._onHover(a)},_onTargetMouseLeave:function(a){this._onUnHover(a)},_onTargetFocus:function(a){this._focus=true;this._onHover(a)},_onTargetBlur:function(a){this._focus=false;this._onUnHover(a)},_onHover:function(a){if(!this._showTimer){var b=a.target;this._showTimer=setTimeout(dojo.hitch(this,
function(){this.open(b)}),this.showDelay)}},_onUnHover:function(){if(!this._focus){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}this.close()}},open:function(a){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}dijit.showTooltip(this.label||this.domNode.innerHTML,a,this.position);this._connectNode=a;this.onShow(a,this.position)},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide()}if(this._showTimer){clearTimeout(this._showTimer);
delete this._showTimer}},onShow:function(){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments)}});dijit.Tooltip.defaultPosition=["after","before"]}
if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:dojo.cache("dijit.form","templates/ValidationTextBox.html",'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse" waiRole="presentation"\n\t><div style="overflow:hidden;"\n\t\t><div class="dijitReset dijitValidationIcon"><br></div\n\t\t><div class="dijitReset dijitValidationIconText">&Chi;</div\n\t\t><div class="dijitReset dijitInputField"\n\t\t\t><input class="dijitReset" dojoAttachPoint=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${nameAttrSetting} type=\'${type}\'\n\t\t/></div\n\t></div\n></div>\n'),baseClass:"dijitTextBox",
required:false,promptMessage:"",invalidMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(){return this.regExp},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused)},validator:function(a,b){return(new RegExp("^(?:"+this.regExpGen(b)+")"+(this.required?"":"?")+"$")).test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||this.parse(a,b)!==undefined)},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==
0},isValid:function(){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(a){return/^\s*$/.test(a)},getErrorMessage:function(){return this.invalidMessage},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:true,validate:function(a){var b="",c=this.disabled||this.isValid(a);if(c)this._maskValidSubsetError=true;var d=!c&&a&&this._isValidSubset(),f=this._isEmpty(this.textbox.value);if(f)this._maskValidSubsetError=true;this.state=c||!this._hasBeenBlurred&&
f||d?"":"Error";if(this.state=="Error")this._maskValidSubsetError=false;this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",c?"false":"true");if(a){if(f)b=this.getPromptMessage(true);if(!b&&(this.state=="Error"||d&&!this._maskValidSubsetError))b=this.getErrorMessage(true)}this.displayMessage(b);return c},_message:"",displayMessage:function(a){if(this._message!=a){this._message=a;dijit.hideTooltip(this.domNode);a&&dijit.showTooltip(a,this.domNode,this.tooltipPosition)}},_refreshState:function(){this.validate(this._focused);
this.inherited(arguments)},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this.constraints.locale=this.lang;this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$")this.invalidMessage=this.messages.invalidMessage;var a=this.regExpGen(this.constraints);this.regExp=a;var b="";a!=".*"&&this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(d){switch(d.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":b+=
d;break;case ")":b+="|$)";break;default:b+="(?:"+d+"|$)";break}});try{"".search(b)}catch(c){b=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp)}this._partialre="^(?:"+b+")$"},_setDisabledAttr:function(a){this.inherited(arguments);if(this.valueNode)this.valueNode.disabled=a;this._refreshState()},_setRequiredAttr:function(a){this.required=a;dijit.setWaiState(this.focusNode,"required",a);this._refreshState()},postCreate:function(){if(dojo.isIE){var a=dojo.getComputedStyle(this.focusNode);
if(a)if(a=a.fontFamily)this.focusNode.style.fontFamily=a}this.inherited(arguments)},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments)}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.attr("value"));return a!=null?typeof a=="string"?a:this.serialize(a,this.constraints):""},
validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.place("<input type='hidden'"+(this.name?" name='"+this.name+"'":"")+">",this.textbox,"after")},_setDisabledAttr:function(a){this.inherited(arguments);dojo.attr(this.valueNode,"disabled",a)},reset:function(){this.valueNode.value="";this.inherited(arguments)}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",
rangeCheck:function(a,b){return("min"in b?this.compare(a,b.min)>=0:true)&&("max"in b?this.compare(a,b.max)<=0:true)},isInRange:function(){return this.rangeCheck(this.attr("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.attr("value"),b=false,c=false;if("min"in this.constraints){b=this.constraints.min;b=this.compare(a,typeof b=="number"&&b>=0&&a!=0?0:b);b=typeof b=="number"&&b<0}if("max"in this.constraints){c=this.constraints.max;c=this.compare(a,typeof c!="number"||c>0?c:
0);c=typeof c=="number"&&c>0}return b||c},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(a))},getErrorMessage:function(a){var b=this.attr("value");if(b!==null&&b!==""&&b!==undefined&&!this.isInRange(a))return this.rangeMessage;return this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=
dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage}},postCreate:function(){this.inherited(arguments);this.constraints.min!==undefined&&dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min);this.constraints.max!==undefined&&dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max)},_setValueAttr:function(a){dijit.setWaiState(this.focusNode,"valuenow",a);this.inherited(arguments)}})}
if(!dojo._hasResource["dijit._HasDropDown"]){dojo._hasResource["dijit._HasDropDown"]=true;dojo.provide("dijit._HasDropDown");dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouse:function(a){if(!(a.type=="click"&&!this._seenKeydown)){this._seenKeydown=false;if(a.type=="mousedown")this._docHandler=this.connect(dojo.doc,
"onmouseup","_onDropDownMouseup");if(!(this.disabled||this.readOnly)){this._stopClickEvents&&dojo.stopEvent(a);this.toggleDropDown();if(a.type=="click"||a.type=="keypress")this._onDropDownMouseup()}}},_onDropDownMouseup:function(a){a&&this._docHandler&&this.disconnect(this._docHandler);var b=this.dropDown,c=false;if(a&&this._opened){var d=dojo.position(this._buttonNode,true);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w)||!(a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(d=a.target;d&&!c;)if(dojo.hasClass(d,"dijitPopup"))c=
true;else d=d.parentNode;if(c){d=a.target;if(b.onItemClick){for(var f;d&&!(f=dijit.byNode(d));)d=d.parentNode;f&&f.onClick&&f.getParent&&f.getParent().onItemClick(f,a)}return}}}this._opened&&b.focus&&window.setTimeout(dojo.hitch(b,"focus"),1)},_setupDropdown:function(){this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;this._aroundNode=this._aroundNode||this.domNode;this.connect(this._buttonNode,"onmousedown",
"_onDropDownMouse");this.connect(this._buttonNode,"onclick","_onDropDownMouse");this.connect(this._buttonNode,"onkeydown","_onDropDownKeydown");this.connect(this._buttonNode,"onblur","_onDropDownBlur");this.connect(this._buttonNode,"onkeypress","_onKey");if(this._setStateClass){this.connect(this,"openDropDown","_setStateClass");this.connect(this,"closeDropDown","_setStateClass")}var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",
right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this._setupDropdown();this.inherited(arguments)},destroyDescendants:function(){if(this.dropDown){this.dropDown._destroyed||this.dropDown.destroyRecursive();delete this.dropDown}this.inherited(arguments)},_onDropDownKeydown:function(){this._seenKeydown=true},_onKeyPress:function(a){if(this._opened&&a.charOrCode==dojo.keys.ESCAPE&&
!a.shiftKey&&!a.ctrlKey&&!a.altKey){this.toggleDropDown();dojo.stopEvent(a)}else this.inherited(arguments)},_onDropDownBlur:function(){this._seenKeydown=false},_onKey:function(a){if(!(this.disabled||this.readOnly)){var b=this.dropDown;if(b&&this._opened&&b.handleKey)if(b.handleKey(a)===false)return;if(b&&this._opened&&a.keyCode==dojo.keys.ESCAPE)this.toggleDropDown();else if(a.keyCode==dojo.keys.DOWN_ARROW||a.keyCode==dojo.keys.ENTER||a.charOrCode==" ")this._onDropDownMouse(a)}},_onBlur:function(){this.closeDropDown();
this.inherited(arguments)},isLoaded:function(){return true},loadDropDown:function(a){a()},toggleDropDown:function(){if(!(this.disabled||this.readOnly)){this.focus();var a=this.dropDown;if(a)if(this._opened)this.closeDropDown();else this.isLoaded()?this.openDropDown():this.loadDropDown(dojo.hitch(this,"openDropDown"))}},openDropDown:function(){var a=this.dropDown,b=a.domNode,c=this;if(!this._preparedNode){dijit.popup.moveOffScreen(b);this._preparedNode=true;if(b.style.width)this._explicitDDWidth=true;
if(b.style.height)this._explicitDDHeight=true}if(this.maxHeight||this.forceWidth||this.autoWidth){var d={display:"",visibility:"hidden"};if(!this._explicitDDWidth)d.width="";if(!this._explicitDDHeight)d.height="";dojo.style(b,d);d=dojo.marginBox(b);var f=this.maxHeight&&d.h>this.maxHeight;dojo.style(b,{overflow:f?"auto":"hidden"});if(this.forceWidth)d.w=this.domNode.offsetWidth;else if(this.autoWidth)d.w=Math.max(d.w,this.domNode.offsetWidth);else delete d.w;if(f){d.h=this.maxHeight;if("w"in d)d.w+=
16}else delete d.h;delete d.t;delete d.l;dojo.isFunction(a.resize)?a.resize(d):dojo.marginBox(b,d)}a=dijit.popup.open({parent:this,popup:a,around:this._aroundNode,orient:dijit.getPopupAroundAlignment(this.dropDownPosition&&this.dropDownPosition.length?this.dropDownPosition:["below"],this.isLeftToRight()),onExecute:function(){c.closeDropDown(true)},onCancel:function(){c.closeDropDown(true)},onClose:function(){dojo.attr(c._popupStateNode,"popupActive",false);dojo.removeClass(c._popupStateNode,"dijitHasDropDownOpen");
c._opened=false;c.state=""}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(c._popupStateNode,"dijitHasDropDownOpen");this._opened=true;this.state="Opened";return a},closeDropDown:function(a){if(this._opened){dijit.popup.close(this.dropDown);a&&this.focus();this._opened=false;this.state=""}}})}
if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html",'<span class="dijit dijitReset dijitLeft dijitInline"\n\tdojoAttachEvent="onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"\n\t><span class="dijitReset dijitRight dijitInline"\n\t\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\t\t><button class="dijitReset dijitStretch dijitButtonContents"\n\t\t\t\tdojoAttachPoint="titleNode,focusNode"\n\t\t\t\t${nameAttrSetting} type="${type}" value="${value}" waiRole="button" waiState="labelledby-${id}_label"\n\t\t\t\t><span class="dijitReset dijitInline" dojoAttachPoint="iconNode"\n\t\t\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#10003;</span\n\t\t\t\t></span\n\t\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\t\tid="${id}_label"\n\t\t\t\t\tdojoAttachPoint="containerNode"\n\t\t\t\t></span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n'),
attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),_onClick:function(a){if(this.disabled)return false;this._clicked();return this.onClick(a)},_onButtonClick:function(a){if(this._onClick(a)===false)a.preventDefault();else if(this.type=="submit"&&!this.focusNode.form)for(var b=this.domNode;b.parentNode;b=b.parentNode){var c=dijit.byNode(b);if(c&&typeof c._onSubmit=="function"){c._onSubmit(a);
break}}},_setValueAttr:function(a){var b=this.attributeMap.value||"";if(this[b.node||b||"domNode"].tagName=="BUTTON")a!=this.value&&console.debug("Cannot change the value attribute on a Button widget.")},_fillContent:function(a){if(a&&(!this.params||!("label"in this.params)))this.attr("label",a.innerHTML)},postCreate:function(){dojo.setSelectable(this.focusNode,false);this.inherited(arguments)},_setShowLabelAttr:function(a){this.containerNode&&dojo.toggleClass(this.containerNode,"dijitDisplayNone",
!a);this.showLabel=a},onClick:function(){return true},_clicked:function(){},setLabel:function(a){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",a)},_setLabelAttr:function(a){this.containerNode.innerHTML=this.label=a;if(this.showLabel==false&&!this.params.title)this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"")}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container,
dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html",'<span class="dijit dijitReset dijitLeft dijitInline"\n\tdojoAttachPoint="_buttonNode"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"\n\t><span class=\'dijitReset dijitRight dijitInline\'\n\t\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\t\t><button class="dijitReset dijitStretch dijitButtonContents"\n\t\t\t\t${nameAttrSetting} type="${type}" value="${value}"\n\t\t\t\tdojoAttachPoint="focusNode,titleNode,_arrowWrapperNode"\n\t\t\t\twaiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t\t\t><span class="dijitReset dijitInline"\n\t\t\t\t\tdojoAttachPoint="iconNode"\n\t\t\t\t></span\n\t\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\t\tdojoAttachPoint="containerNode,_popupStateNode"\n\t\t\t\t\tid="${id}_label"\n\t\t\t\t></span\n\t\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner">&thinsp;</span\n\t\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n'),
_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(a);delete this.dropDownContainer}this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!a.href||a.isLoaded},loadDropDown:function(){var a=this.dropDown;
if(a)if(this.isLoaded())this.openDropDown();else{var b=dojo.connect(a,"onLoad",function(){dojo.disconnect(b);this.openDropDown()});a.refresh()}},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form","templates/ComboButton.html",'<table class=\'dijit dijitReset dijitInline dijitLeft\'\n\tcellspacing=\'0\' cellpadding=\'0\' waiRole="presentation"\n\t><tbody waiRole="presentation"><tr waiRole="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonNode"><button class="dijitReset dijitButtonContents"\n\t\t\tdojoAttachEvent="onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"  dojoAttachPoint="titleNode"\n\t\t\twaiRole="button" waiState="labelledby-${id}_label"\n\t\t\t><div class="dijitReset dijitInline" dojoAttachPoint="iconNode" waiRole="presentation"></div\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode" waiRole="presentation"></div\n\t\t></button></td\n\t\t><td class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n\t\t\tdojoAttachPoint="_popupStateNode,focusNode,_buttonNode"\n\t\t\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse"\n\t\t\tstateModifier="DownArrow"\n\t\t\ttitle="${optionsTitle}" ${nameAttrSetting}\n\t\t\twaiRole="button" waiState="haspopup-true"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" waiRole="presentation">&thinsp;</div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" waiRole="presentation">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n'),
attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",_focusedNode:null,postCreate:function(){this.inherited(arguments);this._focalNodes=[this.titleNode,this._popupStateNode];var a=dojo.isIE;dojo.forEach(this._focalNodes,dojo.hitch(this,function(b){this.connect(b,a?"onactivate":"onfocus",this._onNodeFocus);this.connect(b,a?"ondeactivate":"onblur",this._onNodeBlur)}));if(a&&
(a<8||dojo.isQuirks))with(this.titleNode){style.width=scrollWidth+"px";this.connect(this.titleNode,"onresize",function(){setTimeout(function(){style.width=scrollWidth+"px"},0)})}},focusFocalNode:function(a){this._focusedNode=a;dijit.focus(a)},hasNextFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[1]},focusNext:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?1:0];dijit.focus(this._focusedNode)},hasPrevFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[0]},
focusPrev:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?0:1];dijit.focus(this._focusedNode)},getFocalNodes:function(){return this._focalNodes},_onNodeFocus:function(a){this._focusedNode=a.currentTarget;a=this._focusedNode==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.addClass(this._focusedNode,a)},_onNodeBlur:function(a){var b=a.currentTarget==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.removeClass(a.currentTarget,
b)},_onBlur:function(){this.inherited(arguments);this._focusedNode=null}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(){this.attr("checked",!this.checked)},_setCheckedAttr:function(a){this.checked=a;dojo.attr(this.focusNode||this.domNode,"checked",a);dijit.setWaiState(this.focusNode||this.domNode,"pressed",a);this._setStateClass();
this._handleOnChange(a,true)},setChecked:function(a){dojo.deprecated("setChecked("+a+") is deprecated. Use attr('checked',"+a+") instead.","","2.0");this.attr("checked",a)},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false)}})}
if(!dojo._hasResource["lib.dijit.TabPane.AlterPassword"]){dojo._hasResource["lib.dijit.TabPane.AlterPassword"]=true;dojo.provide("lib.dijit.TabPane.AlterPassword");dojo.declare("lib.dijit.TabPane.AlterPassword",[dijit._Widget,dijit._Templated],{templateString:'<div>\n\t<div id="${id}/form" dojoType="dijit.form.Form">\n\n\t\t<div dojoType="dijit.form.TextBox" type="password" name="original_password"></div>\n\t\t<label>\u539f\u5bc6\u7801</label><br />\n\t\t<div dojoType="dijit.form.TextBox" id="${id}/first" type="password" name="password"></div>\n\t\t<label>\u65b0\u5bc6\u7801</label><br />\n\t\t<div dojoType="dijit.form.ValidationTextBox" id="${id}/second" invalidMessage="\u4e24\u6b21\u5bc6\u7801\u4e0d\u5339\u914d" type="password"  ></div>\n\t\t<label>\u786e\u8ba4\u65b0\u5bc6\u7801</label><br />\n\t\t<div dojoType="dijit.form.Button" id="${id}/commit" name="connect"\n\t\t\tlabel="\u4fee\u6539\u5bc6\u7801"></div>\n\t\t<div id="${id}/msg" dojoType="dijit.Tooltip" connectId="${id}/commit" ></div>\n\t\t<div dojoType="dijit.form.Button" type="reset" \n\t\t\tlabel="\u590d\u4f4d"></div>\n\t</div>\n</div>\n',
widgetsInTemplate:true,postCreate:function(){var a=this,b=dijit.byId(this.id+"/second");b.attr("validator",function(){var c=dijit.byId(a.id+"/first");return c.value===b.value});this.attr("_form",dijit.byId(this.id+"/form"));this.attr("_tooltip",dijit.byId(this.id+"/msg"));dijit.byId(this.id+"/commit").onClick=function(){a.execute()}},execute:function(){alert("\u6a21\u62df\u63d0\u4ea4")}})}
if(!dojo._hasResource["lib.callback"]){dojo._hasResource["lib.callback"]=true;(function(a){a=dojo.provide("lib.callback");var b=a.callback_chain={};b.ui_about=function(){dojo.subscribe("ui/about",function(){var c=dijit.byId("workspace"),d=new lib.dijit.TabPane({title:"\u5173\u4e8e\u7cfb\u7edf",href:lib.util.getResource("about.html")});c.addPane(d)})};b.ui_login=function(){dojo.subscribe("ui/login",function(){var c=dojo.cookie("userInfo");c&&dojo.fromJson(c)?dojo.publish("msg/toaster",[{message:"\u8bf7\u52ff\u91cd\u590d\u767b\u5f55",
type:"warning"}]):dijit.byId("login:dialog").show()})};b.ui_logout=function(){function c(){dojo.cookie("userInfo",null,{path:"/ui/"});dojo.publish("ui/adjust");var d=dijit.byId("workspace");dojo.forEach(d.getChildren(),function(f){d.removeChild(f)});dojo.publish("ui/about")}dojo.subscribe("ui/logout",function(){dojo.xhrGet({url:lib.util.getApi("authentication/logout").url,handleAs:"json",load:function(d){if(d.ok){c();dojo.publish("msg/toaster",[{message:"\u767b\u51fa\u6210\u529f",type:"message"}])}else dojo.publish("msg/toaster",
[{message:"\u65e0\u6cd5\u767b\u51fa\uff0c\u8bf7\u5148\u767b\u5f55",type:"error"}])},error:function(){console.error("cannot load authentication page")}})})};b.ui_adjust_gui=function(){dojo.subscribe("ui/adjust",function(){var c=dijit.byId("navigator"),d=dojo.fromJson(dojo.cookie("userInfo"));if(d){d.typename=d.type=="t"&&"\u6559\u5e08"||d.type=="s"&&"\u5b66\u751f"||d.type=="a"&&"\u7ba1\u7406\u5458"||null;dijit.byId("header").setPrompt("\u4f60\u597d\uff01"+d.typename+'<a  style="color:#FF8715;" onClick="dojo.publish(\'newtab/information\'); return false">'+
d.name+"</a>");c.resetChildren();c.showChild(d.typename);c.show()}else{c.hide();dijit.byId("header").setPrompt('\u4f60\u597d\uff01<span style="color:#FF8715;">\u8bbf\u5ba2</span>\uff0c\u4f60\u8fd8\u672a\u767b\u5f55')}})};b.action_login_success=function(){dojo.subscribe("action/login_success",function(c){dojo.cookie("userInfo",dojo.toJson(c),{path:"/ui/"});dojo.publish("msg/toaster",[{message:"\u767b\u5165\u6210\u529f",type:"messge"}]);dojo.publish("ui/adjust")})};b.newtab=function(){dojo.subscribe("newtab/information",
function(){var c={cells:[[{name:"\u5c5e\u6027",field:"attribute",width:"10em"},{name:"\u503c",field:"value",width:"10em",editable:true}]]},d=dojo.fromJson(dojo.cookie("userInfo")).id;d=new dojo.data.ItemFileWriteStore({url:lib.util.getApi("information/see").url+"&id="+d});c=new dojox.grid.DataGrid({selectable:true,autoWidth:true,store:d,structure:c});d=new lib.dijit.TabPane({title:"\u67e5\u770b\u4fe1\u606f"});d.attr("content",c);dijit.byId("workspace").addPane(d)});dojo.subscribe("newtab/alterpassword",
function(){var c=dijit.byId("workspace"),d=new lib.dijit.TabPane({title:"\u4fee\u6539\u5bc6\u7801"}),f=new lib.dijit.TabPane.AlterPassword({execute:function(){var e=this;dojo.xhrPost({url:lib.util.getApi("information/alterpassword").url,form:e._form.domNode,handleAs:"json",load:function(g){if(g.ok===true){g=new dijit.Dialog({title:"Success",content:"\u4fee\u6539\u5bc6\u7801\u6210\u529f"});g.startup();g.show()}else throw g.msg;},error:function(g){g=new dijit.Dialog({title:"Failure",content:'<span style="color:red;">Error</span>:'+
g});g.startup();g.show()}})}});d.containerNode.appendChild(f.domNode);c.addPane(d)})};a.bind=function(){for(var c in b)b[c]()}})()}
if(!dojo._hasResource["lib.dijit.LoginForm"]){dojo._hasResource["lib.dijit.LoginForm"]=true;(function(){dojo.provide("lib.dijit.LoginForm");dojo.declare("lib.dijit.LoginForm",[dijit._Widget,dijit._Templated],{widgetsInTemplate:true,templateString:'<div dojoType="dijit.layout.ContentPane">\n\t<div dojoType="dijit.form.Form">\n\t<div dojoType="dijit.form.TextBox" selectOnClick="true"  name="user"></div>\n\t<label>\u7528\u6237\u540d</label><br />\n\t<div dojoType="dijit.form.TextBox" type="password" name="passwd"></div>\n\t<label>\u5bc6\u7801</label><br />\n\t<div dojoType="dijit.form.Button" id="${id}:connect" name="connect"\n\t\tlabel="\u767b\u5165"></div>\n\t<div dojoType="dijit.form.Button" label="\u91cd\u8bbe" type="reset"></div>\n\t<span id="${id}:prompt" name="prompt"></span>\n</div>\n</div>\n',postCreate:function(){this.form=
this.domNode.getElementsByTagName("form")[0];this.prompt=function(){return dojo.byId(this.id+":prompt")};var a=this;dijit.byId(this.id+":connect").onClick=function(){dojo.hitch(a,"execute")()}},execute:function(){var a=this;a.setPrompt("connectting");dojo.xhrPost({url:this.url,form:this.form,handleAs:"json",load:function(b){if(b.ok===true){a.setPrompt();a.postLogin(b)}else throw b.msg;},error:function(b){a.setPrompt("error",b)},timeout:this.timeout})},setPrompt:function(a,b){if(a)if(a=="connectting")this.prompt().innerHTML=
'<span style="color:#C9C800;">connecting...</span>';else if(a=="error")this.prompt().innerHTML='<span style="color:red;">'+b+"</span>";else console.error("invalid argument:"+a);else this.prompt().innerHTML=""},url:null,timeout:5E3,postLogin:function(){},lastElement:null})})()}
if(!dojo._hasResource["dojox.widget.Toaster"]){dojo._hasResource["dojox.widget.Toaster"]=true;dojo.provide("dojox.widget.Toaster");dojo.declare("dojox.widget.Toaster",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitToasterClip" dojoAttachPoint="clipNode"><div class="dijitToasterContainer" dojoAttachPoint="containerNode" dojoAttachEvent="onclick:onSelect"><div class="dijitToasterContent" dojoAttachPoint="contentNode"></div></div></div>',messageTopic:"",messageTypes:{MESSAGE:"message",
WARNING:"warning",ERROR:"error",FATAL:"fatal"},defaultType:"message",positionDirection:"br-up",positionDirectionTypes:["br-up","br-left","bl-up","bl-right","tr-down","tr-left","tl-down","tl-right"],duration:2E3,slideDuration:500,separator:"<hr></hr>",postCreate:function(){this.inherited(arguments);this.hide();dojo.body().appendChild(this.domNode);this.messageTopic&&dojo.subscribe(this.messageTopic,this,"_handleMessage")},_handleMessage:function(a){dojo.isString(a)?this.setContent(a):this.setContent(a.message,
a.type,a.duration)},_capitalize:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)},setContent:function(a,b,c){c=c||this.duration;if(this.slideAnim){this.slideAnim.status()!="playing"&&this.slideAnim.stop();if(this.slideAnim.status()=="playing"||this.fadeAnim&&this.fadeAnim.status()=="playing"){setTimeout(dojo.hitch(this,function(){this.setContent(a,b,c)}),50);return}}for(var d in this.messageTypes)dojo.removeClass(this.containerNode,"dijitToaster"+this._capitalize(this.messageTypes[d]));
dojo.style(this.containerNode,"opacity",1);this._setContent(a);dojo.addClass(this.containerNode,"dijitToaster"+this._capitalize(b||this.defaultType));this.show();d=dojo.marginBox(this.containerNode);this._cancelHideTimer();if(this.isVisible){this._placeClip();this._stickyMessage||this._setHideTimer(c)}else{var f=this.containerNode.style,e=this.positionDirection;if(e.indexOf("-up")>=0){f.left="0px";f.top=d.h+10+"px"}else if(e.indexOf("-left")>=0){f.left=d.w+10+"px";f.top="0px"}else if(e.indexOf("-right")>=
0){f.left=0-d.w-10+"px";f.top="0px"}else if(e.indexOf("-down")>=0){f.left="0px";f.top=0-d.h-10+"px"}else throw new Error(this.id+".positionDirection is invalid: "+e);this.slideAnim=dojo.fx.slideTo({node:this.containerNode,top:0,left:0,duration:this.slideDuration});this.connect(this.slideAnim,"onEnd",function(){this.fadeAnim=dojo.fadeOut({node:this.containerNode,duration:1E3});this.connect(this.fadeAnim,"onEnd",function(){this.isVisible=false;this.hide()});this._setHideTimer(c);this.connect(this,"onSelect",
function(){this._cancelHideTimer();this._stickyMessage=false;this.fadeAnim.play()});this.isVisible=true});this.slideAnim.play()}},_setContent:function(a){if(dojo.isFunction(a))a(this);else{if(a&&this.isVisible)a=this.contentNode.innerHTML+this.separator+a;this.contentNode.innerHTML=a}},_cancelHideTimer:function(){if(this._hideTimer){clearTimeout(this._hideTimer);this._hideTimer=null}},_setHideTimer:function(a){this._cancelHideTimer();if(a>0){this._cancelHideTimer();this._hideTimer=setTimeout(dojo.hitch(this,
function(){if(this.bgIframe&&this.bgIframe.iframe)this.bgIframe.iframe.style.display="none";this._hideTimer=null;this._stickyMessage=false;this.fadeAnim.play()}),a)}else this._stickyMessage=true},_placeClip:function(){var a=dijit.getViewport(),b=dojo.marginBox(this.containerNode),c=this.clipNode.style;c.height=b.h+"px";c.width=b.w+"px";var d=this.positionDirection;if(d.match(/^t/))c.top=a.t+"px";else if(d.match(/^b/))c.top=a.h-b.h-2+a.t+"px";if(d.match(/^[tb]r-/))c.left=a.w-b.w-1-a.l+"px";else if(d.match(/^[tb]l-/))c.left=
"0px";c.clip="rect(0px, "+b.w+"px, "+b.h+"px, 0px)";if(dojo.isIE){if(!this.bgIframe){this.clipNode.id=dijit.getUniqueId("dojox_widget_Toaster_clipNode");this.bgIframe=new dijit.BackgroundIframe(this.clipNode)}if(a=this.bgIframe.iframe)a.style.display="block"}},onSelect:function(){},show:function(){dojo.style(this.domNode,"display","block");this._placeClip();if(!this._scrollConnected)this._scrollConnected=dojo.connect(window,"onscroll",this,this._placeClip)},hide:function(){dojo.style(this.domNode,
"display","none");if(this._scrollConnected){dojo.disconnect(this._scrollConnected);this._scrollConnected=false}dojo.style(this.containerNode,"opacity",1)}})}
if(!dojo._hasResource["lib.shadow"]){dojo._hasResource["lib.shadow"]=true;(function(a){a=dojo.provide("lib.shadow");var b=a.shadow_widgets={};b.createLoginDialog=function(){var c=new dijit.Dialog({id:"login:dialog","class":"customLoginDialog",title:"\u767b\u5f55"}),d=new lib.dijit.LoginForm({id:"login:form",url:lib.util.getApi("authentication/login").url,postLogin:function(f){c.hide();dojo.publish("action/login_success",[f.userInfo])}});c.containerNode.appendChild(d.domNode);c.startup()};b.createSlideToaster=
function(){var c=new dojox.widget.Toaster({id:"toaster",messageTopic:"msg/toaster",positionDirection:"tr-left",duration:1E3});c.placeAt(dojo.body())};a.bind=function(){for(var c in b)b[c]()}})()}
if(!dojo._hasResource["lib.util"]){dojo._hasResource["lib.util"]=true;(function(a){a=dojo.provide("lib.util");a._apiList={};a.parseApiList=function(d){dojo.xhrGet({url:lib.core.env.serviceUrl,content:{p:"api"},handleAs:"json",timeout:1E4,load:function(f){for(var e in f)f[e].url=lib.core.env.serviceUrl+"?"+f[e].url;a._apiList=f;d()},error:function(f){console.error(f.message)}})};a.getApi=function(d){console.assert(a._apiList[d],"no such api:"+d);return a._apiList[d]};a.getResource=function(d){var f;
console.assert(f=lib.core.env.baseUrl);return lib.util.format(f+"resource/%s",d)};a.nav_list=[{label:"\u516c\u5171",items:{name:"\u7cfb\u7edf\u7814\u53d1",signal:"newtab/dev"}},{label:"\u5b66\u751f",items:[{name:"\u67e5\u770b\u4fe1\u606f",signal:"newtab/information"},{name:"\u63d0\u4ea4\u4f5c\u54c1",signal:"newtab/uploadwork"},{name:"\u67e5\u770b\u5206\u6570",signal:"newtab/viewscore"},{name:"\u4fee\u6539\u5bc6\u7801",signal:"newtab/alterpassword"}]},{label:"\u6559\u5e08",items:[{name:"\u67e5\u770b\u4fe1\u606f",
signal:"newtab/information"},{name:"\u63d0\u4ea4\u5206\u6570",signal:"newtab/commitscore"}]},{label:"\u7ba1\u7406\u5458",items:[{name:"\u67e5\u770b\u5b66\u751f\u4fe1\u606f",signal:"viewstudent"},{name:"\u67e5\u770b\u6559\u5e08\u4fe1\u606f",signal:"viewteacher"}]}];var b={init:function(){if(typeof arguments=="undefined")return null;if(arguments.length<1)return null;if(typeof arguments[0]!="string")return null;if(typeof RegExp=="undefined")return null;var d=arguments[0],f=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),
e=[],g=[],j=0,k=0,i=0;k=0;for(var l="",m=null;m=f.exec(d);){if(m[9])j+=1;k=k;i=f.lastIndex-m[0].length;g[g.length]=d.substring(k,i);k=f.lastIndex;e[e.length]={match:m[0],left:m[3]?true:false,sign:m[4]||"",pad:m[5]||" ",min:m[6]||0,precision:m[8],code:m[9]||"%",negative:parseInt(arguments[j])<0?true:false,argument:String(arguments[j])}}g[g.length]=d.substring(k);if(e.length==0)return d;if(arguments.length-1<j)return null;d=null;for(d=0;d<e.length;d++){if(e[d].code=="%")substitution="%";else if(e[d].code==
"b"){e[d].argument=String(Math.abs(parseInt(e[d].argument)).toString(2));substitution=b.convert(e[d],true)}else if(e[d].code=="c"){e[d].argument=String(String.fromCharCode(parseInt(Math.abs(parseInt(e[d].argument)))));substitution=b.convert(e[d],true)}else if(e[d].code=="d"){e[d].argument=String(Math.abs(parseInt(e[d].argument)));substitution=b.convert(e[d])}else if(e[d].code=="f"){e[d].argument=String(Math.abs(parseFloat(e[d].argument)).toFixed(e[d].precision?e[d].precision:6));substitution=b.convert(e[d])}else if(e[d].code==
"o"){e[d].argument=String(Math.abs(parseInt(e[d].argument)).toString(8));substitution=b.convert(e[d])}else if(e[d].code=="s"){e[d].argument=e[d].argument.substring(0,e[d].precision?e[d].precision:e[d].argument.length);substitution=b.convert(e[d],true)}else if(e[d].code=="x"){e[d].argument=String(Math.abs(parseInt(e[d].argument)).toString(16));substitution=b.convert(e[d])}else if(e[d].code=="X"){e[d].argument=String(Math.abs(parseInt(e[d].argument)).toString(16));substitution=b.convert(e[d]).toUpperCase()}else substitution=
e[d].match;l+=g[d];l+=substitution}l+=g[d];return l},convert:function(d,f){d.sign=f?"":d.negative?"-":d.sign;var e=d.min-d.argument.length+1-d.sign.length;e=(new Array(e<0?0:e)).join(d.pad);return d.left?d.pad=="0"||f?d.sign+d.argument+e.replace(/0/g," "):d.sign+d.argument+e:d.pad=="0"||f?d.sign+e+d.argument:e+d.sign+d.argument}},c=b.init;a.format=a.sprintf=c})()}
if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(a,b){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(c){if(b&&b.indexOf(c)!=-1)return c;return"\\"+c})};dojo.regexp.buildGroupRE=function(a,b,c){if(!(a instanceof Array))return b(a);for(var d=[],f=0;f<a.length;f++)d.push(b(a[f]));return dojo.regexp.group(d.join("|"),c)};dojo.regexp.group=function(a,b){return"("+(b?"?:":"")+a+")"}}
if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(a,b,c){var d=document.cookie;if(arguments.length==1){var f=d.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(a)+"=([^;]*)"));return f?decodeURIComponent(f[1]):undefined}else{c=c||{};d=c.expires;if(typeof d=="number"){var e=new Date;e.setTime(e.getTime()+d*24*60*60*1E3);d=c.expires=e}if(d&&d.toUTCString)c.expires=d.toUTCString();b=encodeURIComponent(b);d=a+"="+b;for(f in c){d+=
"; "+f;e=c[f];if(e!==true)d+="="+e}document.cookie=d}};dojo.cookie.isSupported=function(){if(!("cookieEnabled"in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1})}return navigator.cookieEnabled}}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton")}
if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2handles=
{};this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress")},onStartup:function(a){dojo.forEach(a.children,this.onAddChild,this);a.selected&&this.onSelectChild(a.selected)},destroy:function(){for(var a in this.pane2button)this.onRemoveChild(dijit.byId(a));
this.inherited(arguments)},onAddChild:function(a,b){var c=dojo.doc.createElement("span");this.domNode.appendChild(c);var d=dojo.getObject(this.buttonWidget),f=new d({id:this.id+"_"+a.id,label:a.title,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,title:a.tooltip},c);dijit.setWaiState(f.focusNode,"selected","false");this.pane2handles[a.id]=[this.connect(a,"attr",function(e,g){if(arguments.length==2){var j={title:"label",showTitle:"showLabel",iconClass:"iconClass",closable:"closeButton",
tooltip:"title"}[e];j&&f.attr(j,g)}}),this.connect(f,"onClick",dojo.hitch(this,"onButtonClick",a)),this.connect(f,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",a))];this.addChild(f,b);this.pane2button[a.id]=f;a.controlButton=f;if(!this._currentChild){f.focusNode.setAttribute("tabIndex","0");dijit.setWaiState(f.focusNode,"selected","true");this._currentChild=a}!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList&&this._rectifyRtlTabList()},onRemoveChild:function(a){if(this._currentChild===
a)this._currentChild=null;dojo.forEach(this.pane2handles[a.id],this.disconnect,this);delete this.pane2handles[a.id];var b=this.pane2button[a.id];if(b){this.removeChild(b);delete this.pane2button[a.id];b.destroy()}delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=this.pane2button[this._currentChild.id];b.attr("checked",false);dijit.setWaiState(b.focusNode,"selected","false");b.focusNode.setAttribute("tabIndex","-1")}b=this.pane2button[a.id];b.attr("checked",true);
dijit.setWaiState(b.focusNode,"selected","true");this._currentChild=a;b.focusNode.setAttribute("tabIndex","0");a=dijit.byId(this.containerId);dijit.setWaiState(a.containerNode,"labelledby",b.id)}},onButtonClick:function(a){var b=dijit.byId(this.containerId);b.selectChild(a)},onCloseButtonClick:function(a){var b=dijit.byId(this.containerId);b.closeChild(a);if(a=this.pane2button[this._currentChild.id])dijit.focus(a.focusNode||a.domNode)},adjacent:function(a){if(!this.isLeftToRight()&&(!this.tabPosition||
/top|bottom/.test(this.tabPosition)))a=!a;var b=this.getChildren(),c=dojo.indexOf(b,this.pane2button[this._currentChild.id]);a=a?1:b.length-1;return b[(c+a)%b.length]},onkeypress:function(a){if(!(this.disabled||a.altKey)){var b=null;if(a.ctrlKey||!a._djpage){var c=dojo.keys;switch(a.charOrCode){case c.LEFT_ARROW:case c.UP_ARROW:a._djpage||(b=false);break;case c.PAGE_UP:if(a.ctrlKey)b=false;break;case c.RIGHT_ARROW:case c.DOWN_ARROW:a._djpage||(b=true);break;case c.PAGE_DOWN:if(a.ctrlKey)b=true;break;
case c.DELETE:this._currentChild.closable&&this.onCloseButtonClick(this._currentChild);dojo.stopEvent(a);break;default:if(a.ctrlKey)if(a.charOrCode===c.TAB){this.adjacent(!a.shiftKey).onClick();dojo.stopEvent(a)}else if(a.charOrCode=="w"){this._currentChild.closable&&this.onCloseButtonClick(this._currentChild);dojo.stopEvent(a)}}if(b!==null){this.adjacent(b).onClick();dojo.stopEvent(a)}}}},onContainerKeyPress:function(a){a.e._djpage=a.page;this.onkeypress(a.e)}});dojo.declare("dijit.layout._StackButton",
dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(){dijit.setWaiRole(this.focusNode||this.domNode,"tab");this.inherited(arguments)},onClick:function(){dijit.focus(this.focusNode)},onClickCloseButton:function(a){a.stopPropagation()}})}
if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",postCreate:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(!this._started){var a=
this.getChildren();dojo.forEach(a,this._setupChild,this);if(this.persist)this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"));else dojo.some(a,function(c){if(c.selected)this.selectedChildWidget=c;return c.selected},this);var b=this.selectedChildWidget;if(!b&&a[0]){b=this.selectedChildWidget=a[0];b.selected=true}dojo.publish(this.id+"-startup",[{children:a,selected:b}]);this.inherited(arguments)}},resize:function(){var a=this.selectedChildWidget;if(a&&!this._hasBeenShown){this._hasBeenShown=
true;this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);dojo.removeClass(a.domNode,"dijitVisible");dojo.addClass(a.domNode,"dijitHidden");a.domNode.title=""},addChild:function(a,b){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[a,b]);this.layout();this.selectedChildWidget||this.selectChild(a)}},removeChild:function(a){this.inherited(arguments);this._started&&dojo.publish(this.id+"-removeChild",[a]);if(!this._beingDestroyed){this._started&&
this.layout();if(this.selectedChildWidget===a){this.selectedChildWidget=undefined;if(this._started){var b=this.getChildren();b.length&&this.selectChild(b[0])}}}},selectChild:function(a){a=dijit.byId(a);if(this.selectedChildWidget!=a){this._transition(a,this.selectedChildWidget);this.selectedChildWidget=a;dojo.publish(this.id+"-selectChild",[a]);this.persist&&dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id)}},_transition:function(a,b){b&&this._hideChild(b);this._showChild(a);if(a.resize)this.doLayout?
a.resize(this._containerContentBox||this._contentBox):a.resize()},_adjacent:function(a){var b=this.getChildren(),c=dojo.indexOf(b,this.selectedChildWidget);c+=a?1:b.length-1;return b[c%b.length]},forward:function(){this.selectChild(this._adjacent(true))},back:function(){this.selectChild(this._adjacent(false))},_onKeyPress:function(a){dojo.publish(this.id+"-containerKeyPress",[{e:a,page:this}])},layout:function(){this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize&&this.selectedChildWidget.resize(this._contentBox)},
_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a.selected=true;dojo.removeClass(a.domNode,"dijitHidden");dojo.addClass(a.domNode,"dijitVisible");a._onShow()},_hideChild:function(a){a.selected=false;dojo.removeClass(a.domNode,"dijitVisible");dojo.addClass(a.domNode,"dijitHidden");a.onHide()},closeChild:function(a){var b=a.onClose(this,a);if(b){this.removeChild(a);a.destroyRecursive()}},destroyDescendants:function(a){dojo.forEach(this.getChildren(),
function(b){this.removeChild(b);b.destroyRecursive(a)},this)}});dojo.extend(dijit._Widget,{selected:false,closable:false,iconClass:"",showTitle:true,onClose:function(){return true}})}
if(!dojo._hasResource["dijit.layout.AccordionPane"]){dojo._hasResource["dijit.layout.AccordionPane"]=true;dojo.provide("dijit.layout.AccordionPane");dojo.declare("dijit.layout.AccordionPane",dijit.layout.ContentPane,{constructor:function(){dojo.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0")},onSelected:function(){}})}
if(!dojo._hasResource["dijit.layout.AccordionContainer"]){dojo._hasResource["dijit.layout.AccordionContainer"]=true;dojo.provide("dijit.layout.AccordionContainer");dojo.declare("dijit.layout.AccordionContainer",dijit.layout.StackContainer,{duration:dijit.defaultDuration,buttonWidget:"dijit.layout._AccordionButton",_verticalSpace:0,baseClass:"dijitAccordionContainer",postCreate:function(){this.domNode.style.overflow="hidden";this.inherited(arguments);dijit.setWaiRole(this.domNode,"tablist")},startup:function(){if(!this._started){this.inherited(arguments);
if(this.selectedChildWidget){var a=this.selectedChildWidget.containerNode.style;a.display="";a.overflow="auto";this.selectedChildWidget._buttonWidget._setSelectedState(true)}}},_getTargetHeight:function(a){var b=dojo.getComputedStyle(a);return Math.max(this._verticalSpace-dojo._getPadBorderExtents(a,b).h,0)},layout:function(){var a=this.selectedChildWidget,b=0;dojo.forEach(this.getChildren(),function(d){b+=d._buttonWidget.getTitleHeight()});var c=this._contentBox;this._verticalSpace=c.h-b;this._containerContentBox=
{h:this._verticalSpace,w:c.w};a&&a.resize(this._containerContentBox)},_setupChild:function(a){var b=dojo.getObject(this.buttonWidget),c=a._buttonWidget=new b({contentWidget:a,label:a.title,title:a.tooltip,iconClass:a.iconClass,id:a.id+"_button",parent:this});a._accordionConnectHandle=this.connect(a,"attr",function(d,f){if(arguments.length==2)switch(d){case "title":case "iconClass":c.attr(d,f)}});dojo.place(a._buttonWidget.domNode,a.domNode,"before");this.inherited(arguments)},removeChild:function(a){this.disconnect(a._accordionConnectHandle);
delete a._accordionConnectHandle;a._buttonWidget.destroy();delete a._buttonWidget;this.inherited(arguments)},getChildren:function(){return dojo.filter(this.inherited(arguments),function(a){return a.declaredClass!=this.buttonWidget},this)},destroy:function(){dojo.forEach(this.getChildren(),function(a){a._buttonWidget.destroy()});this.inherited(arguments)},_transition:function(a,b){if(!this._inTransition){this._inTransition=true;var c=[];if(a){a._buttonWidget.setSelected(true);this._showChild(a);this.doLayout&&
a.resize&&a.resize(this._containerContentBox);var d=a.domNode;dojo.addClass(d,"dijitVisible");dojo.removeClass(d,"dijitHidden");var f=d.style.overflow;d.style.overflow="hidden";c.push(dojo.animateProperty({node:d,duration:this.duration,properties:{height:{start:1,end:this._getTargetHeight(d)}},onEnd:dojo.hitch(this,function(){d.style.overflow=f;delete this._inTransition})}))}if(b){b._buttonWidget.setSelected(false);var e=b.domNode,g=e.style.overflow;e.style.overflow="hidden";c.push(dojo.animateProperty({node:e,
duration:this.duration,properties:{height:{start:this._getTargetHeight(e),end:1}},onEnd:function(){dojo.addClass(e,"dijitHidden");dojo.removeClass(e,"dijitVisible");e.style.overflow=g;b.onHide&&b.onHide()}}))}dojo.fx.combine(c).play()}},_onKeyPress:function(a,b){if(this._inTransition||this.disabled||a.altKey||!(b||a.ctrlKey))this._inTransition&&dojo.stopEvent(a);else{var c=dojo.keys,d=a.charOrCode;if(b&&(d==c.LEFT_ARROW||d==c.UP_ARROW)||a.ctrlKey&&d==c.PAGE_UP){this._adjacent(false)._buttonWidget._onTitleClick();
dojo.stopEvent(a)}else if(b&&(d==c.RIGHT_ARROW||d==c.DOWN_ARROW)||a.ctrlKey&&(d==c.PAGE_DOWN||d==c.TAB)){this._adjacent(true)._buttonWidget._onTitleClick();dojo.stopEvent(a)}}}});dojo.declare("dijit.layout._AccordionButton",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("dijit.layout","templates/AccordionButton.html",'<div dojoAttachPoint=\'titleNode,focusNode\' dojoAttachEvent=\'ondijitclick:_onTitleClick,onkeypress:_onTitleKeyPress,onfocus:_handleFocus,onblur:_handleFocus,onmouseenter:_onTitleEnter,onmouseleave:_onTitleLeave\'\n\t\tclass=\'dijitAccordionTitle\' wairole="tab" waiState="expanded-false"\n\t\t><span class=\'dijitInline dijitAccordionArrow\' waiRole="presentation"></span\n\t\t><span class=\'arrowTextUp\' waiRole="presentation">+</span\n\t\t><span class=\'arrowTextDown\' waiRole="presentation">-</span\n\t\t><img src="${_blankGif}" alt="" dojoAttachPoint=\'iconNode\' style="vertical-align: middle" waiRole="presentation"/>\n\t\t<span waiRole="presentation" dojoAttachPoint=\'titleTextNode\' class=\'dijitAccordionText\'></span>\n</div>\n'),
attributeMap:dojo.mixin(dojo.clone(dijit.layout.ContentPane.prototype.attributeMap),{label:{node:"titleTextNode",type:"innerHTML"},title:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);this.setSelected(this.selected);var a=dojo.attr(this.domNode,"id").replace(" ","_");dojo.attr(this.titleTextNode,
"id",a+"_title");dijit.setWaiState(this.focusNode,"labelledby",dojo.attr(this.titleTextNode,"id"))},getTitleHeight:function(){return dojo.marginBox(this.titleNode).h},_onTitleClick:function(){var a=this.getParent();if(!a._inTransition){a.selectChild(this.contentWidget);dijit.focus(this.focusNode)}},_onTitleEnter:function(){dojo.addClass(this.focusNode,"dijitAccordionTitle-hover")},_onTitleLeave:function(){dojo.removeClass(this.focusNode,"dijitAccordionTitle-hover")},_onTitleKeyPress:function(a){return this.getParent()._onKeyPress(a,
this.contentWidget)},_setSelectedState:function(a){this.selected=a;dojo[a?"addClass":"removeClass"](this.titleNode,"dijitAccordionTitle-selected");dijit.setWaiState(this.focusNode,"expanded",a);dijit.setWaiState(this.focusNode,"selected",a);this.focusNode.setAttribute("tabIndex",a?"0":"-1")},_handleFocus:function(a){dojo.toggleClass(this.titleTextNode,"dijitAccordionFocused",a.type=="focus")},setSelected:function(a){this._setSelectedState(a);if(a){a=this.contentWidget;a.onSelected&&a.onSelected()}}})}
if(!dojo._hasResource["dijit.MenuBarItem"]){dojo._hasResource["dijit.MenuBarItem"]=true;dojo.provide("dijit.MenuBarItem");dojo.declare("dijit._MenuBarItemMixin",null,{templateString:dojo.cache("dijit","templates/MenuBarItem.html",'<div class="dijitReset dijitInline dijitMenuItem dijitMenuItemLabel" dojoAttachPoint="focusNode" waiRole="menuitem" tabIndex="-1"\'\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\n\t<span dojoAttachPoint="containerNode"></span>\n</div>\n'),
attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"}})});dojo.declare("dijit.MenuBarItem",[dijit.MenuItem,dijit._MenuBarItemMixin],{})}
if(!dojo._hasResource["lib.dijit.Navigator"]){dojo._hasResource["lib.dijit.Navigator"]=true;(function(a){a=dojo.provide("lib.dijit.Navigator");dojo.declare("lib.dijit.Navigator",dijit.layout.AccordionContainer,{_paneList:{},addChild:function(b){this.inherited(arguments);this._paneList[b.title]=b},hideChild:function(b){try{var c=this._paneList[b];this.removeChild(c)}catch(d){console.debug("no such pane:"+b)}},resetChildren:function(){var b=this.getChildren();for(var c in b){var d=b[c];this.removeChild(d)}},
showChild:function(b){try{var c=this._paneList[b];this.addChild(c);this._showChild(c)}catch(d){console.debug("no title:"+b)}},show:function(){dojo.style(this.domNode,"display","inline");this.getParent().layout()},hide:function(){dojo.style(this.domNode,"display","none");this.getParent().layout()}});dojo.declare("lib.dijit.NavigatorPane",dijit.layout.ContentPane,{actionList:[{name:"doAction",signal:"signal1"}],style:"background:silver;",postCreate:function(){dojo.addClass(this.domNode,"customNavigator");
var b=new dijit.Menu({style:"width:100%; background:inherit;"});dojo.forEach(this.actionList,function(c){b.addChild(new dijit.MenuItem({label:c.name,iconClass:"plusIcon",postCreate:function(){dojo.addClass(this.domNode,"customNavigatorMenuItemNormal")},onClick:function(){dojo.publish(c.signal)},onMouseOver:function(){dojo.addClass(this.domNode,"customNavigatorMenuItemMouseOver")},onMouseOut:function(){dojo.removeClass(this.domNode,"customNavigatorMenuItemMouseOver")}}))});this.containerNode.appendChild(b.domNode)}})})()}
if(!dojo._hasResource["dijit.layout.BorderContainer"]){dojo._hasResource["dijit.layout.BorderContainer"]=true;dojo.provide("dijit.layout.BorderContainer");dojo.declare("dijit.layout.BorderContainer",dijit.layout._LayoutWidget,{design:"headline",gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:"dijit.layout._Splitter",postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._splitters={};this._splitterThickness={}},startup:function(){if(!this._started){dojo.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments)}},_setupChild:function(a){var b=a.region;if(b){this.inherited(arguments);dojo.addClass(a.domNode,this.baseClass+"Pane");var c=this.isLeftToRight();if(b=="leading")b=c?"left":"right";if(b=="trailing")b=c?"right":"left";this["_"+b]=a.domNode;this["_"+b+"Widget"]=a;if((a.splitter||this.gutters)&&!this._splitters[b]){var d=dojo.getObject(a.splitter?
this._splitterClass:"dijit.layout._Gutter");c={left:"right",right:"left",top:"bottom",bottom:"top",leading:"trailing",trailing:"leading"};c=new d({container:this,child:a,region:b,oppNode:this["_"+c[a.region]],live:this.liveSplitters});c.isSplitter=true;this._splitters[b]=c.domNode;dojo.place(this._splitters[b],a.domNode,"after");c.startup()}a.region=b}},_computeSplitterThickness:function(a){this._splitterThickness[a]=this._splitterThickness[a]||dojo.marginBox(this._splitters[a])[/top|bottom/.test(a)?
"h":"w"]},layout:function(){for(var a in this._splitters)this._computeSplitterThickness(a);this._layoutChildren()},addChild:function(){this.inherited(arguments);this._started&&this._layoutChildren()},removeChild:function(a){var b=a.region,c=this._splitters[b];if(c){dijit.byNode(c).destroy();delete this._splitters[b];delete this._splitterThickness[b]}this.inherited(arguments);delete this["_"+b];delete this["_"+b+"Widget"];this._started&&this._layoutChildren(a.region);dojo.removeClass(a.domNode,this.baseClass+
"Pane")},getChildren:function(){return dojo.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return(a=this._splitters[a])?dijit.byNode(a):null},resize:function(){if(!this.cs||!this.pe){var a=this.domNode;this.cs=dojo.getComputedStyle(a);this.pe=dojo._getPadExtents(a,this.cs);this.pe.r=dojo._toPixelValue(a,this.cs.paddingRight);this.pe.b=dojo._toPixelValue(a,this.cs.paddingBottom);dojo.style(a,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(a){if(this._borderBox&&
this._borderBox.h){var b=this.design=="sidebar",c=0,d=0,f=0,e=0,g={},j={},k={},i={},l=this._center&&this._center.style||{},m=/left|right/.test(a),n=!a||!m&&!b;m=!a||m&&b;if(this._top){g=m&&this._top.style;c=dojo.marginBox(this._top).h}if(this._left){j=n&&this._left.style;f=dojo.marginBox(this._left).w}if(this._right){k=n&&this._right.style;e=dojo.marginBox(this._right).w}if(this._bottom){i=m&&this._bottom.style;d=dojo.marginBox(this._bottom).h}var o=this._splitters;n=o.top;m=o.bottom;var p=o.left;
o=o.right;var r=this._splitterThickness,q=r.top||0,s=r.left||0,u=r.right||0,z=r.bottom||0;if(s>50||u>50){setTimeout(dojo.hitch(this,function(){this._splitterThickness={};for(var v in this._splitters)this._computeSplitterThickness(v);this._layoutChildren()}),50);return false}r=this.pe;var B={left:(b?f+s:0)+r.l+"px",right:(b?e+u:0)+r.r+"px"};if(n){dojo.mixin(n.style,B);n.style.top=c+r.t+"px"}if(m){dojo.mixin(m.style,B);m.style.bottom=d+r.b+"px"}B={top:(b?0:c+q)+r.t+"px",bottom:(b?0:d+z)+r.b+"px"};if(p){dojo.mixin(p.style,
B);p.style.left=f+r.l+"px"}if(o){dojo.mixin(o.style,B);o.style.right=e+r.r+"px"}dojo.mixin(l,{top:r.t+c+q+"px",left:r.l+f+s+"px",right:r.r+e+u+"px",bottom:r.b+d+z+"px"});l={top:b?r.t+"px":l.top,bottom:b?r.b+"px":l.bottom};dojo.mixin(j,l);dojo.mixin(k,l);j.left=r.l+"px";k.right=r.r+"px";g.top=r.t+"px";i.bottom=r.b+"px";if(b){g.left=i.left=f+s+r.l+"px";g.right=i.right=e+u+r.r+"px"}else{g.left=i.left=r.l+"px";g.right=i.right=r.r+"px"}g=this._borderBox.h-r.t-r.b;j=g-(c+q+d+z);g=b?g:j;k=this._borderBox.w-
r.l-r.r;i=k-(f+s+e+u);b=b?i:k;var A={top:{w:b,h:c},bottom:{w:b,h:d},left:{w:f,h:g},right:{w:e,h:g},center:{h:j,w:i}};if(c=dojo.isIE<8||dojo.isIE&&dojo.isQuirks||dojo.some(this.getChildren(),function(v){return v.domNode.tagName=="TEXTAREA"||v.domNode.tagName=="INPUT"})){c=function(v,C,D){if(v)v.resize?v.resize(C,D):dojo.marginBox(v.domNode,C)};if(p)p.style.height=g;if(o)o.style.height=g;c(this._leftWidget,{h:g},A.left);c(this._rightWidget,{h:g},A.right);if(n)n.style.width=b;if(m)m.style.width=b;c(this._topWidget,
{w:b},A.top);c(this._bottomWidget,{w:b},A.bottom);c(this._centerWidget,A.center)}else{var t={};if(a){t[a]=t.center=true;if(/top|bottom/.test(a)&&this.design!="sidebar")t.left=t.right=true;else if(/left|right/.test(a)&&this.design=="sidebar")t.top=t.bottom=true}dojo.forEach(this.getChildren(),function(v){if(v.resize&&(!a||v.region in t))v.resize(null,A[v.region])},this)}}},destroy:function(){for(var a in this._splitters){var b=this._splitters[a];dijit.byNode(b).destroy();dojo.destroy(b)}delete this._splitters;
delete this._splitterThickness;this.inherited(arguments)}});dojo.extend(dijit._Widget,{region:"",splitter:false,minSize:0,maxSize:Infinity});dojo.declare("dijit.layout._Splitter",[dijit._Widget,dijit._Templated],{live:true,templateString:'<div class="dijitSplitter" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" waiRole="separator"><div class="dijitSplitterThumb"></div></div>',postCreate:function(){this.inherited(arguments);
this.horizontal=/top|bottom/.test(this.region);dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));this._factor=/top|left/.test(this.region)?1:-1;this._minSize=this.child.minSize;this.child.domNode._recalc=true;this.connect(this.container,"resize",function(){this.child.domNode._recalc=true});this._cookieName=this.container.id+"_"+this.region;if(this.container.persist){var a=dojo.cookie(this._cookieName);if(a)this.child.domNode.style[this.horizontal?"height":"width"]=a}},_computeMaxSize:function(){var a=
this.horizontal?"h":"w",b=this.container._splitterThickness[this.region];a=dojo.contentBox(this.container.domNode)[a]-(this.oppNode?dojo.marginBox(this.oppNode)[a]:0)-20-b*2;this._maxSize=Math.min(this.child.maxSize,a)},_startDrag:function(a){if(this.child.domNode._recalc){this._computeMaxSize();this.child.domNode._recalc=false}if(!this.cover){this.cover=dojo.doc.createElement("div");dojo.addClass(this.cover,"dijitSplitterCover");dojo.place(this.cover,this.child.domNode,"after")}dojo.addClass(this.cover,
"dijitSplitterCoverActive");this.fake&&dojo.destroy(this.fake);if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");dojo.addClass(this.domNode,"dijitSplitterShadow");dojo.place(this.fake,this.domNode,"after")}dojo.addClass(this.domNode,"dijitSplitterActive");dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Active");if(this.fake){dojo.removeClass(this.fake,"dijitSplitterHover");dojo.removeClass(this.fake,"dijitSplitter"+(this.horizontal?
"H":"V")+"Hover")}var b=this._factor,c=this._maxSize,d=this._minSize||20,f=this.horizontal,e=f?"pageY":"pageX",g=a[e],j=this.domNode.style,k=f?"h":"w",i=dojo.marginBox(this.child.domNode)[k],l=this.region,m=parseInt(this.domNode.style[l],10),n=this._resize,o={},p=this.child.domNode,r=dojo.hitch(this.container,this.container._layoutChildren);f=dojo.doc.body;this._handlers=(this._handlers||[]).concat([dojo.connect(f,"onmousemove",this._drag=function(q,s){q=q[e]-g;var u=b*q+i,z=Math.max(Math.min(u,c),
d);if(n||s){o[k]=z;dojo.marginBox(p,o);r(l)}j[l]=b*q+m+(z-u)+"px"}),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent),dojo.connect(f,"onmouseup",this,"_stopDrag")]);dojo.stopEvent(a)},_onMouse:function(a){a=a.type=="mouseover"||a.type=="mouseenter";dojo.toggleClass(this.domNode,"dijitSplitterHover",a);dojo.toggleClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&dojo.removeClass(this.cover,
"dijitSplitterCoverActive");this.fake&&dojo.destroy(this.fake);dojo.removeClass(this.domNode,"dijitSplitterActive");dojo.removeClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Active");dojo.removeClass(this.domNode,"dijitSplitterShadow");this._drag(a);this._drag(a,true)}finally{this._cleanupHandlers();if(this.oppNode)this.oppNode._recalc=true;delete this._drag}if(this.container.persist)dojo.cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},
_cleanupHandlers:function(){dojo.forEach(this._handlers,dojo.disconnect);delete this._handlers},_onKeyPress:function(a){if(this.child.domNode._recalc){this._computeMaxSize();this.child.domNode._recalc=false}this._resize=true;var b=this.horizontal,c=1,d=dojo.keys;switch(a.charOrCode){case b?d.UP_ARROW:d.LEFT_ARROW:c*=-1;case b?d.DOWN_ARROW:d.RIGHT_ARROW:break;default:return}b=dojo.marginBox(this.child.domNode)[b?"h":"w"]+this._factor*c;c={};c[this.horizontal?"h":"w"]=Math.max(Math.min(b,this._maxSize),
this._minSize);dojo.marginBox(this.child.domNode,c);if(this.oppNode)this.oppNode._recalc=true;this.container._layoutChildren(this.region);dojo.stopEvent(a)},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}});dojo.declare("dijit.layout._Gutter",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitGutter" waiRole="presentation"></div>',postCreate:function(){this.horizontal=/top|bottom/.test(this.region);
dojo.addClass(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}})}if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitToolbarSeparator dijitInline"></div>',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}
if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:'<div class="dijit dijitToolbar" waiRole="toolbar" tabIndex="${tabIndex}" dojoAttachPoint="containerNode"></div>',postCreate:function(){this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW])},
startup:function(){if(!this._started){this.startupKeyNavChildren();this.inherited(arguments)}}})}
if(!dojo._hasResource["dijit.layout._TabContainerBase"]){dojo._hasResource["dijit.layout._TabContainerBase"]=true;dojo.provide("dijit.layout._TabContainerBase");dojo.declare("dijit.layout._TabContainerBase",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:dojo.cache("dijit.layout","templates/TabContainer.html",'<div class="dijitTabContainer">\n\t<div class="dijitTabListWrapper" dojoAttachPoint="tablistNode"></div>\n\t<div dojoAttachPoint="tablistSpacer" class="dijitTabSpacer ${baseClass}-spacer"></div>\n\t<div class="dijitTabPaneWrapper ${baseClass}-container" dojoAttachPoint="containerNode"></div>\n</div>\n'),postMixInProperties:function(){this.baseClass+=
this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&dojo.style(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||dojo.addClass(this.domNode,"dijitTabContainerNoLayout");if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.containerNode,"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,
"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested")}else dojo.addClass(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(a){dojo.addClass(a.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){if(!this._started){this.tablist.startup();this.inherited(arguments)}},layout:function(){if(!(!this._contentBox||typeof this._contentBox.l=="undefined"))if(this.doLayout){var a=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=
a;a=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:a},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,a);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,a[2]);this.selectedChildWidget&&this.selectedChildWidget.resize&&this.selectedChildWidget.resize(this._containerContentBox)}else{this.tablist.resize&&this.tablist.resize({w:dojo.contentBox(this.domNode).w});this.selectedChildWidget.resize()}},destroy:function(){this.tablist&&
this.tablist.destroy();this.inherited(arguments)}})}
if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(!(0>=this.tabPosition.indexOf("-h")))if(this.pane2button){var a=0;for(var b in this.pane2button){var c=
this.pane2button[b].innerDiv.scrollWidth;a=Math.max(a,c)}for(b in this.pane2button)this.pane2button[b].innerDiv.style.width=a+"px"}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",templateString:dojo.cache("dijit.layout","templates/_TabButton.html","<div waiRole=\"presentation\" dojoAttachPoint=\"titleNode\" dojoAttachEvent='onclick:onClick,onmouseenter:_onMouse,onmouseleave:_onMouse'>\n    <div waiRole=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\n        <div waiRole=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent,focusNode'>\n\t        <img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint='iconNode' waiRole=\"presentation\"/>\n\t        <span dojoAttachPoint='containerNode' class='tabLabel'></span>\n\t        <span class=\"closeButton\" dojoAttachPoint='closeNode'\n\t        \t\tdojoAttachEvent='onclick: onClickCloseButton, onmouseenter: _onCloseButtonEnter, onmouseleave: _onCloseButtonLeave'>\n\t        \t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint='closeIcon' class='closeImage' waiRole=\"presentation\"/>\n\t            <span dojoAttachPoint='closeText' class='closeText'>x</span>\n\t        </span>\n        </div>\n    </div>\n</div>\n"),
scrollOnFocus:false,postMixInProperties:function(){if(!this.iconClass)this.iconClass="dijitTabButtonIcon"},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);this.iconNode.className=="dijitTabButtonIcon"&&dojo.style(this.iconNode,"width","1px")},startup:function(){this.inherited(arguments);var a=this.domNode;setTimeout(function(){a.className=a.className},1)},_setCloseButtonAttr:function(a){this.closeButton=a;dojo.toggleClass(this.innerDiv,"dijitClosable",
a);this.closeNode.style.display=a?"":"none";if(a){var b=dojo.i18n.getLocalization("dijit","common");if(this.closeNode){dojo.attr(this.closeNode,"title",b.itemClose);dojo.attr(this.closeIcon,"title",b.itemClose)}b=dojo.i18n.getLocalization("dijit","common");this._closeMenu=new dijit.Menu({id:this.id+"_Menu",targetNodeIds:[this.domNode]});this._closeMenu.addChild(new dijit.MenuItem({label:b.itemClose,onClick:dojo.hitch(this,"onClickCloseButton")}))}else if(this._closeMenu){this._closeMenu.destroyRecursive();
delete this._closeMenu}},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu}this.inherited(arguments)},_onCloseButtonEnter:function(){dojo.addClass(this.closeNode,"closeButton-hover")},_onCloseButtonLeave:function(){dojo.removeClass(this.closeNode,"closeButton-hover")}})}
if(!dojo._hasResource["dijit.layout.ScrollingTabController"]){dojo._hasResource["dijit.layout.ScrollingTabController"]=true;dojo.provide("dijit.layout.ScrollingTabController");dojo.declare("dijit.layout.ScrollingTabController",dijit.layout.TabController,{templateString:dojo.cache("dijit.layout","templates/ScrollingTabController.html",'<div class="dijitTabListContainer-${tabPosition}" style="visibility:hidden">\n\t<div dojoType="dijit.layout._ScrollingTabControllerButton" buttonType="menuBtn" buttonClass="tabStripMenuButton"\n\t\t\ttabPosition="${tabPosition}" dojoAttachPoint="_menuBtn" showLabel=false>&darr;</div>\n\t<div dojoType="dijit.layout._ScrollingTabControllerButton" buttonType="leftBtn" buttonClass="tabStripSlideButtonLeft"\n\t\t\ttabPosition="${tabPosition}" dojoAttachPoint="_leftBtn" dojoAttachEvent="onClick: doSlideLeft" showLabel=false>&larr;</div>\n\t<div dojoType="dijit.layout._ScrollingTabControllerButton" buttonType="rightBtn" buttonClass="tabStripSlideButtonRight"\n\t\t\ttabPosition="${tabPosition}" dojoAttachPoint="_rightBtn" dojoAttachEvent="onClick: doSlideRight" showLabel=false>&rarr;</div>\n\t<div class=\'dijitTabListWrapper\' dojoAttachPoint=\'tablistWrapper\'>\n\t\t<div wairole=\'tablist\' dojoAttachEvent=\'onkeypress:onkeypress\'\n\t\t\t\tdojoAttachPoint=\'containerNode\' class=\'nowrapTabStrip\'>\n\t\t</div>\n\t</div>\n</div>\n'),
useMenu:true,useSlider:true,tabStripClass:"",widgetsInTemplate:true,_minScroll:5,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{"class":"containerNode"}),postCreate:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";dojo.addClass(a,"tabStrip-disabled")}dojo.addClass(this.tablistWrapper,
this.tabStripClass)},onStartup:function(){this.inherited(arguments);dojo.style(this.domNode,"visibility","visible");this._postStartup=true},onAddChild:function(a,b){this.inherited(arguments);var c;if(this.useMenu){c=new dijit.MenuItem({label:a.title,onClick:dojo.hitch(this,function(){this.onSelectChild(a)})});this._menuChildren[a.id]=c;this._menu.addChild(c,b)}this.pane2handles[a.id].push(this.connect(this.pane2button[a.id],"attr",function(d,f){if(this._postStartup)if(arguments.length==2&&d=="label"){c&&
c.attr(d,f);this._dim&&this.resize(this._dim)}}));dojo.style(this.containerNode,"width",dojo.style(this.containerNode,"width")+200+"px")},onRemoveChild:function(a){this.inherited(arguments);if(this.useMenu&&a&&a.id&&this._menuChildren[a.id]){this._menu.removeChild(this._menuChildren[a.id]);this._menuChildren[a.id].destroy();delete this._menuChildren[a.id]}},_initButtons:function(){this._menuChildren={};this._btnWidth=0;this._buttons=dojo.query("> .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&
a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode)){this._btnWidth+=dojo.marginBox(a).w;return true}else{dojo.style(a,"display","none");return false}},this);if(this.useMenu){this._menu=new dijit.Menu({id:this.id+"_menu",targetNodeIds:[this._menuBtn.domNode],leftClickToOpen:true,refocus:false});this._supportingWidgets.push(this._menu)}},_getTabsWidth:function(){var a=this.getChildren();if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode;a=a[this.isLeftToRight()?
a.length-1:0].domNode;return a.offsetLeft+dojo.style(a,"width")-b.offsetLeft}else return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||dojo.style(this.scrollNode,"width");return b>0&&a<b},resize:function(a){if(this.domNode.offsetWidth!=0){this._dim=a;this.scrollNode.style.height="auto";this._contentBox=dijit.layout.marginBox2contentBox(this.domNode,{h:0,w:a.w});this._contentBox.h=this.scrollNode.offsetHeight;dojo.contentBox(this.domNode,this._contentBox);a=this._enableBtn(this._contentBox.w);
this._buttons.style("display",a?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";dijit.layout.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){a=this.scrollNode;var b=this._convertToScrollLeft(this._getScrollForSelectedTab());a.scrollLeft=b}this._setButtonClass(this._getScroll())}},_getScroll:function(){var a=
this.isLeftToRight()||dojo.isIE<8?this.scrollNode.scrollLeft:dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width")+(dojo.isIE==8?-1:1)*this.scrollNode.scrollLeft;return a},_convertToScrollLeft:function(a){if(this.isLeftToRight()||dojo.isIE<8)return a;else{var b=dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width");return(dojo.isIE==8?-1:1)*(a-b)}},onSelectChild:function(a){var b=this.pane2button[a.id];if(b&&a){var c=b.domNode;if(c!=this._selectedTab){this._selectedTab=
c;var d=this._getScroll();if(d>c.offsetLeft||d+dojo.style(this.scrollNode,"width")<c.offsetLeft+dojo.style(c,"width")){c=this.createSmoothScroll();dojo.connect(c,"onEnd",function(){b.onClick(null)});c.play()}else b.onClick(null)}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=dojo.style(this.scrollNode,"width"),c=dojo.style(this.containerNode,"width");c=c-b;var d=this._getTabsWidth();if(a.length&&d>b)return{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,
max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+dojo.style(a[a.length-1].domNode,"width")-b:c};else{a=this.isLeftToRight()?0:c;return{min:a,max:a}}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=dojo.style(this.scrollNode,"width"),c=this._getScrollBounds();a=a.offsetLeft+dojo.style(a,"width")/2-b/2;return a=Math.min(Math.max(a,c.min),c.max)},createSmoothScroll:function(a){if(arguments.length>0){var b=this._getScrollBounds();a=Math.min(Math.max(a,b.min),b.max)}else a=this._getScrollForSelectedTab();
this._anim&&this._anim.status()=="playing"&&this._anim.stop();var c=this,d=this.scrollNode,f=new dojo._Animation({beforeBegin:function(){this.curve&&delete this.curve;var e=d.scrollLeft,g=c._convertToScrollLeft(a);f.curve=new dojo._Line(e,g)},onAnimate:function(e){d.scrollLeft=e}});this._anim=f;this._setButtonClass(a);return f},_getBtnNode:function(a){for(a=a.target;a&&!dojo.hasClass(a,"tabStripButton");)a=a.parentNode;return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,
this._getBtnNode(a))},doSlide:function(a,b){if(!(b&&dojo.hasClass(b,"dijitTabBtnDisabled"))){b=dojo.style(this.scrollNode,"width");a=b*0.75*a;a=this._getScroll()+a;this._setButtonClass(a);this.createSmoothScroll(a).play()}},_setButtonClass:function(a){var b="dijitTabBtnDisabled",c=this._getScrollBounds();dojo.toggleClass(this._leftBtn.domNode,b,a<=c.min);dojo.toggleClass(this._rightBtn.domNode,b,a>=c.max)}});dojo.declare("dijit.layout._ScrollingTabControllerButton",dijit.form.Button,{baseClass:"dijitTab",
buttonType:"",buttonClass:"",tabPosition:"top",templateString:dojo.cache("dijit.layout","templates/_ScrollingTabControllerButton.html",'<div id="${id}-${buttonType}" class="tabStripButton dijitTab ${buttonClass} tabStripButton-${tabPosition}"\n\t\tdojoAttachEvent="onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse">\n\t<div role="presentation" wairole="presentation" class="dijitTabInnerDiv" dojoattachpoint="innerDiv,focusNode">\n\t\t<div role="presentation" wairole="presentation" class="dijitTabContent dijitButtonContents" dojoattachpoint="tabContent">\n\t\t\t<img src="${_blankGif}"/>\n\t\t\t<span dojoAttachPoint="containerNode,titleNode" class="dijitButtonText"></span>\n\t\t</div>\n\t</div>\n</div>\n'),
tabIndex:""})}
if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",dijit.layout._TabContainerBase,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(a){var b=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),c=dojo.getObject(this.controllerWidget);return new c({id:this.id+"_tablist",tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,
"class":b,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},a)},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget)this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"dijit.layout.ScrollingTabController":"dijit.layout.TabController"}})}
if(!dojo._hasResource["lib.dijit.WholePage"]){dojo._hasResource["lib.dijit.WholePage"]=true;(function(){function a(){var c=new dijit.layout.BorderContainer({id:"header",gutters:false,region:"top","class":"customHeader"});dojo.hitch(c,function(){var d=new dijit.Toolbar({region:"top",style:"height:2em;"});this.addChild(d);var f=[["login","\u767b\u5165"],["logout","\u767b\u51fa"],["about","\u5173\u4e8e"]].reverse();dojo.forEach(f,function(e){var g=e[1],j=e[0];d.addChild(new dijit.form.Button({label:g,
style:"float:right;",onClick:function(){dojo.publish("ui/"+j)}}))});f=new dijit.layout.ContentPane({style:"margin:0.1em; float:left; font-size:1em; color:#29189C; padding:0 20px;",setPrompt:function(e){if(dojo.isString(e))this.attr("content",e);else if(dojo.isObject(e)){var g=e.userType.teacher&&"\u8001\u5e08"||"\u540c\u5b66";e=g+'<span style="color:#BD0E19;">'+e.user+"</span>\u4f60\u597d\uff01";this.attr("content",e)}else this.attr("content","\u4f60\u597d\uff01\u8bbf\u5ba2\uff0c\u8bf7\u5148\u767b\u5f55")}});
d.addChild(f);this.setPrompt=dojo.hitch(f,"setPrompt");this.addChild(new dijit.layout.ContentPane({region:"center","class":"customLogo",content:'<center style="margin-top:0.25em;">\u7f8e\u672f\u7cfb\u62db\u751f\u7cfb\u7edf</center>'}))})();return c}function b(){var c=new lib.dijit.Navigator({id:"navigator",region:"left",splitter:true,style:"width:11%;"});dojo.forEach(lib.util.nav_list,function(d){d=new lib.dijit.NavigatorPane({title:d.label,actionList:d.items});c.addChild(d)});return c}dojo.provide("lib.dijit.WholePage");
dojo.declare("lib.dijit.Root",dijit.layout.BorderContainer,{style:"width:100%; height:100%;",gutters:false,startup_has_finished:false,startup:function(){this.inherited(arguments);if(!this.startup_has_finished){var c=a(),d=b(),f=new dijit.layout.TabContainer({id:"workspace",region:"center",useSlider:true,useMenu:true,addPane:function(g){var j=this;g.attr("getParent",function(){return j});this.addChild(g);this.selectChild(g)}}),e=new dijit.layout.ContentPane({"class":"customFooter",region:"bottom",
content:"\u00a9Copyright 2009 <a href='http://mms.cuc.edu.cn'>mms.cuc.edu.cn</a> All Rights Reserved"});this.addChild(c);this.addChild(f);this.addChild(d);this.addChild(e);this.startup_has_finished=true}}})})()}
if(!dojo._hasResource["lib.core"]){dojo._hasResource["lib.core"]=true;(function(a){a=dojo.provide("lib.core");a.init=function(){dojo.publish("ui/about");dojo.publish("ui/adjust")};a.bindApp=function(){lib.util.parseApiList(function(){lib.callback.bind();lib.shadow.bind();var b=new lib.dijit.Root({});b.placeAt(dojo.body());b.startup();a.init()})}})()}
dojo.i18n._preloadLocalizations("lib.nls.core",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nl","nl-nl","no","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
